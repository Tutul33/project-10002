"use strict";(self.webpackChunkproject_10002=self.webpackChunkproject_10002||[]).push([[792],{1076:(Rt,Ue,U)=>{U.d(Ue,{Am:()=>hn,Bd:()=>Be,FA:()=>mt,Fy:()=>et,I9:()=>Kt,Im:()=>Nr,Ku:()=>Ge,Ll:()=>xt,T9:()=>Ae,Uj:()=>Se,XA:()=>ze,ZQ:()=>Qe,bD:()=>Vr,c1:()=>Fn,cY:()=>Te,eX:()=>Ne,g:()=>ae,gR:()=>Er,hp:()=>pr,jZ:()=>ft,lT:()=>en,lV:()=>lr,mS:()=>qe,nr:()=>we,p7:()=>Zt,sr:()=>pn,tD:()=>or,u:()=>J,zW:()=>ke,zw:()=>pe});const q=function(z){const k=[];let H=0;for(let ne=0;ne<z.length;ne++){let ie=z.charCodeAt(ne);ie<128?k[H++]=ie:ie<2048?(k[H++]=ie>>6|192,k[H++]=63&ie|128):55296==(64512&ie)&&ne+1<z.length&&56320==(64512&z.charCodeAt(ne+1))?(ie=65536+((1023&ie)<<10)+(1023&z.charCodeAt(++ne)),k[H++]=ie>>18|240,k[H++]=ie>>12&63|128,k[H++]=ie>>6&63|128,k[H++]=63&ie|128):(k[H++]=ie>>12|224,k[H++]=ie>>6&63|128,k[H++]=63&ie|128)}return k},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,k){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,ne=[];for(let ie=0;ie<z.length;ie+=3){const Re=z[ie],ct=ie+1<z.length,jt=ct?z[ie+1]:0,vt=ie+2<z.length,pt=vt?z[ie+2]:0;let oi=(15&jt)<<2|pt>>6,kn=63&pt;vt||(kn=64,ct||(oi=64)),ne.push(H[Re>>2],H[(3&Re)<<4|jt>>4],H[oi],H[kn])}return ne.join("")},encodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(z):this.encodeByteArray(q(z),k)},decodeString(z,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(z):function(z){const k=[];let H=0,ne=0;for(;H<z.length;){const ie=z[H++];if(ie<128)k[ne++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Re=z[H++];k[ne++]=String.fromCharCode((31&ie)<<6|63&Re)}else if(ie>239&&ie<365){const vt=((7&ie)<<18|(63&z[H++])<<12|(63&z[H++])<<6|63&z[H++])-65536;k[ne++]=String.fromCharCode(55296+(vt>>10)),k[ne++]=String.fromCharCode(56320+(1023&vt))}else{const Re=z[H++],ct=z[H++];k[ne++]=String.fromCharCode((15&ie)<<12|(63&Re)<<6|63&ct)}}return k.join("")}(this.decodeStringToByteArray(z,k))},decodeStringToByteArray(z,k){this.init_();const H=k?this.charToByteMapWebSafe_:this.charToByteMap_,ne=[];for(let ie=0;ie<z.length;){const Re=H[z.charAt(ie++)],jt=ie<z.length?H[z.charAt(ie)]:0;++ie;const pt=ie<z.length?H[z.charAt(ie)]:64;++ie;const wt=ie<z.length?H[z.charAt(ie)]:64;if(++ie,null==Re||null==jt||null==pt||null==wt)throw new _e;ne.push(Re<<2|jt>>4),64!==pt&&(ne.push(jt<<4&240|pt>>2),64!==wt&&ne.push(pt<<6&192|wt))}return ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class _e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Se=function(z){return function(z){const k=q(z);return le.encodeByteArray(k,!0)}(z).replace(/\./g,"")},J=function(z){try{return le.decodeString(z,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};function pe(z,k){if(!(k instanceof Object))return k;switch(k.constructor){case Date:return new Date(k.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return k}for(const H in k)!k.hasOwnProperty(H)||!Ke(H)||(z[H]=pe(z[H],k[H]));return z}function Ke(z){return"__proto__"!==z}function qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const lt=()=>{try{return qe().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if(typeof document>"u")return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const k=z&&J(z[1]);return k&&JSON.parse(k)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},Ae=()=>{var z;return null===(z=lt())||void 0===z?void 0:z.config},ze=z=>{var k;return null===(k=lt())||void 0===k?void 0:k[`_${z}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((k,H)=>{this.resolve=k,this.reject=H})}wrapCallback(k){return(H,ne)=>{H?this.reject(H):this.resolve(ne),"function"==typeof k&&(this.promise.catch(()=>{}),1===k.length?k(H):k(H,ne))}}}function et(z,k){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ne=k||"demo-project",ie=z.iat||0,Re=z.sub||z.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${ne}`,aud:ne,iat:ie,exp:ie+3600,auth_time:ie,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},z);return[Se(JSON.stringify({alg:"none",type:"JWT"})),Se(JSON.stringify(ct)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ft(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function xt(){var z;const k=null===(z=lt())||void 0===z?void 0:z.forceEnvironment;if("node"===k)return!0;if("browser"===k)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Be(){return typeof window<"u"||Zt()}function Zt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Fn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function pn(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function lr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function en(){const z=Qe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!xt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){try{return"object"==typeof indexedDB}catch{return!1}}function Ne(){return new Promise((z,k)=>{try{let H=!0;const ne="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(ne);ie.onsuccess=()=>{ie.result.close(),H||self.indexedDB.deleteDatabase(ne),z(!0)},ie.onupgradeneeded=()=>{H=!1},ie.onerror=()=>{var Re;k((null===(Re=ie.error)||void 0===Re?void 0:Re.message)||"")}}catch(H){k(H)}})}class ae extends Error{constructor(k,H,ne){super(H),this.code=k,this.customData=ne,this.name="FirebaseError",Object.setPrototypeOf(this,ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}}class mt{constructor(k,H,ne){this.service=k,this.serviceName=H,this.errors=ne}create(k,...H){const ne=H[0]||{},ie=`${this.service}/${k}`,Re=this.errors[k],ct=Re?function mr(z,k){return z.replace(Ut,(H,ne)=>{const ie=k[ne];return null!=ie?String(ie):`<${ne}?>`})}(Re,ne):"Error";return new ae(ie,`${this.serviceName}: ${ct} (${ie}).`,ne)}}const Ut=/\{\$([^}]+)}/g;function Er(z,k){return Object.prototype.hasOwnProperty.call(z,k)}function Nr(z){for(const k in z)if(Object.prototype.hasOwnProperty.call(z,k))return!1;return!0}function Vr(z,k){if(z===k)return!0;const H=Object.keys(z),ne=Object.keys(k);for(const ie of H){if(!ne.includes(ie))return!1;const Re=z[ie],ct=k[ie];if(Zn(Re)&&Zn(ct)){if(!Vr(Re,ct))return!1}else if(Re!==ct)return!1}for(const ie of ne)if(!H.includes(ie))return!1;return!0}function Zn(z){return null!==z&&"object"==typeof z}function hn(z){const k=[];for(const[H,ne]of Object.entries(z))Array.isArray(ne)?ne.forEach(ie=>{k.push(encodeURIComponent(H)+"="+encodeURIComponent(ie))}):k.push(encodeURIComponent(H)+"="+encodeURIComponent(ne));return k.length?"&"+k.join("&"):""}function Kt(z){const k={};return z.replace(/^\?/,"").split("&").forEach(ne=>{if(ne){const[ie,Re]=ne.split("=");k[decodeURIComponent(ie)]=decodeURIComponent(Re)}}),k}function pr(z){const k=z.indexOf("?");if(!k)return"";const H=z.indexOf("#",k);return z.substring(k,H>0?H:void 0)}function or(z,k){const H=new dn(z,k);return H.subscribe.bind(H)}class dn{constructor(k,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{k(this)}).catch(ne=>{this.error(ne)})}next(k){this.forEachObserver(H=>{H.next(k)})}error(k){this.forEachObserver(H=>{H.error(k)}),this.close(k)}complete(){this.forEachObserver(k=>{k.complete()}),this.close()}subscribe(k,H,ne){let ie;if(void 0===k&&void 0===H&&void 0===ne)throw new Error("Missing Observer.");ie=function So(z,k){if("object"!=typeof z||null===z)return!1;for(const H of k)if(H in z&&"function"==typeof z[H])return!0;return!1}(k,["next","error","complete"])?k:{next:k,error:H,complete:ne},void 0===ie.next&&(ie.next=Ce),void 0===ie.error&&(ie.error=Ce),void 0===ie.complete&&(ie.complete=Ce);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch{}}),this.observers.push(ie),Re}unsubscribeOne(k){void 0===this.observers||void 0===this.observers[k]||(delete this.observers[k],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(k){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,k)}sendOne(k,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[k])try{H(this.observers[k])}catch(ne){typeof console<"u"&&console.error&&console.error(ne)}})}close(k){this.finalized||(this.finalized=!0,void 0!==k&&(this.finalError=k),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ce(){}function Ge(z){return z&&z._delegate?z._delegate:z}},7206:(Rt,Ue,U)=>{var I=U(345),Y=U(9253),oe=U(8515),q=U(7841),fe=U(7705);const le=[{path:"",children:[{path:"",loadChildren:()=>U.e(138).then(U.bind(U,3138)).then(Z=>Z.ParentModule)}]}];let _e=(()=>{class Z{static{this.\u0275fac=function(qe){return new(qe||Z)}}static{this.\u0275mod=fe.$C({type:Z})}static{this.\u0275inj=fe.G2t({imports:[q.iI.forRoot(le),q.iI]})}}return Z})(),je=(()=>{class Z{constructor(){this.title="project-10002"}static{this.\u0275fac=function(qe){return new(qe||Z)}}static{this.\u0275cmp=fe.VBU({type:Z,selectors:[["app-root"]],decls:1,vars:0,template:function(qe,_t){1&qe&&fe.nrm(0,"router-outlet")},dependencies:[q.n3]})}}return Z})();const Se_firebase={apiKey:"AIzaSyAxewJxIFqlKaI5lGvSOnqP8cBHZADh2v4",authDomain:"profilestore-87502.firebaseapp.com",projectId:"profilestore-87502",storageBucket:"profilestore-87502.appspot.com",messagingSenderId:"119648305117",appId:"1:119648305117:web:d3315294cffdaddf474034",measurementId:"G-TPLPTSR76Y"};let J=(()=>{class Z{static{this.\u0275fac=function(qe){return new(qe||Z)}}static{this.\u0275mod=fe.$C({type:Z,bootstrap:[je]})}static{this.\u0275inj=fe.G2t({imports:[I.Bb,_e,Y.bf.initializeApp(Se_firebase),oe.cM]})}}return Z})();I.sG().bootstrapModule(J).catch(Z=>console.error(Z))},4412:(Rt,Ue,U)=>{U.d(Ue,{t:()=>Y});var I=U(1413);class Y extends I.B{constructor(q){super(),this._value=q}get value(){return this.getValue()}_subscribe(q){const fe=super._subscribe(q);return!fe.closed&&q.next(this._value),fe}getValue(){const{hasError:q,thrownError:fe,_value:le}=this;if(q)throw fe;return this._throwIfClosed(),le}next(q){super.next(this._value=q)}}},1985:(Rt,Ue,U)=>{U.d(Ue,{c:()=>je});var I=U(7707),Y=U(8359),oe=U(3494),q=U(1203),fe=U(1026),le=U(8071),_e=U(9786);let je=(()=>{class pe{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const _t=new pe;return _t.source=this,_t.operator=qe,_t}subscribe(qe,_t,it){const yt=function Z(pe){return pe&&pe instanceof I.vU||function J(pe){return pe&&(0,le.T)(pe.next)&&(0,le.T)(pe.error)&&(0,le.T)(pe.complete)}(pe)&&(0,Y.Uv)(pe)}(qe)?qe:new I.Ms(qe,_t,it);return(0,_e.Y)(()=>{const{operator:lt,source:Bt}=this;yt.add(lt?lt.call(yt,Bt):Bt?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(qe){try{return this._subscribe(qe)}catch(_t){qe.error(_t)}}forEach(qe,_t){return new(_t=Se(_t))((it,yt)=>{const lt=new I.Ms({next:Bt=>{try{qe(Bt)}catch(Ft){yt(Ft),lt.unsubscribe()}},error:yt,complete:it});this.subscribe(lt)})}_subscribe(qe){var _t;return null===(_t=this.source)||void 0===_t?void 0:_t.subscribe(qe)}[oe.s](){return this}pipe(...qe){return(0,q.m)(qe)(this)}toPromise(qe){return new(qe=Se(qe))((_t,it)=>{let yt;this.subscribe(lt=>yt=lt,lt=>it(lt),()=>_t(yt))})}}return pe.create=Ke=>new pe(Ke),pe})();function Se(pe){var Ke;return null!==(Ke=pe??fe.$.Promise)&&void 0!==Ke?Ke:Promise}},1413:(Rt,Ue,U)=>{U.d(Ue,{B:()=>_e});var I=U(1985),Y=U(8359);const q=(0,U(1853).L)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=U(7908),le=U(9786);let _e=(()=>{class Se extends I.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const pe=new je(this,this);return pe.operator=Z,pe}_throwIfClosed(){if(this.closed)throw new q}next(Z){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(Z)}})}error(Z){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:pe}=this;for(;pe.length;)pe.shift().error(Z)}})}complete(){(0,le.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:pe,isStopped:Ke,observers:qe}=this;return pe||Ke?Y.Kn:(this.currentObservers=null,qe.push(Z),new Y.yU(()=>{this.currentObservers=null,(0,fe.o)(qe,Z)}))}_checkFinalizedStatuses(Z){const{hasError:pe,thrownError:Ke,isStopped:qe}=this;pe?Z.error(Ke):qe&&Z.complete()}asObservable(){const Z=new I.c;return Z.source=this,Z}}return Se.create=(J,Z)=>new je(J,Z),Se})();class je extends _e{constructor(J,Z){super(),this.destination=J,this.source=Z}next(J){var Z,pe;null===(pe=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===pe||pe.call(Z,J)}error(J){var Z,pe;null===(pe=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===pe||pe.call(Z,J)}complete(){var J,Z;null===(Z=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===Z||Z.call(J)}_subscribe(J){var Z,pe;return null!==(pe=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(J))&&void 0!==pe?pe:Y.Kn}}},7707:(Rt,Ue,U)=>{U.d(Ue,{Ms:()=>it,vU:()=>pe});var I=U(8071),Y=U(8359),oe=U(1026),q=U(5334),fe=U(5343);const le=Se("C",void 0,void 0);function Se(Ae,ze,Te){return{kind:Ae,value:ze,error:Te}}var J=U(9270),Z=U(9786);class pe extends Y.yU{constructor(ze){super(),this.isStopped=!1,ze?(this.destination=ze,(0,Y.Uv)(ze)&&ze.add(this)):this.destination=Ft}static create(ze,Te,et){return new it(ze,Te,et)}next(ze){this.isStopped?Bt(function je(Ae){return Se("N",Ae,void 0)}(ze),this):this._next(ze)}error(ze){this.isStopped?Bt(function _e(Ae){return Se("E",void 0,Ae)}(ze),this):(this.isStopped=!0,this._error(ze))}complete(){this.isStopped?Bt(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ze){this.destination.next(ze)}_error(ze){try{this.destination.error(ze)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function qe(Ae,ze){return Ke.call(Ae,ze)}class _t{constructor(ze){this.partialObserver=ze}next(ze){const{partialObserver:Te}=this;if(Te.next)try{Te.next(ze)}catch(et){yt(et)}}error(ze){const{partialObserver:Te}=this;if(Te.error)try{Te.error(ze)}catch(et){yt(et)}else yt(ze)}complete(){const{partialObserver:ze}=this;if(ze.complete)try{ze.complete()}catch(Te){yt(Te)}}}class it extends pe{constructor(ze,Te,et){let Qe;if(super(),(0,I.T)(ze)||!ze)Qe={next:ze??void 0,error:Te??void 0,complete:et??void 0};else{let ft;this&&oe.$.useDeprecatedNextContext?(ft=Object.create(ze),ft.unsubscribe=()=>this.unsubscribe(),Qe={next:ze.next&&qe(ze.next,ft),error:ze.error&&qe(ze.error,ft),complete:ze.complete&&qe(ze.complete,ft)}):Qe=ze}this.destination=new _t(Qe)}}function yt(Ae){oe.$.useDeprecatedSynchronousErrorHandling?(0,Z.l)(Ae):(0,q.m)(Ae)}function Bt(Ae,ze){const{onStoppedNotification:Te}=oe.$;Te&&J.f.setTimeout(()=>Te(Ae,ze))}const Ft={closed:!0,next:fe.l,error:function lt(Ae){throw Ae},complete:fe.l}},8359:(Rt,Ue,U)=>{U.d(Ue,{Kn:()=>le,yU:()=>fe,Uv:()=>_e});var I=U(8071);const oe=(0,U(1853).L)(Se=>function(Z){Se(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((pe,Ke)=>`${Ke+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var q=U(7908);class fe{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const qe of Z)qe.remove(this);else Z.remove(this);const{initialTeardown:pe}=this;if((0,I.T)(pe))try{pe()}catch(qe){J=qe instanceof oe?qe.errors:[qe]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const qe of Ke)try{je(qe)}catch(_t){J=J??[],_t instanceof oe?J=[...J,..._t.errors]:J.push(_t)}}if(J)throw new oe(J)}}add(J){var Z;if(J&&J!==this)if(this.closed)je(J);else{if(J instanceof fe){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(J)}}_hasParent(J){const{_parentage:Z}=this;return Z===J||Array.isArray(Z)&&Z.includes(J)}_addParent(J){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(J),Z):Z?[Z,J]:J}_removeParent(J){const{_parentage:Z}=this;Z===J?this._parentage=null:Array.isArray(Z)&&(0,q.o)(Z,J)}remove(J){const{_finalizers:Z}=this;Z&&(0,q.o)(Z,J),J instanceof fe&&J._removeParent(this)}}fe.EMPTY=(()=>{const Se=new fe;return Se.closed=!0,Se})();const le=fe.EMPTY;function _e(Se){return Se instanceof fe||Se&&"closed"in Se&&(0,I.T)(Se.remove)&&(0,I.T)(Se.add)&&(0,I.T)(Se.unsubscribe)}function je(Se){(0,I.T)(Se)?Se():Se.unsubscribe()}},1026:(Rt,Ue,U)=>{U.d(Ue,{$:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(Rt,Ue,U)=>{U.d(Ue,{x:()=>fe});var I=U(6365),oe=U(3794),q=U(8455);function fe(...le){return function Y(){return(0,I.U)(1)}()((0,q.H)(le,(0,oe.lI)(le)))}},983:(Rt,Ue,U)=>{U.d(Ue,{w:()=>Y});const Y=new(U(1985).c)(fe=>fe.complete())},8455:(Rt,Ue,U)=>{U.d(Ue,{H:()=>ze});var I=U(8750),Y=U(941),oe=U(6745),le=U(1985),je=U(4761),Se=U(8071),J=U(5225);function pe(Te,et){if(!Te)throw new Error("Iterable cannot be null");return new le.c(Qe=>{(0,J.N)(Qe,et,()=>{const ft=Te[Symbol.asyncIterator]();(0,J.N)(Qe,et,()=>{ft.next().then(xt=>{xt.done?Qe.complete():Qe.next(xt.value)})},0,!0)})})}var Ke=U(5055),qe=U(9858),_t=U(7441),it=U(5397),yt=U(7953),lt=U(591),Bt=U(5196);function ze(Te,et){return et?function Ae(Te,et){if(null!=Te){if((0,Ke.l)(Te))return function q(Te,et){return(0,I.Tg)(Te).pipe((0,oe._)(et),(0,Y.Q)(et))}(Te,et);if((0,_t.X)(Te))return function _e(Te,et){return new le.c(Qe=>{let ft=0;return et.schedule(function(){ft===Te.length?Qe.complete():(Qe.next(Te[ft++]),Qe.closed||this.schedule())})})}(Te,et);if((0,qe.y)(Te))return function fe(Te,et){return(0,I.Tg)(Te).pipe((0,oe._)(et),(0,Y.Q)(et))}(Te,et);if((0,yt.T)(Te))return pe(Te,et);if((0,it.x)(Te))return function Z(Te,et){return new le.c(Qe=>{let ft;return(0,J.N)(Qe,et,()=>{ft=Te[je.l](),(0,J.N)(Qe,et,()=>{let xt,Be;try{({value:xt,done:Be}=ft.next())}catch(Zt){return void Qe.error(Zt)}Be?Qe.complete():Qe.next(xt)},0,!0)}),()=>(0,Se.T)(ft?.return)&&ft.return()})}(Te,et);if((0,Bt.U)(Te))return function Ft(Te,et){return pe((0,Bt.C)(Te),et)}(Te,et)}throw(0,lt.L)(Te)}(Te,et):(0,I.Tg)(Te)}},8750:(Rt,Ue,U)=>{U.d(Ue,{Tg:()=>Ke});var I=U(1635),Y=U(7441),oe=U(9858),q=U(1985),fe=U(5055),le=U(7953),_e=U(591),je=U(5397),Se=U(5196),J=U(8071),Z=U(5334),pe=U(3494);function Ke(Ae){if(Ae instanceof q.c)return Ae;if(null!=Ae){if((0,fe.l)(Ae))return function qe(Ae){return new q.c(ze=>{const Te=Ae[pe.s]();if((0,J.T)(Te.subscribe))return Te.subscribe(ze);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,Y.X)(Ae))return function _t(Ae){return new q.c(ze=>{for(let Te=0;Te<Ae.length&&!ze.closed;Te++)ze.next(Ae[Te]);ze.complete()})}(Ae);if((0,oe.y)(Ae))return function it(Ae){return new q.c(ze=>{Ae.then(Te=>{ze.closed||(ze.next(Te),ze.complete())},Te=>ze.error(Te)).then(null,Z.m)})}(Ae);if((0,le.T)(Ae))return lt(Ae);if((0,je.x)(Ae))return function yt(Ae){return new q.c(ze=>{for(const Te of Ae)if(ze.next(Te),ze.closed)return;ze.complete()})}(Ae);if((0,Se.U)(Ae))return function Bt(Ae){return lt((0,Se.C)(Ae))}(Ae)}throw(0,_e.L)(Ae)}function lt(Ae){return new q.c(ze=>{(function Ft(Ae,ze){var Te,et,Qe,ft;return(0,I.sH)(this,void 0,void 0,function*(){try{for(Te=(0,I.xN)(Ae);!(et=yield Te.next()).done;)if(ze.next(et.value),ze.closed)return}catch(xt){Qe={error:xt}}finally{try{et&&!et.done&&(ft=Te.return)&&(yield ft.call(Te))}finally{if(Qe)throw Qe.error}}ze.complete()})})(Ae,ze).catch(Te=>ze.error(Te))})}},7786:(Rt,Ue,U)=>{U.d(Ue,{h:()=>le});var I=U(6365),Y=U(8750),oe=U(983),q=U(3794),fe=U(8455);function le(..._e){const je=(0,q.lI)(_e),Se=(0,q.R0)(_e,1/0),J=_e;return J.length?1===J.length?(0,Y.Tg)(J[0]):(0,I.U)(Se)((0,fe.H)(J,je)):oe.w}},7673:(Rt,Ue,U)=>{U.d(Ue,{of:()=>oe});var I=U(3794),Y=U(8455);function oe(...q){const fe=(0,I.lI)(q);return(0,Y.H)(q,fe)}},4360:(Rt,Ue,U)=>{U.d(Ue,{_:()=>Y});var I=U(7707);function Y(q,fe,le,_e,je){return new oe(q,fe,le,_e,je)}class oe extends I.vU{constructor(fe,le,_e,je,Se,J){super(fe),this.onFinalize=Se,this.shouldUnsubscribe=J,this._next=le?function(Z){try{le(Z)}catch(pe){fe.error(pe)}}:super._next,this._error=je?function(Z){try{je(Z)}catch(pe){fe.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=_e?function(){try{_e()}catch(Z){fe.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},9901:(Rt,Ue,U)=>{U.d(Ue,{U:()=>oe});var I=U(9974),Y=U(4360);function oe(q){return(0,I.N)((fe,le)=>{let _e=!1;fe.subscribe((0,Y._)(le,je=>{_e=!0,le.next(je)},()=>{_e||le.next(q),le.complete()}))})}},3294:(Rt,Ue,U)=>{U.d(Ue,{F:()=>q});var I=U(3669),Y=U(9974),oe=U(4360);function q(le,_e=I.D){return le=le??fe,(0,Y.N)((je,Se)=>{let J,Z=!0;je.subscribe((0,oe._)(Se,pe=>{const Ke=_e(pe);(Z||!le(J,Ke))&&(Z=!1,J=Ke,Se.next(pe))}))})}function fe(le,_e){return le===_e}},5964:(Rt,Ue,U)=>{U.d(Ue,{p:()=>oe});var I=U(9974),Y=U(4360);function oe(q,fe){return(0,I.N)((le,_e)=>{let je=0;le.subscribe((0,Y._)(_e,Se=>q.call(fe,Se,je++)&&_e.next(Se)))})}},1594:(Rt,Ue,U)=>{U.d(Ue,{$:()=>_e});var I=U(9350),Y=U(5964),oe=U(6697),q=U(9901),fe=U(3774),le=U(3669);function _e(je,Se){const J=arguments.length>=2;return Z=>Z.pipe(je?(0,Y.p)((pe,Ke)=>je(pe,Ke,Z)):le.D,(0,oe.s)(1),J?(0,q.U)(Se):(0,fe.v)(()=>new I.G))}},6354:(Rt,Ue,U)=>{U.d(Ue,{T:()=>oe});var I=U(9974),Y=U(4360);function oe(q,fe){return(0,I.N)((le,_e)=>{let je=0;le.subscribe((0,Y._)(_e,Se=>{_e.next(q.call(fe,Se,je++))}))})}},6365:(Rt,Ue,U)=>{U.d(Ue,{U:()=>oe});var I=U(1397),Y=U(3669);function oe(q=1/0){return(0,I.Z)(Y.D,q)}},1397:(Rt,Ue,U)=>{U.d(Ue,{Z:()=>je});var I=U(6354),Y=U(8750),oe=U(9974),q=U(5225),fe=U(4360),_e=U(8071);function je(Se,J,Z=1/0){return(0,_e.T)(J)?je((pe,Ke)=>(0,I.T)((qe,_t)=>J(pe,qe,Ke,_t))((0,Y.Tg)(Se(pe,Ke))),Z):("number"==typeof J&&(Z=J),(0,oe.N)((pe,Ke)=>function le(Se,J,Z,pe,Ke,qe,_t,it){const yt=[];let lt=0,Bt=0,Ft=!1;const Ae=()=>{Ft&&!yt.length&&!lt&&J.complete()},ze=et=>lt<pe?Te(et):yt.push(et),Te=et=>{qe&&J.next(et),lt++;let Qe=!1;(0,Y.Tg)(Z(et,Bt++)).subscribe((0,fe._)(J,ft=>{Ke?.(ft),qe?ze(ft):J.next(ft)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(lt--;yt.length&&lt<pe;){const ft=yt.shift();_t?(0,q.N)(J,_t,()=>Te(ft)):Te(ft)}Ae()}catch(ft){J.error(ft)}}))};return Se.subscribe((0,fe._)(J,ze,()=>{Ft=!0,Ae()})),()=>{it?.()}}(pe,Ke,Se,Z)))}},941:(Rt,Ue,U)=>{U.d(Ue,{Q:()=>q});var I=U(5225),Y=U(9974),oe=U(4360);function q(fe,le=0){return(0,Y.N)((_e,je)=>{_e.subscribe((0,oe._)(je,Se=>(0,I.N)(je,fe,()=>je.next(Se),le),()=>(0,I.N)(je,fe,()=>je.complete(),le),Se=>(0,I.N)(je,fe,()=>je.error(Se),le)))})}},2816:(Rt,Ue,U)=>{U.d(Ue,{S:()=>q});var I=U(9974),Y=U(4360);function q(fe,le){return(0,I.N)(function oe(fe,le,_e,je,Se){return(J,Z)=>{let pe=_e,Ke=le,qe=0;J.subscribe((0,Y._)(Z,_t=>{const it=qe++;Ke=pe?fe(Ke,_t,it):(pe=!0,_t),je&&Z.next(Ke)},Se&&(()=>{pe&&Z.next(Ke),Z.complete()})))}}(fe,le,arguments.length>=2,!0))}},7647:(Rt,Ue,U)=>{U.d(Ue,{u:()=>fe});var I=U(8750),Y=U(1413),oe=U(7707),q=U(9974);function fe(_e={}){const{connector:je=(()=>new Y.B),resetOnError:Se=!0,resetOnComplete:J=!0,resetOnRefCountZero:Z=!0}=_e;return pe=>{let Ke,qe,_t,it=0,yt=!1,lt=!1;const Bt=()=>{qe?.unsubscribe(),qe=void 0},Ft=()=>{Bt(),Ke=_t=void 0,yt=lt=!1},Ae=()=>{const ze=Ke;Ft(),ze?.unsubscribe()};return(0,q.N)((ze,Te)=>{it++,!lt&&!yt&&Bt();const et=_t=_t??je();Te.add(()=>{it--,0===it&&!lt&&!yt&&(qe=le(Ae,Z))}),et.subscribe(Te),!Ke&&it>0&&(Ke=new oe.Ms({next:Qe=>et.next(Qe),error:Qe=>{lt=!0,Bt(),qe=le(Ft,Se,Qe),et.error(Qe)},complete:()=>{yt=!0,Bt(),qe=le(Ft,J),et.complete()}}),(0,I.Tg)(ze).subscribe(Ke))})(pe)}}function le(_e,je,...Se){if(!0===je)return void _e();if(!1===je)return;const J=new oe.Ms({next:()=>{J.unsubscribe(),_e()}});return(0,I.Tg)(je(...Se)).subscribe(J)}},9172:(Rt,Ue,U)=>{U.d(Ue,{Z:()=>q});var I=U(8793),Y=U(3794),oe=U(9974);function q(...fe){const le=(0,Y.lI)(fe);return(0,oe.N)((_e,je)=>{(le?(0,I.x)(fe,_e,le):(0,I.x)(fe,_e)).subscribe(je)})}},6745:(Rt,Ue,U)=>{U.d(Ue,{_:()=>Y});var I=U(9974);function Y(oe,q=0){return(0,I.N)((fe,le)=>{le.add(oe.schedule(()=>fe.subscribe(le),q))})}},5558:(Rt,Ue,U)=>{U.d(Ue,{n:()=>q});var I=U(8750),Y=U(9974),oe=U(4360);function q(fe,le){return(0,Y.N)((_e,je)=>{let Se=null,J=0,Z=!1;const pe=()=>Z&&!Se&&je.complete();_e.subscribe((0,oe._)(je,Ke=>{Se?.unsubscribe();let qe=0;const _t=J++;(0,I.Tg)(fe(Ke,_t)).subscribe(Se=(0,oe._)(je,it=>je.next(le?le(Ke,it,_t,qe++):it),()=>{Se=null,pe()}))},()=>{Z=!0,pe()}))})}},6697:(Rt,Ue,U)=>{U.d(Ue,{s:()=>q});var I=U(983),Y=U(9974),oe=U(4360);function q(fe){return fe<=0?()=>I.w:(0,Y.N)((le,_e)=>{let je=0;le.subscribe((0,oe._)(_e,Se=>{++je<=fe&&(_e.next(Se),fe<=je&&_e.complete())}))})}},8141:(Rt,Ue,U)=>{U.d(Ue,{M:()=>fe});var I=U(8071),Y=U(9974),oe=U(4360),q=U(3669);function fe(le,_e,je){const Se=(0,I.T)(le)||_e||je?{next:le,error:_e,complete:je}:le;return Se?(0,Y.N)((J,Z)=>{var pe;null===(pe=Se.subscribe)||void 0===pe||pe.call(Se);let Ke=!0;J.subscribe((0,oe._)(Z,qe=>{var _t;null===(_t=Se.next)||void 0===_t||_t.call(Se,qe),Z.next(qe)},()=>{var qe;Ke=!1,null===(qe=Se.complete)||void 0===qe||qe.call(Se),Z.complete()},qe=>{var _t;Ke=!1,null===(_t=Se.error)||void 0===_t||_t.call(Se,qe),Z.error(qe)},()=>{var qe,_t;Ke&&(null===(qe=Se.unsubscribe)||void 0===qe||qe.call(Se)),null===(_t=Se.finalize)||void 0===_t||_t.call(Se)}))}):q.D}},3774:(Rt,Ue,U)=>{U.d(Ue,{v:()=>q});var I=U(9350),Y=U(9974),oe=U(4360);function q(le=fe){return(0,Y.N)((_e,je)=>{let Se=!1;_e.subscribe((0,oe._)(je,J=>{Se=!0,je.next(J)},()=>Se?je.complete():je.error(le())))})}function fe(){return new I.G}},6780:(Rt,Ue,U)=>{U.d(Ue,{R:()=>fe});var I=U(8359);class Y extends I.yU{constructor(_e,je){super()}schedule(_e,je=0){return this}}const oe={setInterval(le,_e,...je){const{delegate:Se}=oe;return Se?.setInterval?Se.setInterval(le,_e,...je):setInterval(le,_e,...je)},clearInterval(le){const{delegate:_e}=oe;return(_e?.clearInterval||clearInterval)(le)},delegate:void 0};var q=U(7908);class fe extends Y{constructor(_e,je){super(_e,je),this.scheduler=_e,this.work=je,this.pending=!1}schedule(_e,je=0){var Se;if(this.closed)return this;this.state=_e;const J=this.id,Z=this.scheduler;return null!=J&&(this.id=this.recycleAsyncId(Z,J,je)),this.pending=!0,this.delay=je,this.id=null!==(Se=this.id)&&void 0!==Se?Se:this.requestAsyncId(Z,this.id,je),this}requestAsyncId(_e,je,Se=0){return oe.setInterval(_e.flush.bind(_e,this),Se)}recycleAsyncId(_e,je,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return je;null!=je&&oe.clearInterval(je)}execute(_e,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(_e,je);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_e,je){let J,Se=!1;try{this.work(_e)}catch(Z){Se=!0,J=Z||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),J}unsubscribe(){if(!this.closed){const{id:_e,scheduler:je}=this,{actions:Se}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,q.o)(Se,this),null!=_e&&(this.id=this.recycleAsyncId(je,_e,null)),this.delay=null,super.unsubscribe()}}}},9687:(Rt,Ue,U)=>{U.d(Ue,{q:()=>oe});var I=U(6129);class Y{constructor(fe,le=Y.now){this.schedulerActionCtor=fe,this.now=le}schedule(fe,le=0,_e){return new this.schedulerActionCtor(this,fe).schedule(_e,le)}}Y.now=I.U.now;class oe extends Y{constructor(fe,le=Y.now){super(fe,le),this.actions=[],this._active=!1}flush(fe){const{actions:le}=this;if(this._active)return void le.push(fe);let _e;this._active=!0;do{if(_e=fe.execute(fe.state,fe.delay))break}while(fe=le.shift());if(this._active=!1,_e){for(;fe=le.shift();)fe.unsubscribe();throw _e}}}},3236:(Rt,Ue,U)=>{U.d(Ue,{E:()=>oe});var I=U(6780);const oe=new(U(9687).q)(I.R)},6129:(Rt,Ue,U)=>{U.d(Ue,{U:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},9270:(Rt,Ue,U)=>{U.d(Ue,{f:()=>I});const I={setTimeout(Y,oe,...q){const{delegate:fe}=I;return fe?.setTimeout?fe.setTimeout(Y,oe,...q):setTimeout(Y,oe,...q)},clearTimeout(Y){const{delegate:oe}=I;return(oe?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4761:(Rt,Ue,U)=>{U.d(Ue,{l:()=>Y});const Y=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Rt,Ue,U)=>{U.d(Ue,{s:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Rt,Ue,U)=>{U.d(Ue,{G:()=>Y});const Y=(0,U(1853).L)(oe=>function(){oe(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(Rt,Ue,U)=>{U.d(Ue,{R0:()=>le,ms:()=>q,lI:()=>fe});var I=U(8071);function oe(_e){return _e[_e.length-1]}function q(_e){return(0,I.T)(oe(_e))?_e.pop():void 0}function fe(_e){return function Y(_e){return _e&&(0,I.T)(_e.schedule)}(oe(_e))?_e.pop():void 0}function le(_e,je){return"number"==typeof oe(_e)?_e.pop():je}},3073:(Rt,Ue,U)=>{U.d(Ue,{D:()=>fe});const{isArray:I}=Array,{getPrototypeOf:Y,prototype:oe,keys:q}=Object;function fe(_e){if(1===_e.length){const je=_e[0];if(I(je))return{args:je,keys:null};if(function le(_e){return _e&&"object"==typeof _e&&Y(_e)===oe}(je)){const Se=q(je);return{args:Se.map(J=>je[J]),keys:Se}}}return{args:_e,keys:null}}},7908:(Rt,Ue,U)=>{function I(Y,oe){if(Y){const q=Y.indexOf(oe);0<=q&&Y.splice(q,1)}}U.d(Ue,{o:()=>I})},1853:(Rt,Ue,U)=>{function I(Y){const q=Y(fe=>{Error.call(fe),fe.stack=(new Error).stack});return q.prototype=Object.create(Error.prototype),q.prototype.constructor=q,q}U.d(Ue,{L:()=>I})},8496:(Rt,Ue,U)=>{function I(Y,oe){return Y.reduce((q,fe,le)=>(q[fe]=oe[le],q),{})}U.d(Ue,{e:()=>I})},9786:(Rt,Ue,U)=>{U.d(Ue,{Y:()=>oe,l:()=>q});var I=U(1026);let Y=null;function oe(fe){if(I.$.useDeprecatedSynchronousErrorHandling){const le=!Y;if(le&&(Y={errorThrown:!1,error:null}),fe(),le){const{errorThrown:_e,error:je}=Y;if(Y=null,_e)throw je}}else fe()}function q(fe){I.$.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=fe)}},5225:(Rt,Ue,U)=>{function I(Y,oe,q,fe=0,le=!1){const _e=oe.schedule(function(){q(),le?Y.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(Y.add(_e),!le)return _e}U.d(Ue,{N:()=>I})},3669:(Rt,Ue,U)=>{function I(Y){return Y}U.d(Ue,{D:()=>I})},7441:(Rt,Ue,U)=>{U.d(Ue,{X:()=>I});const I=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},7953:(Rt,Ue,U)=>{U.d(Ue,{T:()=>Y});var I=U(8071);function Y(oe){return Symbol.asyncIterator&&(0,I.T)(oe?.[Symbol.asyncIterator])}},8071:(Rt,Ue,U)=>{function I(Y){return"function"==typeof Y}U.d(Ue,{T:()=>I})},5055:(Rt,Ue,U)=>{U.d(Ue,{l:()=>oe});var I=U(3494),Y=U(8071);function oe(q){return(0,Y.T)(q[I.s])}},5397:(Rt,Ue,U)=>{U.d(Ue,{x:()=>oe});var I=U(4761),Y=U(8071);function oe(q){return(0,Y.T)(q?.[I.l])}},9858:(Rt,Ue,U)=>{U.d(Ue,{y:()=>Y});var I=U(8071);function Y(oe){return(0,I.T)(oe?.then)}},5196:(Rt,Ue,U)=>{U.d(Ue,{C:()=>oe,U:()=>q});var I=U(1635),Y=U(8071);function oe(fe){return(0,I.AQ)(this,arguments,function*(){const _e=fe.getReader();try{for(;;){const{value:je,done:Se}=yield(0,I.N3)(_e.read());if(Se)return yield(0,I.N3)(void 0);yield yield(0,I.N3)(je)}}finally{_e.releaseLock()}})}function q(fe){return(0,Y.T)(fe?.getReader)}},9974:(Rt,Ue,U)=>{U.d(Ue,{N:()=>oe,S:()=>Y});var I=U(8071);function Y(q){return(0,I.T)(q?.lift)}function oe(q){return fe=>{if(Y(fe))return fe.lift(function(le){try{return q(le,this)}catch(_e){this.error(_e)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Rt,Ue,U)=>{U.d(Ue,{I:()=>q});var I=U(6354);const{isArray:Y}=Array;function q(fe){return(0,I.T)(le=>function oe(fe,le){return Y(le)?fe(...le):fe(le)}(fe,le))}},5343:(Rt,Ue,U)=>{function I(){}U.d(Ue,{l:()=>I})},1203:(Rt,Ue,U)=>{U.d(Ue,{F:()=>Y,m:()=>oe});var I=U(3669);function Y(...q){return oe(q)}function oe(q){return 0===q.length?I.D:1===q.length?q[0]:function(le){return q.reduce((_e,je)=>je(_e),le)}}},5334:(Rt,Ue,U)=>{U.d(Ue,{m:()=>oe});var I=U(1026),Y=U(9270);function oe(q){Y.f.setTimeout(()=>{const{onUnhandledError:fe}=I.$;if(!fe)throw q;fe(q)})}},591:(Rt,Ue,U)=>{function I(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ue,{L:()=>I})},177:(Rt,Ue,U)=>{U.d(Ue,{AJ:()=>tr,MD:()=>Os,N0:()=>Di,QT:()=>oe,Sm:()=>_t,Sq:()=>vn,VF:()=>fe,Vy:()=>ks,Xr:()=>sn,ZD:()=>q,_b:()=>ht,aZ:()=>yt,fw:()=>it,hb:()=>Ke,hj:()=>je,qQ:()=>le});var I=U(7705);let Y=null;function oe(){return Y}function q(A){Y||(Y=A)}class fe{}const le=new I.nKC("DocumentToken");let _e=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(V){return new(V||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(Se)},providedIn:"platform"})}}return A})();const je=new I.nKC("Location Initialized");let Se=(()=>{class A extends _e{constructor(){super(),this._doc=(0,I.WQX)(le),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(P){const V=oe().getGlobalEventTarget(this._doc,"window");return V.addEventListener("popstate",P,!1),()=>V.removeEventListener("popstate",P)}onHashChange(P){const V=oe().getGlobalEventTarget(this._doc,"window");return V.addEventListener("hashchange",P,!1),()=>V.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,V,ee){this._history.pushState(P,V,ee)}replaceState(P,V,ee){this._history.replaceState(P,V,ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static{this.\u0275fac=function(V){return new(V||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return new A},providedIn:"platform"})}}return A})();function J(A,F){if(0==A.length)return F;if(0==F.length)return A;let P=0;return A.endsWith("/")&&P++,F.startsWith("/")&&P++,2==P?A+F.substring(1):1==P?A+F:A+"/"+F}function Z(A){const F=A.match(/#|\?|$/),P=F&&F.index||A.length;return A.slice(0,P-("/"===A[P-1]?1:0))+A.slice(P)}function pe(A){return A&&"?"!==A[0]?"?"+A:A}let Ke=(()=>{class A{historyGo(P){throw new Error("Not implemented")}static{this.\u0275fac=function(V){return new(V||A)}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return(0,I.WQX)(_t)},providedIn:"root"})}}return A})();const qe=new I.nKC("appBaseHref");let _t=(()=>{class A extends Ke{constructor(P,V){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=V??this._platformLocation.getBaseHrefFromDOM()??(0,I.WQX)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return J(this._baseHref,P)}path(P=!1){const V=this._platformLocation.pathname+pe(this._platformLocation.search),ee=this._platformLocation.hash;return ee&&P?`${V}${ee}`:V}pushState(P,V,ee,Oe){const nt=this.prepareExternalUrl(ee+pe(Oe));this._platformLocation.pushState(P,V,nt)}replaceState(P,V,ee,Oe){const nt=this.prepareExternalUrl(ee+pe(Oe));this._platformLocation.replaceState(P,V,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(V){return new(V||A)(I.KVO(_e),I.KVO(qe,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac,providedIn:"root"})}}return A})(),it=(()=>{class A extends Ke{constructor(P,V){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=V&&(this._baseHref=V)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let V=this._platformLocation.hash;return null==V&&(V="#"),V.length>0?V.substring(1):V}prepareExternalUrl(P){const V=J(this._baseHref,P);return V.length>0?"#"+V:V}pushState(P,V,ee,Oe){let nt=this.prepareExternalUrl(ee+pe(Oe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(P,V,nt)}replaceState(P,V,ee,Oe){let nt=this.prepareExternalUrl(ee+pe(Oe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(P,V,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static{this.\u0275fac=function(V){return new(V||A)(I.KVO(_e),I.KVO(qe,8))}}static{this.\u0275prov=I.jDH({token:A,factory:A.\u0275fac})}}return A})(),yt=(()=>{class A{constructor(P){this._subject=new I.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const V=this._locationStrategy.getBaseHref();this._basePath=function Ae(A){if(new RegExp("^(https?:)?//").test(A)){const[,P]=A.split(/\/\/[^\/]+/);return P}return A}(Z(Ft(V))),this._locationStrategy.onPopState(ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:ee.state,type:ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,V=""){return this.path()==this.normalize(P+pe(V))}normalize(P){return A.stripTrailingSlash(function Bt(A,F){if(!A||!F.startsWith(A))return F;const P=F.substring(A.length);return""===P||["/",";","?","#"].includes(P[0])?P:F}(this._basePath,Ft(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,V="",ee=null){this._locationStrategy.pushState(ee,"",P,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pe(V)),ee)}replaceState(P,V="",ee=null){this._locationStrategy.replaceState(ee,"",P,V),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pe(V)),ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(V=>{this._notifyUrlChangeListeners(V.url,V.state)})),()=>{const V=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(V,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",V){this._urlChangeListeners.forEach(ee=>ee(P,V))}subscribe(P,V,ee){return this._subject.subscribe({next:P,error:V,complete:ee})}static{this.normalizeQueryParams=pe}static{this.joinWithSlash=J}static{this.stripTrailingSlash=Z}static{this.\u0275fac=function(V){return new(V||A)(I.KVO(Ke))}}static{this.\u0275prov=I.jDH({token:A,factory:function(){return function lt(){return new yt((0,I.KVO)(Ke))}()},providedIn:"root"})}}return A})();function Ft(A){return A.replace(/\/index.html$/,"")}function ht(A,F){F=encodeURIComponent(F);for(const P of A.split(";")){const V=P.indexOf("="),[ee,Oe]=-1==V?[P,""]:[P.slice(0,V),P.slice(V+1)];if(ee.trim()===F)return decodeURIComponent(Oe)}return null}class me{constructor(F,P,V,ee){this.$implicit=F,this.ngForOf=P,this.index=V,this.count=ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class A{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,V,ee){this._viewContainer=P,this._template=V,this._differs=ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const V=this._viewContainer;P.forEachOperation((ee,Oe,nt)=>{if(null==ee.previousIndex)V.createEmbeddedView(this._template,new me(ee.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)V.remove(null===Oe?void 0:Oe);else if(null!==Oe){const bt=V.get(Oe);V.move(bt,nt),Xr(bt,ee)}});for(let ee=0,Oe=V.length;ee<Oe;ee++){const bt=V.get(ee).context;bt.index=ee,bt.count=Oe,bt.ngForOf=this._ngForOf}P.forEachIdentityChange(ee=>{Xr(V.get(ee.currentIndex),ee)})}static ngTemplateContextGuard(P,V){return!0}static{this.\u0275fac=function(V){return new(V||A)(I.rXU(I.c1b),I.rXU(I.C4Q),I.rXU(I._q3))}}static{this.\u0275dir=I.FsC({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return A})();function Xr(A,F){A.context.$implicit=F.item}let Os=(()=>{class A{static{this.\u0275fac=function(V){return new(V||A)}}static{this.\u0275mod=I.$C({type:A})}static{this.\u0275inj=I.G2t({})}}return A})();const tr="browser",sr="server";function ks(A){return A===sr}let sn=(()=>{class A{static{this.\u0275prov=(0,I.jDH)({token:A,providedIn:"root",factory:()=>new xi((0,I.KVO)(le),window)})}}return A})();class xi{constructor(F,P){this.document=F,this.window=P,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const P=function Ai(A,F){const P=A.getElementById(F)||A.getElementsByName(F)[0];if(P)return P;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const V=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let ee=V.currentNode;for(;ee;){const Oe=ee.shadowRoot;if(Oe){const nt=Oe.getElementById(F)||Oe.querySelector(`[name="${F}"]`);if(nt)return nt}ee=V.nextNode()}}return null}(this.document,F);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(F){this.supportsScrolling()&&(this.window.history.scrollRestoration=F)}scrollToElement(F){const P=F.getBoundingClientRect(),V=P.left+this.window.pageXOffset,ee=P.top+this.window.pageYOffset,Oe=this.offset();this.window.scrollTo(V-Oe[0],ee-Oe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Di{}},7705:(Rt,Ue,U)=>{U.d(Ue,{$C:()=>oa,$GK:()=>qt,$K3:()=>RT,AVh:()=>gf,Agw:()=>Jg,BIS:()=>k_,BMQ:()=>Ve,C4Q:()=>o_,Co$:()=>x0,DNE:()=>uf,EFF:()=>ng,EJ8:()=>aa,FsC:()=>xs,G2t:()=>gn,GFd:()=>dt,H3F:()=>bT,H5H:()=>BI,H8p:()=>_d,HJs:()=>WC,Hbi:()=>xC,JRh:()=>ig,JZv:()=>dn,Jv_:()=>N0,KH2:()=>ag,KVO:()=>ct,L39:()=>zC,LfX:()=>Dn,MKu:()=>IE,NEm:()=>cC,NYb:()=>sC,Njj:()=>ya,O8t:()=>Oe,OA$:()=>_n,Ocv:()=>OD,Ol2:()=>k0,PLl:()=>O_,QTQ:()=>Rp,Ql9:()=>VD,QuC:()=>to,R7$:()=>hm,RV6:()=>xm,Rfq:()=>_t,RxE:()=>tm,SKi:()=>ri,TL$:()=>f_,Tbb:()=>pe,VBU:()=>Ha,Vns:()=>Ef,Vt3:()=>a,WHO:()=>xT,WQX:()=>vt,XpG:()=>km,Xx1:()=>Xu,Y8G:()=>Dl,Z63:()=>Na,_9s:()=>Hh,_q3:()=>vE,aKT:()=>Yo,aNF:()=>L0,bIt:()=>Gp,bkB:()=>Jo,c1b:()=>yv,czy:()=>fu,e01:()=>OT,eBV:()=>Uo,fpN:()=>NC,gRc:()=>yC,gXe:()=>Hr,giA:()=>kT,hnV:()=>ST,iLQ:()=>fE,j41:()=>Cu,jDH:()=>tn,jNT:()=>Om,k0s:()=>jp,kS0:()=>jl,kdw:()=>Hc,lsd:()=>aT,mGM:()=>sT,mq5:()=>r0,n$t:()=>ap,nKC:()=>Ce,naY:()=>_C,nrm:()=>Rm,o8S:()=>dg,oH4:()=>UT,plB:()=>rE,rXU:()=>Zo,sFG:()=>Zv,sZ2:()=>x_,uvJ:()=>vo,w6W:()=>gA,wOt:()=>Ae,wni:()=>oT,xGo:()=>go,xe9:()=>Iv,xvI:()=>zh,zZn:()=>Eo,zcH:()=>Xo,zjR:()=>df});var I=U(1413),Y=U(8359),oe=U(1985),q=U(7786),fe=U(4412),le=U(7673),_e=U(7647),je=U(5558),Se=U(3294);function J(t){for(let n in t)if(t[n]===J)return n;throw Error("Could not find renamed property on target object.")}function Z(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function pe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(pe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Ke(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const qe=J({__forward_ref__:J});function _t(t){return t.__forward_ref__=_t,t.toString=function(){return pe(this())},t}function it(t){return yt(t)?t():t}function yt(t){return"function"==typeof t&&t.hasOwnProperty(qe)&&t.__forward_ref__===_t}function lt(t){return t&&!!t.\u0275providers}const Ft="https://g.co/ng/security#xss";class Ae extends Error{constructor(n,i){super(function ze(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function Be(t,n){throw new Ae(-201,!1)}function ae(t,n){null==t&&function mt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function tn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function ir(t){return Nt(t,Nr)||Nt(t,Vr)}function Dn(t){return null!==ir(t)}function Nt(t,n){return t.hasOwnProperty(n)?t[n]:null}function ss(t){return t&&(t.hasOwnProperty(Ei)||t.hasOwnProperty(Zn))?t[Ei]:null}const Nr=J({\u0275prov:J}),Ei=J({\u0275inj:J}),Vr=J({ngInjectableDef:J}),Zn=J({ngInjectorDef:J});var qt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qt||{});let hn;function pr(t){const n=hn;return hn=t,n}function Sn(t,n,i){const o=ir(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&qt.Optional?null:void 0!==n?n:void Be(pe(t))}const dn=globalThis;class Ce{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=tn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const si={},Ti="__NG_DI_FLAG__",$i="ngTempTokenPath",Ge=/\n/gm,k="__source";let H;function ie(t){const n=H;return H=t,n}function Re(t,n=qt.Default){if(void 0===H)throw new Ae(-203,!1);return null===H?Sn(t,void 0,n):H.get(t,n&qt.Optional?null:void 0,n)}function ct(t,n=qt.Default){return(function Kt(){return hn}()||Re)(it(t),n)}function vt(t,n=qt.Default){return ct(t,pt(n))}function pt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Un(t){const n=[];for(let i=0;i<t.length;i++){const o=it(t[i]);if(Array.isArray(o)){if(0===o.length)throw new Ae(900,!1);let c,f=qt.Default;for(let _=0;_<o.length;_++){const T=o[_],C=oi(T);"number"==typeof C?-1===C?c=T.token:f|=C:c=T}n.push(ct(c,f))}else n.push(ct(o))}return n}function wt(t,n){return t[Ti]=n,t.prototype[Ti]=n,t}function oi(t){return t[Ti]}function Cr(t){return{toString:t}.toString()}var ui=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ui||{}),Hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Hr||{});const xr={},rn=[],as=J({\u0275cmp:J}),Le=J({\u0275dir:J}),Ie=J({\u0275pipe:J}),We=J({\u0275mod:J}),ht=J({\u0275fac:J}),$t=J({__NG_ELEMENT_ID__:J}),nn=J({__NG_ENV_ID__:J});function fn(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}function Cn(t,n,i){let o=0;for(;o<i.length;){const c=i[o];if("number"==typeof c){if(0!==c)break;o++;const f=i[o++],_=i[o++],T=i[o++];t.setAttribute(n,_,T,f)}else{const f=c,_=i[++o];me(f)?t.setProperty(n,f,_):t.setAttribute(n,f,_),o++}}return o}function er(t){return 3===t||4===t||6===t}function me(t){return 64===t.charCodeAt(0)}function vn(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||Xr(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function Xr(t,n,i,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const T=t[f++];if("number"==typeof T){if(T===n){_=-1;break}if(T>n){_=f-1;break}}}for(;f<t.length;){const T=t[f];if("number"==typeof T)break;if(T===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}const zi="ng-template";function yc(t,n,i){let o=0,c=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&c){const _=t[o++];if(i&&"class"===f&&-1!==fn(_.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function Gi(t){return 4===t.type&&t.value!==zi}function us(t,n,i){return n===(4!==t.type||i?t.value:zi)}function ia(t,n,i){let o=4;const c=t.attrs||[],f=function Wi(t){for(let n=0;n<t.length;n++)if(er(t[n]))return n;return t.length}(c);let _=!1;for(let T=0;T<n.length;T++){const C=n[T];if("number"!=typeof C){if(!_)if(4&o){if(o=2|1&o,""!==C&&!us(t,C,i)||""===C&&1===n.length){if(Sr(o))return!1;_=!0}}else{const x=8&o?C:n[++T];if(8&o&&null!==t.attrs){if(!yc(t.attrs,x,i)){if(Sr(o))return!1;_=!0}continue}const Q=Ns(8&o?"class":C,c,Gi(t),i);if(-1===Q){if(Sr(o))return!1;_=!0;continue}if(""!==x){let he;he=Q>f?"":c[Q+1].toLowerCase();const De=8&o?he:null;if(De&&-1!==fn(De,x,0)||2&o&&x!==he){if(Sr(o))return!1;_=!0}}}}else{if(!_&&!Sr(o)&&!Sr(C))return!1;if(_&&Sr(C))continue;_=!1,o=C|1&o}}return Sr(o)||_}function Sr(t){return 0==(1&t)}function Ns(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let T=n[++c];for(;"string"==typeof T;)T=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function zr(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function _i(t,n,i=!1){for(let o=0;o<n.length;o++)if(ia(t,n[o],i))return!0;return!1}function wi(t,n){return t?":not("+n.trim()+")":n}function sa(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const T=t[++i];c+="["+_+(T.length>0?'="'+T+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!Sr(_)&&(n+=wi(f,c),c=""),o=_,f=f||!Sr(o);i++}return""!==c&&(n+=wi(f,c)),n}function Ha(t){return Cr(()=>{const n=Ga(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ui.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Hr.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""};no(i);const o=t.dependencies;return i.directiveDefs=ro(o,!1),i.pipeDefs=ro(o,!0),i.id=function qi(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function za(t){return wn(t)||Or(t)}function bo(t){return null!==t}function oa(t){return Cr(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Mu(t,n){if(null==t)return xr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}function xs(t){return Cr(()=>{const n=Ga(t);return no(n),n})}function aa(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function wn(t){return t[as]||null}function Or(t){return t[Le]||null}function Jr(t){return t[Ie]||null}function to(t){const n=wn(t)||Or(t)||Jr(t);return null!==n&&n.standalone}function kr(t,n){const i=t[We]||null;if(!i&&!0===n)throw new Error(`Type ${pe(t)} does not have '\u0275mod' property.`);return i}function Ga(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Mu(t.inputs,n),outputs:Mu(t.outputs)}}function no(t){t.features?.forEach(n=>n(t))}function ro(t,n){if(!t)return null;const i=n?Jr:za;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(bo)}const dr=0,At=1,cn=2,Bn=3,Gr=4,io=5,br=6,Os=7,tr=8,sr=9,Ni=10,Gt=11,cs=12,ks=13,mn=14,ur=15,Rr=16,sn=17,xi=18,Ai=19,Zr=20,Di=21,ls=22,qn=23,Ro=24,on=25,ei=1,Ls=2,Ci=7,Po=9,Gn=11;function nr(t){return Array.isArray(t)&&"object"==typeof t[ei]}function bn(t){return Array.isArray(t)&&!0===t[ei]}function Is(t){return 0!=(4&t.flags)}function Fr(t){return t.componentOffset>-1}function Wa(t){return 1==(1&t.flags)}function Wr(t){return!!t.template}function Es(t){return 0!=(512&t[cn])}function vi(t,n){return t.hasOwnProperty(ht)?t[ht]:null}let an=null,Xi=!1;function qr(t){const n=an;return an=t,n}const Qa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ws(t){if(!js(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Tc(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ji(t){t.dirty=!0,function hs(t){if(void 0===t.liveConsumerNode)return;const n=Xi;Xi=!0;try{for(const i of t.liveConsumerNode)i.dirty||Ji(i)}finally{Xi=n}}(t),t.consumerMarkedDirty?.(t)}function xo(t){return t&&(t.nextProducerIndex=0),qr(t)}function la(t,n){if(qr(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(js(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)uo(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Tc(t){As(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(ws(i),o!==i.version))return!0}return!1}function da(t){if(As(t),js(t))for(let n=0;n<t.producerNode.length;n++)uo(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function uo(t,n){if(function Xa(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),As(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)uo(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],c=t.liveConsumerNode[n];As(c),c.producerIndexOfThis[o]=n}}function js(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function As(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let xu=null;function Oe(t){const n=qr(null);try{return t()}finally{qr(n)}}const bt=()=>{},Ln=(()=>({...Qa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:bt}))();class Vn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function _n(){return Kn}function Kn(t){return t.type.prototype.ngOnChanges&&(t.setInput=Nn),Xn}function Xn(){const t=ni(this),n=t?.current;if(n){const i=t.previous;if(i===xr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Nn(t,n,i,o){const c=this.declaredInputs[i],f=ni(t)||function Hs(t,n){return t[ti]=n}(t,{previous:xr,current:null}),_=f.current||(f.current={}),T=f.previous,C=T[c];_[c]=new Vn(C&&C.currentValue,n,T===xr),t[o]=n}_n.ngInherit=!0;const ti="__ngSimpleChanges__";function ni(t){return t[ti]||null}const Pr=function(t,n,i){};function Lt(t){for(;Array.isArray(t);)t=t[dr];return t}function zs(t,n){return Lt(n[t])}function ci(t,n){return Lt(n[t.index])}function Ol(t,n){return t.data[n]}function wr(t,n){const i=n[t];return nr(i)?i:i[dr]}function li(t,n){return null==n?null:t[n]}function Gs(t){t[sn]=0}function Ss(t){1024&t[cn]||(t[cn]|=1024,ga(t,1))}function Ll(t){1024&t[cn]&&(t[cn]&=-1025,ga(t,-1))}function ga(t,n){let i=t[Bn];if(null===i)return;i[io]+=n;let o=i;for(i=i[Bn];null!==i&&(1===n&&1===o[io]||-1===n&&0===o[io]);)i[io]+=n,o=i,i=i[Bn]}const Qt={lFrame:G(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Sc(){return Qt.bindingsEnabled}function ot(){return Qt.lFrame.lView}function xn(){return Qt.lFrame.tView}function Uo(t){return Qt.lFrame.contextLView=t,t[tr]}function ya(t){return Qt.lFrame.contextLView=null,t}function Pn(){let t=bc();for(;null!==t&&64===t.type;)t=t.parent;return t}function bc(){return Qt.lFrame.currentTNode}function fs(t,n){const i=Qt.lFrame;i.currentTNode=t,i.isParent=n}function Bo(){return Qt.lFrame.isParent}function Ks(){return Qt.lFrame.bindingIndex++}function va(t,n){const i=Qt.lFrame;i.bindingIndex=i.bindingRootIndex=t,ho(n)}function ho(t){Qt.lFrame.currentDirectiveIndex=t}function Vl(){return Qt.lFrame.currentQueryIndex}function E(t){Qt.lFrame.currentQueryIndex=t}function D(t){const n=t[At];return 2===n.type?n.declTNode:1===n.type?t[br]:null}function v(t,n,i){if(i&qt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&qt.Host||(c=D(f),null===c||(f=f[mn],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Qt.lFrame=N();return o.currentTNode=n,o.lView=t,!0}function S(t){const n=N(),i=t[At];Qt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function N(){const t=Qt.lFrame,n=null===t?null:t.child;return null===n?G(t):n}function G(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function X(){const t=Qt.lFrame;return Qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Fe=X;function Pe(){const t=X();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function In(){return Qt.lFrame.selectedIndex}function En(t){Qt.lFrame.selectedIndex=t}function Jt(){const t=Qt.lFrame;return Ol(t.tView,t.selectedIndex)}let th=!0;function Mc(){return th}function bs(t){th=t}function tu(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:x,ngOnDestroy:$}=f;_&&(t.contentHooks??=[]).push(-i,_),T&&((t.contentHooks??=[]).push(i,T),(t.contentCheckHooks??=[]).push(i,T)),C&&(t.viewHooks??=[]).push(-i,C),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=$&&(t.destroyHooks??=[]).push(i,$)}}function Nc(t,n,i){Ea(t,n,3,i)}function Uu(t,n,i,o){(3&t[cn])===i&&Ea(t,n,i,o)}function nh(t,n){let i=t[cn];(3&i)===n&&(i&=8191,i+=1,t[cn]=i)}function Ea(t,n,i,o){const f=o??-1,_=n.length-1;let T=0;for(let C=void 0!==o?65535&t[sn]:0;C<_;C++)if("number"==typeof n[C+1]){if(T=n[C],null!=o&&T>=o)break}else n[C]<0&&(t[sn]+=65536),(T<f||-1==f)&&(rh(t,i,n,C),t[sn]=(4294901760&t[sn])+C+2),C++}function nu(t,n){Pr(4,t,n);const i=qr(null);try{n.call(t)}finally{qr(i),Pr(5,t,n)}}function rh(t,n,i,o){const c=i[o]<0,f=i[o+1],T=t[c?-i[o]:i[o]];c?t[cn]>>13<t[sn]>>16&&(3&t[cn])===n&&(t[cn]+=8192,nu(T,f)):nu(T,f)}const ru=-1;class fo{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function wa(t){return t!==ru}function ju(t){return 32767&t}function $u(t,n){let i=function ih(t){return t>>16}(t),o=n;for(;i>0;)o=o[mn],i--;return o}let _s=!0;function Oc(t){const n=_s;return _s=t,n}const kc=255,Lc=5;let qs=0;const bi={};function po(t,n){const i=zu(t,n);if(-1!==i)return i;const o=n[At];o.firstCreatePass&&(t.injectorIndex=n.length,Hu(o.data,t),Hu(n,null),Hu(o.blueprint,null));const c=Gu(t,n),f=t.injectorIndex;if(wa(c)){const _=ju(c),T=$u(c,n),C=T[At].data;for(let x=0;x<8;x++)n[f+x]=T[_+x]|C[_+x]}return n[f+8]=c,f}function Hu(t,n){t.push(0,0,0,0,0,0,0,0,n)}function zu(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Gu(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){if(o=Bl(c),null===o)return ru;if(i++,c=c[mn],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return ru}function Wu(t,n,i){!function su(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty($t)&&(o=i[$t]),null==o&&(o=i[$t]=qs++);const c=o&kc;n.data[t+(c>>Lc)]|=1<<c}(t,n,i)}function oh(t,n,i){if(i&qt.Optional||void 0!==t)return t;Be()}function ah(t,n,i,o){if(i&qt.Optional&&void 0===o&&(o=null),!(i&(qt.Self|qt.Host))){const c=t[sr],f=pr(void 0);try{return c?c.get(n,o,i&qt.Optional):Sn(n,o,i&qt.Optional)}finally{pr(f)}}return oh(o,0,i)}function uh(t,n,i,o=qt.Default,c){if(null!==t){if(2048&n[cn]&&!(o&qt.Self)){const _=function Sf(t,n,i,o,c){let f=t,_=n;for(;null!==f&&null!==_&&2048&_[cn]&&!(512&_[cn]);){const T=ou(f,_,i,o|qt.Self,bi);if(T!==bi)return T;let C=f.parent;if(!C){const x=_[Zr];if(x){const $=x.get(i,bi,o);if($!==bi)return $}C=Bl(_),_=_[mn]}f=C}return c}(t,n,i,o,bi);if(_!==bi)return _}const f=ou(t,n,i,o,bi);if(f!==bi)return f}return ah(n,i,o,c)}function ou(t,n,i,o,c){const f=function mg(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty($t)?t[$t]:void 0;return"number"==typeof n?n>=0?n&kc:zo:n}(i);if("function"==typeof f){if(!v(n,t,o))return o&qt.Host?oh(c,0,o):ah(n,i,o,c);try{let _;if(_=f(o),null!=_||o&qt.Optional)return _;Be()}finally{Fe()}}else if("number"==typeof f){let _=null,T=zu(t,n),C=ru,x=o&qt.Host?n[ur][br]:null;for((-1===T||o&qt.SkipSelf)&&(C=-1===T?Gu(t,n):n[T+8],C!==ru&&Ul(o,!1)?(_=n[At],T=ju(C),n=$u(C,n)):T=-1);-1!==T;){const $=n[At];if(ch(f,T,$.data)){const Q=Vc(T,n,i,_,o,x);if(Q!==bi)return Q}C=n[T+8],C!==ru&&Ul(o,n[At].data[T+8]===x)&&ch(f,T,n)?(_=$,T=ju(C),n=$u(C,n)):T=-1}}return c}function Vc(t,n,i,o,c,f){const _=n[At],T=_.data[t+8],$=Fl(T,_,i,null==o?Fr(T)&&_s:o!=_&&0!=(3&T.type),c&qt.Host&&f===T);return null!==$?Li(n,_,$,T):bi}function Fl(t,n,i,o,c){const f=t.providerIndexes,_=n.data,T=1048575&f,C=t.directiveStart,$=f>>20,he=c?T+$:t.directiveEnd;for(let De=o?T:T+$;De<he;De++){const Ze=_[De];if(De<C&&i===Ze||De>=C&&Ze.type===i)return De}if(c){const De=_[C];if(De&&Wr(De)&&De.type===i)return C}return null}function Li(t,n,i,o){let c=t[i];const f=n.data;if(function Bu(t){return t instanceof fo}(c)){const _=c;_.resolving&&function Qe(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${t}${i}`)}(function et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}(f[i]));const T=Oc(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?pr(_.injectImpl):null;v(t,o,qt.Default);try{c=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Af(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=Kn(n);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==x&&pr(x),Oc(T),_.resolving=!1,Fe()}}return c}function ch(t,n,i){return!!(i[n+(t>>Lc)]&1<<t)}function Ul(t,n){return!(t&qt.Self||t&qt.Host&&n)}class Br{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return uh(this._tNode,this._lView,n,pt(o),i)}}function zo(){return new Br(Pn(),ot())}function go(t){return Cr(()=>{const n=t.prototype.constructor,i=n[ht]||Ku(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[ht]||Ku(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Ku(t){return yt(t)?()=>{const n=Ku(it(t));return n&&n()}:vi(t)}function Bl(t){const n=t[At],i=n.type;return 2===i?n.declTNode:1===i?t[br]:null}function jl(t){return function sh(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(er(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Pn(),t)}const Aa="__parameters__";function au(t,n,i){return Cr(()=>{const o=function Uc(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return T.annotation=_,T;function T(C,x,$){const Q=C.hasOwnProperty(Aa)?C[Aa]:Object.defineProperty(C,Aa,{value:[]})[Aa];for(;Q.length<=$;)Q.push(null);return(Q[$]=Q[$]||[]).push(_),C}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function ys(t,n){t.forEach(i=>Array.isArray(i)?ys(i,n):n(i))}function uu(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Bc(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function es(t,n,i){let o=lu(t,n);return o>=0?t[1|o]=i:(o=~o,function Nf(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function ph(t,n){const i=lu(t,n);if(i>=0)return t[1|i]}function lu(t,n){return function jc(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const Xu=wt(au("Optional"),8),Hc=wt(au("SkipSelf"),4);function Ko(t){return 128==(128&t.flags)}var fu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fu||{});const tc=new Map;let Yc=0;const Dh="__ngContext__";function ai(t,n){nr(n)?(t[Dh]=n[Ai],function Gf(t){tc.set(t[Ai],t)}(n)):t[Dh]=n}let _o;function gu(t,n){return _o(t,n)}function pi(t){const n=t[Bn];return bn(n)?n[Bn]:n}function Jc(t){return Xs(t[cs])}function ud(t){return Xs(t[Gr])}function Xs(t){for(;null!==t&&!bn(t);)t=t[Gr];return t}function _u(t,n,i,o,c){if(null!=o){let f,_=!1;bn(o)?f=o:nr(o)&&(_=!0,o=o[dr]);const T=Lt(o);0===t&&null!==i?null==c?dd(n,i,T):yo(n,i,T,c||null,!0):1===t&&null!==i?yo(n,i,T,c||null,!0):2===t?function bh(t,n,i){const o=tl(t,n);o&&function Yf(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,T,_):3===t&&n.destroyNode(T),null!=f&&function Sg(t,n,i,o,c){const f=i[Ci];f!==Lt(i)&&_u(n,t,o,f,c);for(let T=Gn;T<i.length;T++){const C=i[T];Rh(C[At],C,t,n,o,f)}}(n,t,f,i,c)}}function m(t,n,i){return t.createElement(n,i)}function Ee(t,n){const i=t[Po],o=i.indexOf(n);Ll(n),i.splice(o,1)}function He(t,n){if(t.length<=Gn)return;const i=Gn+n,o=t[i];if(o){const c=o[Rr];null!==c&&c!==t&&Ee(c,o),n>0&&(t[i-1][Gr]=o[Gr]);const f=Bc(t,Gn+n);!function l(t,n){Rh(t,n,n[Gt],2,null,null),n[dr]=null,n[br]=null}(o[At],o);const _=f[xi];null!==_&&_.detachView(f[At]),o[Bn]=null,o[Gr]=null,o[cn]&=-129}return o}function Et(t,n){if(!(256&n[cn])){const i=n[Gt];n[qn]&&da(n[qn]),n[Ro]&&da(n[Ro]),i.destroyNode&&Rh(t,n,i,3,null,null),function M(t){let n=t[cs];if(!n)return Ot(t[At],t);for(;n;){let i=null;if(nr(n))i=n[cs];else{const o=n[Gn];o&&(i=o)}if(!i){for(;n&&!n[Gr]&&n!==t;)nr(n)&&Ot(n[At],n),n=n[Bn];null===n&&(n=t),nr(n)&&Ot(n[At],n),i=n&&n[Gr]}n=i}}(n)}}function Ot(t,n){if(!(256&n[cn])){n[cn]&=-129,n[cn]|=256,function Mr(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof fo)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const T=c[f[_]],C=f[_+1];Pr(4,T,C);try{C.call(T)}finally{Pr(5,T,C)}}else{Pr(4,c,f);try{f.call(c)}finally{Pr(5,c,f)}}}}}(t,n),function Vt(t,n){const i=t.cleanup,o=n[Os];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+3];_>=0?o[_]():o[-_].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[Os]=null);const c=n[Di];if(null!==c){n[Di]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,n),1===n[At].type&&n[Gt].destroy();const i=n[Rr];if(null!==i&&bn(n[Bn])){i!==n[Bn]&&Ee(i,n);const o=n[xi];null!==o&&o.detachView(t)}!function nc(t){tc.delete(t[Ai])}(n)}}function ts(t,n,i){return function Zc(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[dr];{const{componentOffset:c}=o;if(c>-1){const{encapsulation:f}=t.data[o.directiveStart+c];if(f===Hr.None||f===Hr.Emulated)return null}return ci(o,i)}}(t,n.parent,i)}function yo(t,n,i,o,c){t.insertBefore(n,i,o,c)}function dd(t,n,i){t.appendChild(n,i)}function el(t,n,i,o,c){null!==o?yo(t,n,i,o,c):dd(t,n,i)}function tl(t,n){return t.parentNode(n)}let yu,Jf,Mh,pd=function rl(t,n,i){return 40&t.type?ci(t,i):null};function Qo(t,n,i,o){const c=ts(t,o,n),f=n[Gt],T=function nl(t,n,i){return pd(t,n,i)}(o.parent||n[br],o,n);if(null!=c)if(Array.isArray(i))for(let C=0;C<i.length;C++)el(f,c,i[C],T,!1);else el(f,c,i,T,!1);void 0!==yu&&yu(f,o,n,i,c)}function il(t,n){if(null!==n){const i=n.type;if(3&i)return ci(n,t);if(4&i)return sc(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return il(t,o);{const c=t[n.index];return bn(c)?sc(-1,c):Lt(c)}}if(32&i)return gu(n,t)()||Lt(t[n.index]);{const o=sl(t,n);return null!==o?Array.isArray(o)?o[0]:il(pi(t[ur]),o):il(t,n.next)}}return null}function sl(t,n){return null!==n?t[ur][br].projection[n.projection]:null}function sc(t,n){const i=Gn+t+1;if(i<n.length){const o=n[i],c=o[At].firstChild;if(null!==c)return il(o,c)}return n[Ci]}function Cg(t,n,i,o,c,f,_){for(;null!=i;){const T=o[i.index],C=i.type;if(_&&0===n&&(T&&ai(Lt(T),o),i.flags|=2),32!=(32&i.flags))if(8&C)Cg(t,n,i.child,o,c,f,!1),_u(n,t,c,T,f);else if(32&C){const x=gu(i,o);let $;for(;$=x();)_u(n,t,c,$,f);_u(n,t,c,T,f)}else 16&C?Xf(t,n,o,i,c,f):_u(n,t,c,T,f);i=_?i.projectionNext:i.next}}function Rh(t,n,i,o,c,f){Cg(i,o,t.firstChild,n,c,f,!1)}function Xf(t,n,i,o,c,f){const _=i[ur],C=_[br].projection[o.projection];if(Array.isArray(C))for(let x=0;x<C.length;x++)_u(n,t,c,C[x],f);else{let x=C;const $=_[Bn];Ko(o)&&(x.flags|=128),Cg(t,n,x,$,c,f,!0)}}function d_(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function h_(t,n,i){const{mergedAttrs:o,classes:c,styles:f}=i;null!==o&&Cn(t,n,o),null!==c&&d_(t,n,c),null!==f&&function Rg(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function f_(t){Jf=t}function m_(t){return function Mg(){if(void 0===Mh&&(Mh=null,dn.trustedTypes))try{Mh=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Mh}()?.createScriptURL(t)||t}class Zf{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ft})`}}function Ma(t){return t instanceof Zf?t.changingThisBreaksApplicationSecurity:t}function Nh(t,n){const i=function kg(t){return t instanceof Zf&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Ft})`)}return i===n}const Nv=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var md=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(md||{});function op(t){const n=Lh();return n?n.sanitize(md.URL,t)||"":Nh(t,"URL")?Ma(t):function xh(t){return(t=String(t)).match(Nv)?t:"unsafe:"+t}(Te(t))}function Hg(t){const n=Lh();if(n)return m_(n.sanitize(md.RESOURCE_URL,t)||"");if(Nh(t,"ResourceURL"))return m_(Ma(t));throw new Ae(904,!1)}function ap(t,n,i){return function Uv(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Hg:op}(n,i)(t)}function Lh(){const t=ot();return t&&t[Ni].sanitizer}const Na=new Ce("ENVIRONMENT_INITIALIZER"),C_=new Ce("INJECTOR",-1),up=new Ce("INJECTOR_DEF_TYPES");class cp{get(n,i=si){if(i===si){const o=new Error(`NullInjectorError: No provider for ${pe(n)}!`);throw o.name="NullInjectorError",o}return i}}function S_(...t){return{\u0275providers:Vh(0,t),\u0275fromNgModule:!0}}function Vh(t,...n){const i=[],o=new Set;let c;const f=_=>{i.push(_)};return ys(n,_=>{const T=_;lp(T,f,[],o)&&(c||=[],c.push(T))}),void 0!==c&&b_(c,f),i}function b_(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:c}=t[i];Wg(c,f=>{n(f,o)})}}function lp(t,n,i,o){if(!(t=it(t)))return!1;let c=null,f=ss(t);const _=!f&&wn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const C=t.ngModule;if(f=ss(C),!f)return!1;c=C}const T=o.has(c);if(_){if(T)return!1;if(o.add(c),_.dependencies){const C="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of C)lp(x,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!T){let x;o.add(c);try{ys(f.imports,$=>{lp($,n,i,o)&&(x||=[],x.push($))})}finally{}void 0!==x&&b_(x,n)}if(!T){const x=vi(c)||(()=>new c);n({provide:c,useFactory:x,deps:rn},c),n({provide:up,useValue:c,multi:!0},c),n({provide:Na,useValue:()=>ct(c),multi:!0},c)}const C=f.providers;if(null!=C&&!T){const x=t;Wg(C,$=>{n($,x)})}}}return c!==t&&void 0!==t.providers}function Wg(t,n){for(let i of t)lt(i)&&(i=i.\u0275providers),Array.isArray(i)?Wg(i,n):n(i)}const Kg=J({provide:String,useValue:J});function Fh(t){return null!==t&&"object"==typeof t&&Kg in t}function Eu(t){return"function"==typeof t}const _d=new Ce("Set Injector scope."),yd={},R_={};let ac;function Uh(){return void 0===ac&&(ac=new cp),ac}class vo{}class dl extends vo{get destroyed(){return this._destroyed}constructor(n,i,o,c){super(),this.parent=i,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xg(n,_=>this.processProvider(_)),this.records.set(C_,vd(void 0,this)),c.has("environment")&&this.records.set(vo,vd(void 0,this));const f=this.records.get(_d);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(up.multi,rn,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=ie(this),o=pr(void 0);try{return n()}finally{ie(i),pr(o)}}get(n,i=si,o=qt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(nn))return n[nn](this);o=pt(o);const f=ie(this),_=pr(void 0);try{if(!(o&qt.SkipSelf)){let C=this.records.get(n);if(void 0===C){const x=function N_(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ce}(n)&&ir(n);C=x&&this.injectableDefInScope(x)?vd(uc(n),yd):null,this.records.set(n,C)}if(null!=C)return this.hydrate(n,C)}return(o&qt.Self?Uh():this.parent).get(n,i=o&qt.Optional&&i===si?null:i)}catch(T){if("NullInjectorError"===T.name){if((T[$i]=T[$i]||[]).unshift(pe(n)),f)throw T;return function kn(t,n,i,o){const c=t[$i];throw n[k]&&c.unshift(n[k]),t.message=function It(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=pe(n);if(Array.isArray(n))c=n.map(pe).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let T=n[_];f.push(_+":"+("string"==typeof T?JSON.stringify(T):pe(T)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(Ge,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[$i]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{pr(_),ie(f)}}resolveInjectorInitializers(){const n=ie(this),i=pr(void 0);try{const c=this.get(Na.multi,rn,qt.Self);for(const f of c)f()}finally{ie(n),pr(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(pe(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(n){let i=Eu(n=it(n))?n:it(n&&n.provide);const o=function Bv(t){return Fh(t)?vd(void 0,t.useValue):vd(P_(t),yd)}(n);if(Eu(n)||!0!==n.multi)this.records.get(i);else{let c=this.records.get(i);c||(c=vd(void 0,yd,!0),c.factory=()=>Un(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===yd&&(i.value=R_,i.value=i.factory()),"object"==typeof i.value&&i.value&&function jv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=it(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function uc(t){const n=ir(t),i=null!==n?n.factory:vi(t);if(null!==i)return i;if(t instanceof Ce)throw new Ae(204,!1);if(t instanceof Function)return function Yg(t){const n=t.length;if(n>0)throw function Ys(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?"),new Ae(204,!1);const i=function Er(t){return t&&(t[Nr]||t[Vr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new Ae(204,!1)}function P_(t,n,i){let o;if(Eu(t)){const c=it(t);return vi(c)||uc(c)}if(Fh(t))o=()=>it(t.useValue);else if(function dp(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Un(t.deps||[]));else if(function qg(t){return!(!t||!t.useExisting)}(t))o=()=>ct(it(t.useExisting));else{const c=it(t&&(t.useClass||t.provide));if(!function M_(t){return!!t.deps}(t))return vi(c)||uc(c);o=()=>new c(...Un(t.deps))}return o}function vd(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Xg(t,n){for(const i of t)Array.isArray(i)?Xg(i,n):i&&lt(i)?Xg(i.\u0275providers,n):n(i)}const x_=new Ce("AppId",{providedIn:"root",factory:()=>$v}),$v="ng",O_=new Ce("Platform Initializer"),Jg=new Ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),k_=new Ce("CSP nonce",{providedIn:"root",factory:()=>function ul(){if(void 0!==Jf)return Jf;if(typeof document<"u")return document;throw new Ae(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let mp=(t,n,i)=>null;function _r(t,n,i=!1){return mp(t,n,i)}class Qv{}class Yv{}class Jv{resolveComponentFactory(n){throw function Xv(t){const n=Error(`No component factory found for ${pe(t)}.`);return n.ngComponent=t,n}(n)}}let Js=(()=>{class t{static{this.NULL=new Jv}}return t})();function Tu(){return $h(Pn(),ot())}function $h(t,n){return new Yo(ci(t,n))}let Yo=(()=>{class t{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=Tu}}return t})();function Ip(t){return t instanceof Yo?t.nativeElement:t}class Hh{}let Zv=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function eI(){const t=ot(),i=wr(Pn().index,t);return(nr(i)?i:t)[Gt]}()}}return t})(),H_=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>null})}}return t})();class tm{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const zh=new tm("16.2.12"),nm={};function cc(t,n=null,i=null,o){const c=am(t,n,i,o);return c.resolveInjectorInitializers(),c}function am(t,n=null,i=null,o,c=new Set){const f=[i||rn,S_(t)];return o=o||("object"==typeof t?void 0:pe(t)),new dl(f,n||Uh(),o||null,c)}let Eo=(()=>{class t{static{this.THROW_IF_NOT_FOUND=si}static{this.NULL=new cp}static create(i,o){if(Array.isArray(i))return cc({name:""},o,i,"");{const c=i.name??"";return cc({name:c},i.parent,i.providers,c)}}static{this.\u0275prov=tn({token:t,providedIn:"any",factory:()=>ct(C_)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function um(t){return t.ngOriginalError}class Xo{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&um(n);for(;i&&um(i);)i=um(i);return i||null}}function Dd(t){return n=>{setTimeout(t,void 0,n)}}const Jo=class nI extends I.B{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let c=n,f=i||(()=>null),_=o;if(n&&"object"==typeof n){const C=n;c=C.next?.bind(C),f=C.error?.bind(C),_=C.complete?.bind(C)}this.__isAsync&&(f=Dd(f),c&&(c=Dd(c)),_&&(_=Dd(_)));const T=super.subscribe({next:c,error:f,complete:_});return n instanceof Y.yU&&n.add(T),T}};function Dp(...t){}class ri{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function Wh(){const t="function"==typeof dn.requestAnimationFrame;let n=dn[t?"requestAnimationFrame":"setTimeout"],i=dn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function PE(t){const n=()=>{!function RE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(dn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kh(t),t.isCheckStableRunning=!0,lc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,_,T)=>{if(function sI(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(T))return i.invokeTask(c,f,_,T);try{return W_(t),i.invokeTask(c,f,_,T)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),qh(t)}},onInvoke:(i,o,c,f,_,T,C)=>{try{return W_(t),i.invoke(c,f,_,T,C)}finally{t.shouldCoalesceRunChangeDetection&&n(),qh(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Kh(t),lc(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ri.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(ri.isInAngularZone())throw new Ae(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,rI,Dp,Dp);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const rI={};function lc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function W_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qh(t){t._nesting--,lc(t)}class iI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}const K_=new Ce("",{providedIn:"root",factory:Qh});function Qh(){const t=vt(ri);let n=!0;const i=new oe.c(c=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(n),c.complete()})}),o=new oe.c(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ri.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ri.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,q.h)(i,o.pipe((0,_e.u)()))}function xa(t){return t instanceof Function?t():t}let Sd=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Yh(t){for(;t;){t[cn]|=64;const n=pi(t);if(Es(t)&&!n)return t;t=n}return null}const X_=new Ce("",{providedIn:"root",factory:()=>!1});let bp=null;function Z_(t,n){return t[n]??ny()}function ey(t,n){const i=ny();i.producerNode?.length&&(t[n]=bp,i.lView=t,bp=dm())}const ty={...Qa,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Yh(t.lView)},lView:null};function dm(){return Object.create(ty)}function ny(){return bp??=dm(),bp}const An={};function hm(t){ry(xn(),ot(),In()+t,!1)}function ry(t,n,i,o){if(!o)if(3==(3&n[cn])){const f=t.preOrderCheckHooks;null!==f&&Nc(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Uu(n,f,0,i)}En(i)}function Zo(t,n=qt.Default){const i=ot();return null===i?ct(t,n):uh(Pn(),i,it(t),n)}function Rp(){throw new Error("invalid")}function Pp(t,n,i,o,c,f,_,T,C,x,$){const Q=n.blueprint.slice();return Q[dr]=c,Q[cn]=140|o,(null!==x||t&&2048&t[cn])&&(Q[cn]|=2048),Gs(Q),Q[Bn]=Q[mn]=t,Q[tr]=i,Q[Ni]=_||t&&t[Ni],Q[Gt]=T||t&&t[Gt],Q[sr]=C||t&&t[sr]||null,Q[br]=f,Q[Ai]=function od(){return Yc++}(),Q[ls]=$,Q[Zr]=x,Q[ur]=2==n.type?t[ur]:Q,Q}function Rd(t,n,i,o,c){let f=t.data[n];if(null===f)f=function fm(t,n,i,o,c){const f=bc(),_=Bo(),C=t.data[n]=function pI(t,n,i,o,c,f){let _=n?n.injectorIndex:-1,T=0;return function Za(){return null!==Qt.skipHydrationRootTNode}()&&(T|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:T,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=C),null!==f&&(_?null==f.child&&null!==C.parent&&(f.child=C):null===f.next&&(f.next=C,C.prev=f)),C}(t,n,i,o,c),function ku(){return Qt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const _=function Ws(){const t=Qt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return fs(f,!0),f}function Xh(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function iy(t,n,i,o,c){const f=Z_(n,qn),_=In(),T=2&o;try{En(-1),T&&n.length>on&&ry(t,n,on,!1),Pr(T?2:0,c);const x=T?f:null,$=xo(x);try{null!==x&&(x.dirty=!1),i(o,c)}finally{la(x,$)}}finally{T&&null===n[qn]&&ey(n,qn),En(_),Pr(T?3:1,c)}}function sy(t,n,i){if(Is(n)){const o=qr(null);try{const f=n.directiveEnd;for(let _=n.directiveStart;_<f;_++){const T=t.data[_];T.contentQueries&&T.contentQueries(1,i[_],_)}}finally{qr(o)}}}function oy(t,n,i){Sc()&&(function jE(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;Fr(i)&&function yI(t,n,i){const o=ci(n,t),c=lI(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const T=Op(t,Pp(t,c,null,_,o,n,null,t[Ni].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=T}(n,i,t.data[c+i.componentOffset]),t.firstCreatePass||po(i,n),ai(o,n);const _=i.initialInputs;for(let T=c;T<f;T++){const C=t.data[T],x=Li(n,t,T,i);ai(x,n),null!==_&&my(0,T-c,x,C,0,_),Wr(C)&&(wr(i.index,n)[tr]=Li(n,t,T,i))}}(t,n,i,ci(i,n)),64==(64&i.flags)&&_I(t,n,i))}function ay(t,n,i=ci){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],T=-1===_?i(n,t):t[_];t[c++]=T}}}function lI(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=pm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function pm(t,n,i,o,c,f,_,T,C,x,$){const Q=on+o,he=Q+c,De=function dI(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:An);return i}(Q,he),Ze="function"==typeof x?x():x;return De[At]={type:t,blueprint:De,template:i,queries:null,viewQuery:T,declTNode:n,data:De.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:Ze,incompleteFirstPass:!1,ssrId:$}}let uy=t=>null;function ly(t,n,i,o){for(let c in t)if(t.hasOwnProperty(c)){i=null===i?{}:i;const f=t[c];null===o?dy(i,n,c,f):o.hasOwnProperty(c)&&dy(i,n,o[c],f)}return i}function dy(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function Mp(t,n,i,o){if(Sc()){const c=null===o?null:{"":-1},f=function py(t,n){const i=t.directiveRegistry;let o=null,c=null;if(i)for(let f=0;f<i.length;f++){const _=i[f];if(_i(n,_.selectors,!1))if(o||(o=[]),Wr(_))if(null!==_.findHostDirectiveDefs){const T=[];c=c||new Map,_.findHostDirectiveDefs(_,T,c),o.unshift(...T,_),gy(t,n,T.length)}else o.unshift(_),gy(t,n,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,o,c),o.push(_)}return null===o?null:[o,c]}(t,i);let _,T;null===f?_=T=null:[_,T]=f,null!==_&&hy(t,n,i,_,c,T),c&&function $E(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new Ae(-301,!1);o.push(n[c],f)}}}(i,o,c)}i.mergedAttrs=vn(i.mergedAttrs,i.attrs)}function hy(t,n,i,o,c,f){for(let x=0;x<o.length;x++)Wu(po(i,n),t,o[x].type);!function gm(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const $=o[x];$.providersResolver&&$.providersResolver($)}let _=!1,T=!1,C=Xh(t,n,o.length,null);for(let x=0;x<o.length;x++){const $=o[x];i.mergedAttrs=vn(i.mergedAttrs,$.hostAttrs),Np(t,i,n,C,$),HE(C,$,c),null!==$.contentQueries&&(i.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(i.flags|=64);const Q=$.type.prototype;!_&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!T&&(Q.ngOnChanges||Q.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),T=!0),C++}!function gI(t,n,i){const c=n.directiveEnd,f=t.data,_=n.attrs,T=[];let C=null,x=null;for(let $=n.directiveStart;$<c;$++){const Q=f[$],he=i?i.get(Q):null,Ze=he?he.outputs:null;C=ly(Q.inputs,$,C,he?he.inputs:null),x=ly(Q.outputs,$,x,Ze);const gt=null===C||null===_||Gi(n)?null:Zh(C,$,_);T.push(gt)}null!==C&&(C.hasOwnProperty("class")&&(n.flags|=8),C.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=T,n.inputs=C,n.outputs=x}(t,i,f)}function _I(t,n,i){const o=i.directiveStart,c=i.directiveEnd,f=i.index,_=function Vu(){return Qt.lFrame.currentDirectiveIndex}();try{En(f);for(let T=o;T<c;T++){const C=t.data[T],x=n[T];ho(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&fy(C,x)}}finally{En(-1),ho(_)}}function fy(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function gy(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function HE(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Wr(n)&&(i[""]=t)}}function Np(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=vi(c.type)),_=new fo(f,Wr(c),Zo);t.blueprint[o]=_,i[o]=_,function UE(t,n,i,o,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const T=~n.index;(function BE(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(_)!=T&&_.push(T),_.push(i,o,f)}}(t,n,o,Xh(t,i,c.hostVars,An),c)}function Oa(t,n,i,o,c,f){const _=ci(t,n);!function Jh(t,n,i,o,c,f,_){if(null==f)t.removeAttribute(n,c,i);else{const T=null==_?Te(f):_(f,o||"",c);t.setAttribute(n,c,T,i)}}(n[Gt],_,f,t.value,i,o,c)}function my(t,n,i,o,c,f){const _=f[n];if(null!==_)for(let T=0;T<_.length;)mm(o,i,_[T++],_[T++],_[T++])}function mm(t,n,i,o,c){const f=qr(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(o)&&(c=_[o].call(n,c)),null!==t.setInput?t.setInput(n,c,i,o):n[o]=c}finally{qr(f)}}function Zh(t,n,i){let o=null,c=0;for(;c<i.length;){const f=i[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const _=t[f];for(let T=0;T<_.length;T+=2)if(_[T]===n){o.push(f,_[T+1],i[c+1]);break}}c+=2}else c+=2;else c+=4}return o}function xp(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function _y(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const _=t.data[f];E(i[o]),_.contentQueries(2,n[f],f)}}}function Op(t,n){return t[cs]?t[ks][Gr]=n:t[cs]=n,t[ks]=n,n}function kp(t,n,i){E(0);const o=qr(null);try{n(t,i)}finally{qr(o)}}function yy(t){return t[Os]||(t[Os]=[])}function ym(t){return t.cleanup||(t.cleanup=[])}function hc(t,n){const i=t[sr],o=i?i.get(Xo,null):null;o&&o.handleError(n)}function Rs(t,n,i,o,c){for(let f=0;f<i.length;){const _=i[f++],T=i[f++];mm(t.data[_],n[_],o,T,c)}}function vy(t,n){const i=wr(n,t),o=i[At];!function Iy(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const c=i[dr];null!==c&&null===i[ls]&&(i[ls]=_r(c,i[sr])),Il(o,i,i[tr])}function Il(t,n,i){S(n);try{const o=t.viewQuery;null!==o&&kp(1,o,i);const c=t.template;null!==c&&iy(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_y(t,n),t.staticViewQueries&&kp(2,t.viewQuery,i);const f=t.components;null!==f&&function ef(t,n){for(let i=0;i<n.length;i++)vy(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[cn]&=-5,Pe()}}let ns=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,c){const f=typeof Zone>"u"?null:Zone.current,_=function nt(t,n,i){const o=Object.create(Ln);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const c=_=>{o.cleanupFn=_};return o.ref={notify:()=>Ji(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Tc(o))return;o.hasRun=!0;const _=xo(o);try{o.cleanupFn(),o.cleanupFn=bt,o.fn(c)}finally{la(o,_)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,f)},c);let T;this.all.add(_),_.notify();const C=()=>{_.cleanup(),T?.(),this.all.delete(_),this.queue.delete(_)};return T=o?.onDestroy(C),{destroy:C}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=tn({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Pd(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const T=n[_];"number"==typeof T?f=T:1==f?c=Ke(c,T):2==f&&(o=Ke(o,T+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}function ka(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(Lt(f)),bn(f)&&fc(f,o);const _=i.type;if(8&_)ka(t,n,i.child,o);else if(32&_){const T=gu(i,n);let C;for(;C=T();)o.push(C)}else if(16&_){const T=sl(n,i);if(Array.isArray(T))o.push(...T);else{const C=pi(n[ur]);ka(C[At],C,T,o,!0)}}i=c?i.projectionNext:i.next}return o}function fc(t,n){for(let i=Gn;i<t.length;i++){const o=t[i],c=o[At].firstChild;null!==c&&ka(o[At],o,c,n)}t[Ci]!==t[dr]&&n.push(t[Ci])}function Md(t,n,i,o=!0){const c=n[Ni],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{Ey(t,n,t.template,i)}catch(C){throw o&&hc(n,C),C}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function Ey(t,n,i,o){const c=n[cn];if(256!=(256&c)){n[Ni].effectManager?.flush(),S(n);try{Gs(n),function jo(t){return Qt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&iy(t,n,i,2,o);const _=3==(3&c);if(_){const x=t.preOrderCheckHooks;null!==x&&Nc(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Uu(n,x,0,null),nh(n,0)}if(function EI(t){for(let n=Jc(t);null!==n;n=ud(n)){if(!n[Ls])continue;const i=n[Po];for(let o=0;o<i.length;o++){Ss(i[o])}}}(n),Ty(n,2),null!==t.contentQueries&&_y(t,n),_){const x=t.contentCheckHooks;null!==x&&Nc(n,x)}else{const x=t.contentHooks;null!==x&&Uu(n,x,1),nh(n,1)}!function kE(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=Z_(n,Ro);try{for(let c=0;c<i.length;c++){const f=i[c];if(f<0)En(~f);else{const _=f,T=i[++c],C=i[++c];va(T,_),o.dirty=!1;const x=xo(o);try{C(2,n[_])}finally{la(o,x)}}}}finally{null===n[Ro]&&ey(n,Ro),En(-1)}}(t,n);const T=t.components;null!==T&&Lp(n,T,0);const C=t.viewQuery;if(null!==C&&kp(2,C,o),_){const x=t.viewCheckHooks;null!==x&&Nc(n,x)}else{const x=t.viewHooks;null!==x&&Uu(n,x,2),nh(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[cn]&=-73,Ll(n)}finally{Pe()}}}function Ty(t,n){for(let i=Jc(t);null!==i;i=ud(i))for(let o=Gn;o<i.length;o++)Ay(i[o],n)}function wy(t,n,i){Ay(wr(n,t),i)}function Ay(t,n){if(!function kl(t){return 128==(128&t[cn])}(t))return;const i=t[At],o=t[cn];if(80&o&&0===n||1024&o||2===n)Ey(i,t,i.template,t[tr]);else if(t[io]>0){Ty(t,1);const c=i.components;null!==c&&Lp(t,c,1)}}function Lp(t,n,i){for(let o=0;o<n.length;o++)wy(t,n[o],i)}class xd{get rootNodes(){const n=this._lView,i=n[At];return ka(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[tr]}set context(n){this._lView[tr]=n}get destroyed(){return 256==(256&this._lView[cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Bn];if(bn(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(He(n,o),Bc(i,o))}this._attachedToViewContainer=!1}Et(this._lView[At],this._lView)}onDestroy(n){!function Ac(t,n){if(256==(256&t[cn]))throw new Ae(911,!1);null===t[Di]&&(t[Di]=[]),t[Di].push(n)}(this._lView,n)}markForCheck(){Yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[cn]&=-129}reattach(){this._lView[cn]|=128}detectChanges(){Md(this._lView[At],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function y(t,n){Rh(t,n,n[Gt],2,null,null)}(this._lView[At],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=n}}class Vp extends xd{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Md(n[At],n,n[tr],!1)}checkNoChanges(){}get context(){return null}}class Im extends Js{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=wn(n);return new Od(i,this.ngModule)}}function Dy(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class TI{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=pt(o);const c=this.injector.get(n,nm,o);return c!==nm||i===nm?c:this.parentInjector.get(n,i,o)}}class Od extends Yv{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=Dy(n.inputs);if(null!==i)for(const c of o)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return o}get outputs(){return Dy(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function ar(t){return t.map(sa).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,c){let f=(c=c||this.ngModule)instanceof vo?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new TI(n,f):n,T=_.get(Hh,null);if(null===T)throw new Ae(407,!1);const Q={rendererFactory:T,sanitizer:_.get(H_,null),effectManager:_.get(ns,null),afterRenderEventManager:_.get(Sd,null)},he=T.createRenderer(null,this.componentDef),De=this.componentDef.selectors[0][0]||"div",Ze=o?function hI(t,n,i,o){const f=o.get(X_,!1)||i===Hr.ShadowDom,_=t.selectRootElement(n,f);return function LE(t){uy(t)}(_),_}(he,o,this.componentDef.encapsulation,_):m(he,De,function Em(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(De)),Yt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ut=null;null!==Ze&&(ut=_r(Ze,_,!0));const Tn=pm(0,null,null,1,0,null,null,null,null,null,null),Hn=Pp(null,Tn,null,Yt,null,null,Q,he,_,null,ut);let Dr,Co;S(Hn);try{const Rl=this.componentDef;let hg,TE=null;Rl.findHostDirectiveDefs?(hg=[],TE=new Map,Rl.findHostDirectiveDefs(Rl,hg,TE),hg.push(Rl)):hg=[Rl];const KC=function wI(t,n){const i=t[At],o=on;return t[o]=n,Rd(i,o,2,"#host",null)}(Hn,Ze),qC=function Sy(t,n,i,o,c,f,_){const T=c[At];!function by(t,n,i,o){for(const c of t)n.mergedAttrs=vn(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(Pd(n,n.mergedAttrs,!0),null!==i&&h_(o,i,n))}(o,t,n,_);let C=null;null!==n&&(C=_r(n,c[sr]));const x=f.rendererFactory.createRenderer(n,i);let $=16;i.signals?$=4096:i.onPush&&($=64);const Q=Pp(c,lI(i),null,$,c[t.index],t,f,x,null,null,C);return T.firstCreatePass&&gy(T,t,o.length-1),Op(c,Q),c[t.index]=Q}(KC,Ze,Rl,hg,Hn,Q,he);Co=Ol(Tn,on),Ze&&function DI(t,n,i,o){if(o)Cn(t,i,["ng-version",zh.full]);else{const{attrs:c,classes:f}=function $a(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!Sr(c))break;c=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Cn(t,i,c),f&&f.length>0&&d_(t,i,f.join(" "))}}(he,Rl,Ze,o),void 0!==i&&function Ry(t,n,i){const o=t.projection=[];for(let c=0;c<n.length;c++){const f=i[c];o.push(null!=f?Array.from(f):null)}}(Co,this.ngContentSelectors,i),Dr=function AI(t,n,i,o,c,f){const _=Pn(),T=c[At],C=ci(_,c);hy(T,c,_,i,null,o);for(let $=0;$<i.length;$++)ai(Li(c,T,_.directiveStart+$,_),c);_I(T,c,_),C&&ai(C,c);const x=Li(c,T,_.directiveStart+_.componentOffset,_);if(t[tr]=c[tr]=x,null!==f)for(const $ of f)$(x,n);return sy(T,_,t),x}(qC,Rl,hg,TE,Hn,[Py]),Il(Tn,Hn,null)}finally{Pe()}return new Cy(this.componentType,Dr,$h(Co,Hn),Hn,Co)}}class Cy extends Qv{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Vp(c),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;Rs(f[At],f,c,n,i),this.previousInputValues.set(n,i),Yh(wr(this._tNode.index,f))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function Py(){const t=Pn();tu(ot()[At],t)}function a(t){let n=function My(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(Wr(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Ae(903,!1);c=n.\u0275dir}if(c){if(i){o.push(c);const _=t;_.inputs=r(t.inputs),_.inputTransforms=r(t.inputTransforms),_.declaredInputs=r(t.declaredInputs),_.outputs=r(t.outputs);const T=c.hostBindings;T&&d(t,T);const C=c.viewQuery,x=c.contentQueries;if(C&&s(t,C),x&&u(t,x),Z(t.inputs,c.inputs),Z(t.declaredInputs,c.declaredInputs),Z(t.outputs,c.outputs),null!==c.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),Z(_.inputTransforms,c.inputTransforms)),Wr(c)&&c.data.animation){const $=t.data;$.animation=($.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const T=f[_];T&&T.ngInherit&&T(t),T===a&&(i=!1)}}n=Object.getPrototypeOf(n)}!function e(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=vn(c.hostAttrs,i=vn(i,c.hostAttrs))}}(o)}function r(t){return t===xr?{}:t===rn?[]:t}function s(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function u(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function d(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}function dt(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const c=n[o];Array.isArray(c)&&c[2]&&(i[o]=c[2])}t.inputTransforms=i}function kt(t){return!!zt(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function zt(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function te(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function Ve(t,n,i,o){const c=ot();return te(c,Ks(),n)&&(xn(),Oa(Jt(),c,t,n,i,o)),Ve}function uf(t,n,i,o,c,f,_,T){const C=ot(),x=xn(),$=t+on,Q=x.firstCreatePass?function Ky(t,n,i,o,c,f,_,T,C){const x=n.consts,$=Rd(n,t,4,_||null,li(x,T));Mp(n,i,$,li(x,C)),tu(n,$);const Q=$.tView=pm(2,$,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,$),Q.queries=n.queries.embeddedTView($)),$}($,x,C,n,i,o,c,f,_):x.data[$];fs(Q,!1);const he=Sm(x,C,Q,t);Mc()&&Qo(x,C,he,Q),ai(he,C),Op(C,C[$]=xp(he,C,he,Q)),Wa(Q)&&oy(x,C,Q),null!=_&&ay(C,Q,T)}let Sm=function $d(t,n,i,o){return bs(!0),n[Gt].createComment("")};function Dl(t,n,i){const o=ot();return te(o,Ks(),n)&&function Zs(t,n,i,o,c,f,_,T){const C=ci(n,i);let $,x=n.inputs;!T&&null!=x&&($=x[o])?(Rs(t,i,$,o,c),Fr(n)&&function VE(t,n){const i=wr(n,t);16&i[cn]||(i[cn]|=64)}(i,n.index)):3&n.type&&(o=function mI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,f.setProperty(C,o,c))}(xn(),Jt(),o,t,n,o[Gt],i,!1),Dl}function bm(t,n,i,o,c){const _=c?"class":"style";Rs(t,i,n.inputs[_],_,o)}function Cu(t,n,i,o){const c=ot(),f=xn(),_=on+t,T=c[Gt],C=f.firstCreatePass?function PI(t,n,i,o,c,f){const _=n.consts,C=Rd(n,t,2,o,li(_,c));return Mp(n,i,C,li(_,f)),null!==C.attrs&&Pd(C,C.attrs,!1),null!==C.mergedAttrs&&Pd(C,C.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,C),C}(_,f,c,n,i,o):f.data[_],x=lf(f,c,C,T,n,t);c[_]=x;const $=Wa(C);return fs(C,!0),h_(T,x,C),32!=(32&C.flags)&&Mc()&&Qo(f,c,x,C),0===function jn(){return Qt.lFrame.elementDepthCount}()&&ai(x,c),function Ou(){Qt.lFrame.elementDepthCount++}(),$&&(oy(f,c,C),sy(f,C,c)),null!==o&&ay(c,C),Cu}function jp(){let t=Pn();Bo()?function Rc(){Qt.lFrame.isParent=!1}():(t=t.parent,fs(t,!1));const n=t;(function _a(t){return Qt.skipHydrationRootTNode===t})(n)&&function di(){Qt.skipHydrationRootTNode=null}(),function ma(){Qt.lFrame.elementDepthCount--}();const i=xn();return i.firstCreatePass&&(tu(i,t),Is(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function pg(t){return 0!=(8&t.flags)}(n)&&bm(i,n,ot(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function gg(t){return 0!=(16&t.flags)}(n)&&bm(i,n,ot(),n.stylesWithoutHost,!1),jp}function Rm(t,n,i,o){return Cu(t,n,i,o),jp(),Rm}let lf=(t,n,i,o,c,f)=>(bs(!0),m(o,c,function ms(){return Qt.lFrame.currentNamespace}()));function xm(){return ot()}function Om(t){return!!t&&"function"==typeof t.then}function df(t){return!!t&&"function"==typeof t.subscribe}function Gp(t,n,i,o){const c=ot(),f=xn(),_=Pn();return function gc(t,n,i,o,c,f,_){const T=Wa(o),x=t.firstCreatePass&&ym(t),$=n[tr],Q=yy(n);let he=!0;if(3&o.type||_){const gt=ci(o,n),Pt=_?_(gt):gt,Yt=Q.length,ut=_?Hn=>_(Lt(Hn[o.index])):o.index;let Tn=null;if(!_&&T&&(Tn=function hf(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===i&&c[f+1]===o){const T=n[Os],C=c[f+2];return T.length>C?T[C]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==Tn)(Tn.__ngLastListenerFn__||Tn).__ngNextListenerFn__=f,Tn.__ngLastListenerFn__=f,he=!1;else{f=Jy(o,n,$,f,!1);const Hn=i.listen(Pt,c,f);Q.push(f,Hn),x&&x.push(c,ut,Yt,Yt+1)}}else f=Jy(o,n,$,f,!1);const De=o.outputs;let Ze;if(he&&null!==De&&(Ze=De[c])){const gt=Ze.length;if(gt)for(let Pt=0;Pt<gt;Pt+=2){const Dr=n[Ze[Pt]][Ze[Pt+1]].subscribe(f),Co=Q.length;Q.push(f,Dr),x&&x.push(c,o.index,Co,-(Co+1))}}}(f,c,c[Gt],_,t,n,o),Gp}function Kp(t,n,i,o){try{return Pr(6,n,i),!1!==i(o)}catch(c){return hc(t,c),!1}finally{Pr(7,n,i)}}function Jy(t,n,i,o,c){return function f(_){if(_===Function)return o;Yh(t.componentOffset>-1?wr(t.index,n):n);let C=Kp(n,i,o,_),x=f.__ngNextListenerFn__;for(;x;)C=Kp(n,i,x,_)&&C,x=x.__ngNextListenerFn__;return c&&!1===C&&_.preventDefault(),C}}function km(t=1){return function Dt(t){return(Qt.lFrame.contextLView=function un(t,n){for(;t>0;)n=n[mn],t--;return n}(t,Qt.lFrame.contextLView))[tr]}(t)}function Cl(t,n){return t<<17|n<<2}function ea(t){return t>>17&32767}function Hd(t){return 2|t}function ta(t){return(131068&t)>>2}function Sl(t,n){return-131069&t|n<<2}function Yp(t){return 1|t}function zd(t,n,i,o,c){const f=t[i+1],_=null===n;let T=o?ea(f):ta(f),C=!1;for(;0!==T&&(!1===C||_);){const $=t[T+1];_c(t[T],n)&&(C=!0,t[T+1]=o?Yp($):Hd($)),T=o?ea($):ta($)}C&&(t[i+1]=o?Hd(f):Yp(f))}function _c(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&lu(t,n)>=0}function gf(t,n){return function To(t,n,i,o){const c=ot(),f=xn(),_=function ps(t){const n=Qt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}(2);f.firstUpdatePass&&function $m(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[In()],_=function mf(t,n){return n>=t.expandoStartIndex}(t,i);(function tg(t,n){return 0!=(t.flags&(n?8:16))})(f,o)&&null===n&&!_&&(n=!1),n=function bu(t,n,i,o){const c=function Ia(t){const n=Qt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=bl(i=Jp(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(i=Jp(c,t,n,i,o),null===f){let C=function cv(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==ta(o))return t[ea(o)]}(t,n,o);void 0!==C&&Array.isArray(C)&&(C=Jp(null,t,n,C[1],o),C=bl(C,n.attrs,o),function FI(t,n,i,o){t[ea(i?n.classBindings:n.styleBindings)]=o}(t,n,o,C))}else f=function _f(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=bl(o,t[f].hostAttrs,i);return bl(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function NI(t,n,i,o,c,f){let _=f?n.classBindings:n.styleBindings,T=ea(_),C=ta(_);t[o]=i;let $,x=!1;if(Array.isArray(i)?($=i[1],(null===$||lu(i,$)>0)&&(x=!0)):$=i,c)if(0!==C){const he=ea(t[T+1]);t[o+1]=Cl(he,T),0!==he&&(t[he+1]=Sl(t[he+1],o)),t[T+1]=function Lr(t,n){return 131071&t|n<<17}(t[T+1],o)}else t[o+1]=Cl(T,0),0!==T&&(t[T+1]=Sl(t[T+1],o)),T=o;else t[o+1]=Cl(C,0),0===T?T=o:t[C+1]=Sl(t[C+1],o),C=o;x&&(t[o+1]=Hd(t[o+1])),zd(t,$,o,!0),zd(t,$,o,!1),function xI(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&lu(f,n)>=0&&(i[o+1]=Yp(i[o+1]))}(n,$,t,o,f),_=Cl(T,C),f?n.classBindings=_:n.styleBindings=_}(c,f,n,i,_,o)}}(f,t,_,o),n!==An&&te(c,_,n)&&function zm(t,n,i,o,c,f,_,T){if(!(3&n.type))return;const C=t.data,x=C[T+1],$=function MI(t){return 1==(1&t)}(x)?qd(C,n,i,c,ta(x),_):void 0;yf($)||(yf(f)||function iv(t){return 2==(2&t)}(x)&&(f=qd(C,null,i,c,T,_)),function bg(t,n,i,o,c){if(n)c?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:fu.DashCase;null==c?t.removeStyle(i,o,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=fu.Important),t.setStyle(i,o,c,f))}}(o,_,zs(In(),i),c,f))}(f,f.data[In()],c,c[Gt],t,c[_+1]=function lv(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=pe(Ma(t)))),t}(n,i),o,_)}(t,n,null,!0),gf}function Jp(t,n,i,o,c){let f=null;const _=i.directiveEnd;let T=i.directiveStylingLast;for(-1===T?T=i.directiveStart:T++;T<_&&(f=n[T],o=bl(o,f.hostAttrs,c),f!==t);)T++;return null!==t&&(i.directiveStylingLast=T),o}function bl(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),es(t,_,!!i||n[++f]))}return void 0===t?null:t}function qd(t,n,i,o,c,f){const _=null===n;let T;for(;c>0;){const C=t[c],x=Array.isArray(C),$=x?C[1]:C,Q=null===$;let he=i[c+1];he===An&&(he=Q?rn:void 0);let De=Q?ph(he,o):$===o?he:void 0;if(x&&!yf(De)&&(De=ph(C,o)),yf(De)&&(T=De,_))return T;const Ze=t[c+1];c=_?ea(Ze):ta(Ze)}if(null!==n){let C=f?n.residualClasses:n.residualStyles;null!=C&&(T=ph(C,o))}return T}function yf(t){return void 0!==t}function ng(t,n=""){const i=ot(),o=xn(),c=t+on,f=o.firstCreatePass?Rd(o,c,1,n,null):o.data[c],_=Gm(o,i,f,n,t);i[c]=_,Mc()&&Qo(o,i,_,f),fs(f,!1)}let Gm=(t,n,i,o,c)=>(bs(!0),function cd(t,n){return t.createText(n)}(n[Gt],o));function ig(t){return Ru("",t,""),ig}function Ru(t,n,i){const o=ot(),c=function Ps(t,n,i,o){return te(t,Ks(),i)?n+Te(i)+o:An}(o,t,n,i);return c!==An&&function Yr(t,n,i){const o=zs(n,t);!function ld(t,n,i){t.setValue(n,i)}(t[Gt],o,i)}(o,In(),c),Ru}const If=void 0;var gw=["en",[["a","p"],["AM","PM"],If],[["AM","PM"],If,If],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],If,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],If,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",If,"{1} 'at' {0}",If],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function pw(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let og={};function BI(t){const n=function mw(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=s0(n);if(i)return i;const o=n.split("-")[0];if(i=s0(o),i)return i;if("en"===o)return gw;throw new Ae(701,!1)}function r0(t){return BI(t)[ag.PluralCase]}function s0(t){return t in og||(og[t]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[t]),og[t]}var ag=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ag||{});const ug="en-US";let o0=ug;function HI(t,n,i,o,c){if(t=it(t),Array.isArray(t))for(let f=0;f<t.length;f++)HI(t[f],n,i,o,c);else{const f=xn(),_=ot(),T=Pn();let C=Eu(t)?t:it(t.provide);const x=P_(t),$=1048575&T.providerIndexes,Q=T.directiveStart,he=T.providerIndexes>>20;if(Eu(t)||!t.multi){const De=new fo(x,c,Zo),Ze=GI(C,n,c?$:$+he,Q);-1===Ze?(Wu(po(T,_),f,C),zI(f,t,n.length),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(De),_.push(De)):(i[Ze]=De,_[Ze]=De)}else{const De=GI(C,n,$+he,Q),Ze=GI(C,n,$,$+he),Pt=Ze>=0&&i[Ze];if(c&&!Pt||!c&&!(De>=0&&i[De])){Wu(po(T,_),f,C);const Yt=function pA(t,n,i,o,c){const f=new fo(t,i,Zo);return f.multi=[],f.index=n,f.componentProviders=0,M0(f,c,o&&!i),f}(c?fA:hA,i.length,c,o,x);!c&&Pt&&(i[Ze].providerFactory=Yt),zI(f,t,n.length,0),n.push(C),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),i.push(Yt),_.push(Yt)}else zI(f,t,De>-1?De:Ze,M0(i[c?Ze:De],x,!c&&o));!c&&o&&Pt&&i[Ze].componentProviders++}}}function zI(t,n,i,o){const c=Eu(n),f=function Qg(t){return!!t.useClass}(n);if(c||f){const C=(f?it(n.useClass):n).prototype.ngOnDestroy;if(C){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const $=x.indexOf(i);-1===$?x.push(i,[o,C]):x[$+1].push(o,C)}else x.push(i,C)}}}function M0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function GI(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function hA(t,n,i,o){return WI(this.multi,[])}function fA(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,T=Li(i,i[At],this.providerFactory.index,o);f=T.slice(0,_),WI(c,f);for(let C=_;C<T.length;C++)f.push(T[C])}else f=[],WI(c,f);return f}function WI(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function N0(t,n=[]){return i=>{i.providersResolver=(o,c)=>function dA(t,n,i){const o=xn();if(o.firstCreatePass){const c=Wr(t);HI(i,o.data,o.blueprint,c,!0),HI(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class Ef{}class x0{}function gA(t,n){return new KI(t,n??null,[])}class KI extends Ef{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Im(this);const c=kr(n);this._bootstrapComponents=xa(c.bootstrap),this._r3Injector=am(n,i,[{provide:Ef,useValue:this},{provide:Js,useValue:this.componentFactoryResolver},...o],pe(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class qI extends x0{constructor(n){super(),this.moduleType=n}create(n){return new KI(this.moduleType,n,[])}}class O0 extends Ef{constructor(n){super(),this.componentFactoryResolver=new Im(this),this.instance=null;const i=new dl([...n.providers,{provide:Ef,useValue:this},{provide:Js,useValue:this.componentFactoryResolver}],n.parent||Uh(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function k0(t,n,i=null){return new O0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let _A=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=Vh(0,i.type),c=o.length>0?k0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=tn({token:t,providedIn:"environment",factory:()=>new t(ct(vo))})}}return t})();function L0(t){t.getStandaloneInjector=n=>n.get(_A).getOrCreateStandaloneInjector(t)}function HA(){return this._results[Symbol.iterator]()}class YI{get changes(){return this._changes||(this._changes=new Jo)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=YI.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=HA)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=function Vi(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Hl(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function GA(t,n,i,o=!0){const c=n[At];if(function B(t,n,i,o){const c=Gn+o,f=i.length;o>0&&(i[c-1][Gr]=n),o<f-Gn?(n[Gr]=i[c],uu(i,Gn+o,n)):(i.push(n),n[Gr]=null),n[Bn]=i;const _=n[Rr];null!==_&&i!==_&&function re(t,n){const i=t[Po];n[ur]!==n[Bn][Bn][ur]&&(t[Ls]=!0),null===i?t[Po]=[n]:i.push(n)}(_,n);const T=n[xi];null!==T&&T.insertView(t),n[cn]|=128}(c,n,t,i),o){const f=sc(i,t),_=n[Gt],T=tl(_,t[Ci]);null!==T&&function h(t,n,i,o,c,f){o[dr]=c,o[br]=n,Rh(t,o,i,1,c,f)}(c,t[br],_,n,T,f)}}let o_=(()=>{class t{static{this.__NG_ELEMENT_ID__=qA}}return t})();const WA=o_,KA=class extends WA{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const c=function zA(t,n,i,o){const c=n.tView,T=Pp(t,c,i,4096&t[cn]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);T[Rr]=t[n.index];const x=t[xi];return null!==x&&(T[xi]=x.createEmbeddedView(c)),Il(c,T,i),T}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new xd(c)}};function qA(){return mv(Pn(),ot())}function mv(t,n){return 4&t.type?new KA(n,t,$h(t,n)):null}let yv=(()=>{class t{static{this.__NG_ELEMENT_ID__=eD}}return t})();function eD(){return eT(Pn(),ot())}const tD=yv,J0=class extends tD{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const n=Gu(this._hostTNode,this._hostLView);if(wa(n)){const i=$u(n,this._hostLView),o=ju(n);return new Br(i[At].data[o+8],i)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Z0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(n,i,o){let c,f;"number"==typeof o?c=o:null!=o&&(c=o.index,f=o.injector);const T=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(T,c,false),T}createComponent(n,i,o,c,f){const _=n&&!function Sa(t){return"function"==typeof t}(n);let T;if(_)T=i;else{const gt=i||{};T=gt.index,o=gt.injector,c=gt.projectableNodes,f=gt.environmentInjector||gt.ngModuleRef}const C=_?n:new Od(wn(n)),x=o||this.parentInjector;if(!f&&null==C.ngModule){const Pt=(_?x:this.parentInjector).get(vo,null);Pt&&(f=Pt)}wn(C.componentType??{});const De=C.create(x,c,null,f);return this.insertImpl(De.hostView,T,false),De}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const c=n._lView;if(function Vo(t){return bn(t[Bn])}(c)){const C=this.indexOf(n);if(-1!==C)this.detach(C);else{const x=c[Bn],$=new J0(x,x[br],x[Bn]);$.detach($.indexOf(n))}}const _=this._adjustIndex(i),T=this._lContainer;return GA(T,c,_,!o),n.attachToViewContainerRef(),uu(XI(T),_,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Z0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=He(this._lContainer,i);o&&(Bc(XI(this._lContainer),i),Et(o[At],o))}detach(n){const i=this._adjustIndex(n,-1),o=He(this._lContainer,i);return o&&null!=Bc(XI(this._lContainer),i)?new xd(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function Z0(t){return t[8]}function XI(t){return t[8]||(t[8]=[])}function eT(t,n){let i;const o=n[t.index];return bn(o)?i=o:(i=xp(o,n,null,t),n[t.index]=i,Op(n,i)),tT(i,n,t,o),new J0(i,t,n)}let tT=function nT(t,n,i,o){if(t[Ci])return;let c;c=8&i.type?Lt(o):function nD(t,n){const i=t[Gt],o=i.createComment(""),c=ci(n,t);return yo(i,tl(i,c),o,function fd(t,n){return t.nextSibling(n)}(i,c),!1),o}(n,i),t[Ci]=c};class JI{constructor(n){this.queryList=n,this.matches=null}clone(){return new JI(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZI{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new ZI(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==lT(n,i).matches&&this.queries[i].setDirty()}}class rT{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class eE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new eE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class tE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new tE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,sD(i,f)),this.matchTNodeWithReadOption(n,i,Fl(i,n,f,!1,!1))}else o===o_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Fl(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===Yo||c===yv||c===o_&&4&i.type)this.addMatch(i.index,-2);else{const f=Fl(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function sD(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function aD(t,n,i,o){return-1===i?function oD(t,n){return 11&t.type?$h(t,n):4&t.type?mv(t,n):null}(n,t):-2===i?function uD(t,n,i){return i===Yo?$h(n,t):i===o_?mv(n,t):i===yv?eT(n,t):void 0}(t,n,o):Li(t,t[At],i,n)}function iT(t,n,i,o){const c=n[xi].queries[o];if(null===c.matches){const f=t.data,_=i.matches,T=[];for(let C=0;C<_.length;C+=2){const x=_[C];T.push(x<0?null:aD(n,f[x],_[C+1],i.metadata.read))}c.matches=T}return c.matches}function nE(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const _=iT(t,n,c,i);for(let T=0;T<f.length;T+=2){const C=f[T];if(C>0)o.push(_[T/2]);else{const x=f[T+1],$=n[-C];for(let Q=Gn;Q<$.length;Q++){const he=$[Q];he[Rr]===he[Bn]&&nE(he[At],he,x,o)}if(null!==$[Po]){const Q=$[Po];for(let he=0;he<Q.length;he++){const De=Q[he];nE(De[At],De,x,o)}}}}}return o}function sT(t){const n=ot(),i=xn(),o=Vl();E(o+1);const c=lT(i,o);if(t.dirty&&function wf(t){return 4==(4&t[cn])}(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?nE(i,n,o,[]):iT(i,n,c,o);t.reset(f,Ip),t.notifyOnChanges()}return!0}return!1}function oT(t,n,i,o){const c=xn();if(c.firstCreatePass){const f=Pn();(function cT(t,n,i){null===t.queries&&(t.queries=new eE),t.queries.track(new tE(n,i))})(c,new rT(n,i,o),f.index),function dD(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}!function uT(t,n,i){const o=new YI(4==(4&i));(function fI(t,n,i,o){const c=yy(n);c.push(i),t.firstCreatePass&&ym(t).push(o,c.length-1)})(t,n,o,o.destroy),null===n[xi]&&(n[xi]=new ZI),n[xi].queries.push(new JI(o))}(c,ot(),i)}function aT(){return function lD(t,n){return t[xi].queries[n].queryList}(ot(),Vl())}function lT(t,n){return t.queries.getByIndex(n)}function rE(t){return!!kr(t)}const ST=new Ce("Application Initializer");let uE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=vt(ST,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const f=c();if(Om(f))i.push(f);else if(df(f)){const _=new Promise((T,C)=>{f.subscribe({complete:T,error:C})});i.push(_)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),bT=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const Iv=new Ce("LocaleId",{providedIn:"root",factory:()=>vt(Iv,qt.Optional|qt.SkipSelf)||function xD(){return typeof $localize<"u"&&$localize.locale||ug}()}),OD=new Ce("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let RT=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new fe.t(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class LD{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let VD=(()=>{class t{compileModuleSync(i){return new qI(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=xa(kr(i).declarations).reduce((_,T)=>{const C=wn(T);return C&&_.push(new Od(C)),_},[]);return new LD(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const xT=new Ce(""),OT=new Ce("");let dE,sC=(()=>{class t{constructor(i,o,c){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dE||(function oC(t){dE=t}(c),c.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ri.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,c){return[]}static{this.\u0275fac=function(o){return new(o||t)(ct(ri),ct(kT),ct(OT))}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac})}}return t})(),kT=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return dE?.findTestabilityInTree(this,i,o)??null}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Xd=null;const LT=new Ce("AllowMultipleToken"),hE=new Ce("PlatformDestroyListeners"),fE=new Ce("appBootstrapListener");class cC{constructor(n,i){this.name=n,this.token=i}}function UT(t,n,i=[]){const o=`Platform: ${n}`,c=new Ce(o);return(f=[])=>{let _=pE();if(!_||_.injector.get(LT,!1)){const T=[...i,...f,{provide:c,useValue:!0}];t?t(T):function lC(t){if(Xd&&!Xd.get(LT,!1))throw new Ae(400,!1);(function VT(){!function wc(t){xu=t}(()=>{throw new Ae(600,!1)})})(),Xd=t;const n=t.get(jT);(function FT(t){t.get(O_,null)?.forEach(i=>i())})(t)}(function BT(t=[],n){return Eo.create({name:n,providers:[{provide:_d,useValue:"platform"},{provide:hE,useValue:new Set([()=>Xd=null])},...t]})}(T,o))}return function hC(t){const n=pE();if(!n)throw new Ae(401,!1);return n}()}}function pE(){return Xd?.get(jT)??null}let jT=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const c=function fC(t="zone.js",n){return"noop"===t?new iI:"zone.js"===t?new ri(n):t}(o?.ngZone,function $T(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return c.run(()=>{const f=function mA(t,n,i){return new KI(t,n,i)}(i.moduleType,this.injector,function KT(t){return[{provide:ri,useFactory:t},{provide:Na,multi:!0,useFactory:()=>{const n=vt(gC,{optional:!0});return()=>n.initialize()}},{provide:WT,useFactory:pC},{provide:K_,useFactory:Qh}]}(()=>c)),_=f.injector.get(Xo,null);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:C=>{_.handleError(C)}});f.onDestroy(()=>{Tv(this._modules,f),T.unsubscribe()})}),function HT(t,n,i){try{const o=i();return Om(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(_,c,()=>{const T=f.injector.get(uE);return T.runInitializers(),T.donePromise.then(()=>(function a0(t){ae(t,"Expected localeId to be defined"),"string"==typeof t&&(o0=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Iv,ug)||ug),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const c=zT({},o);return function aC(t,n,i){const o=new qI(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(dg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new Ae(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(hE,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(o){return new(o||t)(ct(Eo))}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function zT(t,n){return Array.isArray(n)?n.reduce(zT,t):{...t,...n}}let dg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=vt(WT),this.zoneIsStable=vt(K_),this.componentTypes=[],this.components=[],this.isStable=vt(RT).hasPendingTasks.pipe((0,je.n)(i=>i?(0,le.of)(!1):this.zoneIsStable),(0,Se.F)(),(0,_e.u)()),this._injector=vt(vo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const c=i instanceof Yv;if(!this._injector.get(uE).done)throw!c&&to(i),new Ae(405,!1);let _;_=c?i:this._injector.get(Js).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const T=function uC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(Ef),x=_.create(Eo.NULL,[],o||_.selector,T),$=x.location.nativeElement,Q=x.injector.get(xT,null);return Q?.registerApplication($),x.onDestroy(()=>{this.detachView(x.hostView),Tv(this.components,x),Q?.unregisterApplication($)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;Tv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(fE,[]);o.push(...this._bootstrapListeners),o.forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Tv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ae(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const WT=new Ce("",{providedIn:"root",factory:()=>vt(Xo).handleError.bind(void 0)});function pC(){const t=vt(ri),n=vt(Xo);return i=>t.runOutsideAngular(()=>n.handleError(i))}let gC=(()=>{class t{constructor(){this.zone=vt(ri),this.applicationRef=vt(dg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=tn({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _C(){return!1}let yC=(()=>{class t{static{this.__NG_ELEMENT_ID__=vC}}return t})();function vC(t){return function IC(t,n,i){if(Fr(t)&&!i){const o=wr(t.index,n);return new xd(o,o)}return 47&t.type?new xd(n[ur],n):null}(Pn(),ot(),16==(16&t))}class JT{constructor(){}supports(n){return kt(n)}create(n){return new DC(n)}}const AC=(t,n)=>n;class DC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||AC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<ew(o,c,f)?i:o,T=ew(_,c,f),C=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{f||(f=[]);const x=T-c,$=C-c;if(x!=$){for(let he=0;he<x;he++){const De=he<f.length?f[he]:f[he]=0,Ze=De+he;$<=Ze&&Ze<x&&(f[he]=De+1)}f[_.previousIndex]=$-x}}T!==C&&n(_,T,C)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!kt(n))throw new Ae(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let T=0;T<this.length;T++)f=n[T],_=this._trackByFn(T,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,T)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,T),o=!0),i=i._next}else c=0,function Tt(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,T=>{_=this._trackByFn(c,T),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,T,_,c)),Object.is(i.item,T)||this._addIdentityChange(i,T)):(i=this._mismatch(i,T,_,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new CC(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new ZT),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class ZT{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new SC,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ew(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class tw{constructor(){}supports(n){return n instanceof Map||zt(n)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||zt(n)))throw new Ae(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nw(){return new vE([new JT])}let vE=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:nw})}constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||nw()),deps:[[t,new Hc,new Xu]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new Ae(901,!1)}}return t})();function rw(){return new IE([new tw])}let IE=(()=>{class t{static{this.\u0275prov=tn({token:t,providedIn:"root",factory:rw})}constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||rw()),deps:[[t,new Hc,new Xu]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new Ae(901,!1)}}return t})();const NC=UT(null,"core",[]);let xC=(()=>{class t{constructor(i){}static{this.\u0275fac=function(o){return new(o||t)(ct(dg))}}static{this.\u0275mod=oa({type:t})}static{this.\u0275inj=gn({})}}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t){const n=wn(t);if(!n)return null;const i=new Od(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},8515:(Rt,Ue,U)=>{U.d(Ue,{Qe:()=>Py,cM:()=>My});var I=U(177),Y=U(7705),oe=U(1825),q=U(9253),le=(U(7955),U(1413)),_e=U(7673),je=U(1985),Se=U(8455),J=U(7786),Z=U(941),pe=U(5558),Ke=U(6354),qe=U(6129);class _t extends le.B{constructor(e=1/0,r=1/0,s=qe.U){super(),this._bufferSize=e,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,r)}next(e){const{isStopped:r,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:d,_windowTime:g}=this;r||(s.push(e),!u&&s.push(d.now()+g)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:u}=this,d=u.slice();for(let g=0;g<d.length&&!e.closed;g+=s?1:2)e.next(d[g]);return this._checkFinalizedStatuses(e),r}_trimBuffer(){const{_bufferSize:e,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:u}=this,d=(u?1:2)*e;if(e<1/0&&d<s.length&&s.splice(0,s.length-d),!u){const g=r.now();let w=0;for(let b=1;b<s.length&&s[b]<=g;b+=2)w=b;w&&s.splice(0,w+1)}}}var it=U(7647);function yt(a,e,r){let s,u=!1;return a&&"object"==typeof a?({bufferSize:s=1/0,windowTime:e=1/0,refCount:u=!1,scheduler:r}=a):s=a??1/0,(0,it.u)({connector:()=>new _t(s,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}var lt=U(1594),Bt=U(8071);function Ft(a,e){return(0,Bt.T)(e)?(0,pe.n)(()=>a,e):(0,pe.n)(()=>a)}var Ae=U(6745),ze=U(5964),Te=U(7935);const Qe=new Y.nKC("angularfire2.auth.use-emulator"),ft=new Y.nKC("angularfire2.auth.settings"),xt=new Y.nKC("angularfire2.auth.tenant-id"),Be=new Y.nKC("angularfire2.auth.langugage-code"),Zt=new Y.nKC("angularfire2.auth.use-device-language"),Fn=new Y.nKC("angularfire.auth.persistence"),pn=(a,e,r,s,u,d,g,w)=>(0,q.BM)(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{const b=e.runOutsideAngular(()=>a.auth());if(r&&b.useEmulator(...r),s&&(b.tenantId=s),b.languageCode=u,d&&b.useDeviceLanguage(),g)for(const[O,j]of Object.entries(g))b.settings[O]=j;return w&&b.setPersistence(w),b},[r,s,u,d,g,w]);let lr=(()=>{class a{authState;idToken;user;idTokenResult;credential;constructor(r,s,u,d,g,w,b,O,j,K,se,Me){const Je=new le.B,dt=(0,_e.of)(void 0).pipe((0,Z.Q)(g.outsideAngular),(0,pe.n)(()=>d.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,7955)))),(0,Ke.T)(()=>(0,q.iB)(r,d,s)),(0,Ke.T)(st=>pn(st,d,w,O,j,K,b,se)),yt({bufferSize:1,refCount:!1}));if((0,I.Vy)(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,_e.of)(null);else{dt.pipe((0,lt.$)()).subscribe();const st=dt.pipe((0,pe.n)(Tt=>Tt.getRedirectResult().then(zt=>zt,()=>null)),oe.U0,yt({bufferSize:1,refCount:!1})),kt=dt.pipe((0,pe.n)(Tt=>new je.c(zt=>({unsubscribe:d.runOutsideAngular(()=>Tt.onAuthStateChanged(yn=>zt.next(yn),yn=>zt.error(yn),()=>zt.complete()))})))),Ht=dt.pipe((0,pe.n)(Tt=>new je.c(zt=>({unsubscribe:d.runOutsideAngular(()=>Tt.onIdTokenChanged(yn=>zt.next(yn),yn=>zt.error(yn),()=>zt.complete()))}))));this.authState=st.pipe(Ft(kt),(0,Ae._)(g.outsideAngular),(0,Z.Q)(g.insideAngular)),this.user=st.pipe(Ft(Ht),(0,Ae._)(g.outsideAngular),(0,Z.Q)(g.insideAngular)),this.idToken=this.user.pipe((0,pe.n)(Tt=>Tt?(0,Se.H)(Tt.getIdToken()):(0,_e.of)(null))),this.idTokenResult=this.user.pipe((0,pe.n)(Tt=>Tt?(0,Se.H)(Tt.getIdTokenResult()):(0,_e.of)(null))),this.credential=(0,J.h)(st,Je,this.authState.pipe((0,ze.p)(Tt=>!Tt))).pipe((0,Ke.T)(Tt=>Tt?.user?Tt:null),(0,Ae._)(g.outsideAngular),(0,Z.Q)(g.insideAngular))}return(0,q.Gt)(this,dt,d,{spy:{apply:(st,kt,Ht)=>{(st.startsWith("signIn")||st.startsWith("createUser"))&&Ht.then(Tt=>Je.next(Tt))}}})}static \u0275fac=function(s){return new(s||a)(Y.KVO(q.rx),Y.KVO(q.uP,8),Y.KVO(Y.Agw),Y.KVO(Y.SKi),Y.KVO(oe.u0),Y.KVO(Qe,8),Y.KVO(ft,8),Y.KVO(xt,8),Y.KVO(Be,8),Y.KVO(Zt,8),Y.KVO(Fn,8),Y.KVO(oe.Jv,8))};static \u0275prov=Y.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var en=U(3236),Xt=U(9172),de=U(9974),we=U(4360);function ke(){return(0,de.N)((a,e)=>{let r,s=!1;a.subscribe((0,we._)(e,u=>{const d=r;r=u,s&&e.next([d,u]),s=!0}))})}var gn,ir,Ne=U(2816),tt=U(3294),Ye=U(3345),ae=U(467),mt=U(7852),mr=U(1362),Ut=U(8041),Mt=U(1076),tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(ge,te,ce){ce||(ce=0);var ye=Array(16);if("string"==typeof te)for(var ve=0;16>ve;++ve)ye[ve]=te.charCodeAt(ce++)|te.charCodeAt(ce++)<<8|te.charCodeAt(ce++)<<16|te.charCodeAt(ce++)<<24;else for(ve=0;16>ve;++ve)ye[ve]=te[ce++]|te[ce++]<<8|te[ce++]<<16|te[ce++]<<24;var Ve=ge.g[3],ue=(te=ge.g[0])+(Ve^(ce=ge.g[1])&((ve=ge.g[2])^Ve))+ye[0]+3614090360&4294967295;ue=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=(ce=(ve=(Ve=(te=ce+(ue<<7&4294967295|ue>>>25))+((ue=Ve+(ve^te&(ce^ve))+ye[1]+3905402710&4294967295)<<12&4294967295|ue>>>20))+((ue=ve+(ce^Ve&(te^ce))+ye[2]+606105819&4294967295)<<17&4294967295|ue>>>15))+((ue=ce+(te^ve&(Ve^te))+ye[3]+3250441966&4294967295)<<22&4294967295|ue>>>10))+((ue=te+(Ve^ce&(ve^Ve))+ye[4]+4118548399&4294967295)<<7&4294967295|ue>>>25))+((ue=Ve+(ve^te&(ce^ve))+ye[5]+1200080426&4294967295)<<12&4294967295|ue>>>20))+((ue=ve+(ce^Ve&(te^ce))+ye[6]+2821735955&4294967295)<<17&4294967295|ue>>>15))+((ue=ce+(te^ve&(Ve^te))+ye[7]+4249261313&4294967295)<<22&4294967295|ue>>>10))+((ue=te+(Ve^ce&(ve^Ve))+ye[8]+1770035416&4294967295)<<7&4294967295|ue>>>25))+((ue=Ve+(ve^te&(ce^ve))+ye[9]+2336552879&4294967295)<<12&4294967295|ue>>>20))+((ue=ve+(ce^Ve&(te^ce))+ye[10]+4294925233&4294967295)<<17&4294967295|ue>>>15))+((ue=ce+(te^ve&(Ve^te))+ye[11]+2304563134&4294967295)<<22&4294967295|ue>>>10))+((ue=te+(Ve^ce&(ve^Ve))+ye[12]+1804603682&4294967295)<<7&4294967295|ue>>>25))+((ue=Ve+(ve^te&(ce^ve))+ye[13]+4254626195&4294967295)<<12&4294967295|ue>>>20))+((ue=ve+(ce^Ve&(te^ce))+ye[14]+2792965006&4294967295)<<17&4294967295|ue>>>15))+((ue=ce+(te^ve&(Ve^te))+ye[15]+1236535329&4294967295)<<22&4294967295|ue>>>10))+((ue=te+(ve^Ve&(ce^ve))+ye[1]+4129170786&4294967295)<<5&4294967295|ue>>>27))+((ue=Ve+(ce^ve&(te^ce))+ye[6]+3225465664&4294967295)<<9&4294967295|ue>>>23))+((ue=ve+(te^ce&(Ve^te))+ye[11]+643717713&4294967295)<<14&4294967295|ue>>>18))+((ue=ce+(Ve^te&(ve^Ve))+ye[0]+3921069994&4294967295)<<20&4294967295|ue>>>12))+((ue=te+(ve^Ve&(ce^ve))+ye[5]+3593408605&4294967295)<<5&4294967295|ue>>>27))+((ue=Ve+(ce^ve&(te^ce))+ye[10]+38016083&4294967295)<<9&4294967295|ue>>>23))+((ue=ve+(te^ce&(Ve^te))+ye[15]+3634488961&4294967295)<<14&4294967295|ue>>>18))+((ue=ce+(Ve^te&(ve^Ve))+ye[4]+3889429448&4294967295)<<20&4294967295|ue>>>12))+((ue=te+(ve^Ve&(ce^ve))+ye[9]+568446438&4294967295)<<5&4294967295|ue>>>27))+((ue=Ve+(ce^ve&(te^ce))+ye[14]+3275163606&4294967295)<<9&4294967295|ue>>>23))+((ue=ve+(te^ce&(Ve^te))+ye[3]+4107603335&4294967295)<<14&4294967295|ue>>>18))+((ue=ce+(Ve^te&(ve^Ve))+ye[8]+1163531501&4294967295)<<20&4294967295|ue>>>12))+((ue=te+(ve^Ve&(ce^ve))+ye[13]+2850285829&4294967295)<<5&4294967295|ue>>>27))+((ue=Ve+(ce^ve&(te^ce))+ye[2]+4243563512&4294967295)<<9&4294967295|ue>>>23))+((ue=ve+(te^ce&(Ve^te))+ye[7]+1735328473&4294967295)<<14&4294967295|ue>>>18))+((ue=ce+(Ve^te&(ve^Ve))+ye[12]+2368359562&4294967295)<<20&4294967295|ue>>>12))+((ue=te+(ce^ve^Ve)+ye[5]+4294588738&4294967295)<<4&4294967295|ue>>>28))+((ue=Ve+(te^ce^ve)+ye[8]+2272392833&4294967295)<<11&4294967295|ue>>>21))+((ue=ve+(Ve^te^ce)+ye[11]+1839030562&4294967295)<<16&4294967295|ue>>>16))+((ue=ce+(ve^Ve^te)+ye[14]+4259657740&4294967295)<<23&4294967295|ue>>>9))+((ue=te+(ce^ve^Ve)+ye[1]+2763975236&4294967295)<<4&4294967295|ue>>>28))+((ue=Ve+(te^ce^ve)+ye[4]+1272893353&4294967295)<<11&4294967295|ue>>>21))+((ue=ve+(Ve^te^ce)+ye[7]+4139469664&4294967295)<<16&4294967295|ue>>>16))+((ue=ce+(ve^Ve^te)+ye[10]+3200236656&4294967295)<<23&4294967295|ue>>>9))+((ue=te+(ce^ve^Ve)+ye[13]+681279174&4294967295)<<4&4294967295|ue>>>28))+((ue=Ve+(te^ce^ve)+ye[0]+3936430074&4294967295)<<11&4294967295|ue>>>21))+((ue=ve+(Ve^te^ce)+ye[3]+3572445317&4294967295)<<16&4294967295|ue>>>16))+((ue=ce+(ve^Ve^te)+ye[6]+76029189&4294967295)<<23&4294967295|ue>>>9))+((ue=te+(ce^ve^Ve)+ye[9]+3654602809&4294967295)<<4&4294967295|ue>>>28))+((ue=Ve+(te^ce^ve)+ye[12]+3873151461&4294967295)<<11&4294967295|ue>>>21))+((ue=ve+(Ve^te^ce)+ye[15]+530742520&4294967295)<<16&4294967295|ue>>>16))+((ue=ce+(ve^Ve^te)+ye[2]+3299628645&4294967295)<<23&4294967295|ue>>>9))+((ue=te+(ve^(ce|~Ve))+ye[0]+4096336452&4294967295)<<6&4294967295|ue>>>26))+((ue=Ve+(ce^(te|~ve))+ye[7]+1126891415&4294967295)<<10&4294967295|ue>>>22))+((ue=ve+(te^(Ve|~ce))+ye[14]+2878612391&4294967295)<<15&4294967295|ue>>>17))+((ue=ce+(Ve^(ve|~te))+ye[5]+4237533241&4294967295)<<21&4294967295|ue>>>11))+((ue=te+(ve^(ce|~Ve))+ye[12]+1700485571&4294967295)<<6&4294967295|ue>>>26))+((ue=Ve+(ce^(te|~ve))+ye[3]+2399980690&4294967295)<<10&4294967295|ue>>>22))+((ue=ve+(te^(Ve|~ce))+ye[10]+4293915773&4294967295)<<15&4294967295|ue>>>17))+((ue=ce+(Ve^(ve|~te))+ye[1]+2240044497&4294967295)<<21&4294967295|ue>>>11))+((ue=te+(ve^(ce|~Ve))+ye[8]+1873313359&4294967295)<<6&4294967295|ue>>>26))+((ue=Ve+(ce^(te|~ve))+ye[15]+4264355552&4294967295)<<10&4294967295|ue>>>22))+((ue=ve+(te^(Ve|~ce))+ye[6]+2734768916&4294967295)<<15&4294967295|ue>>>17))+((ue=ce+(Ve^(ve|~te))+ye[13]+1309151649&4294967295)<<21&4294967295|ue>>>11))+((Ve=(te=ce+((ue=te+(ve^(ce|~Ve))+ye[4]+4149444226&4294967295)<<6&4294967295|ue>>>26))+((ue=Ve+(ce^(te|~ve))+ye[11]+3174756917&4294967295)<<10&4294967295|ue>>>22))^((ve=Ve+((ue=ve+(te^(Ve|~ce))+ye[2]+718787259&4294967295)<<15&4294967295|ue>>>17))|~te))+ye[9]+3951481745&4294967295,ge.g[0]=ge.g[0]+te&4294967295,ge.g[1]=ge.g[1]+(ve+(ue<<21&4294967295|ue>>>11))&4294967295,ge.g[2]=ge.g[2]+ve&4294967295,ge.g[3]=ge.g[3]+Ve&4294967295}function g(ge,te){this.h=te;for(var ce=[],ye=!0,ve=ge.length-1;0<=ve;ve--){var Ve=0|ge[ve];ye&&Ve==te||(ce[ve]=Ve,ye=!1)}this.g=ce}(function e(ge,te){function ce(){}ce.prototype=te.prototype,ge.D=te.prototype,ge.prototype=new ce,ge.prototype.constructor=ge,ge.C=function(ye,ve,Ve){for(var ue=Array(arguments.length-2),Ps=2;Ps<arguments.length;Ps++)ue[Ps-2]=arguments[Ps];return te.prototype[ve].apply(ye,ue)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ge,te){void 0===te&&(te=ge.length);for(var ce=te-this.blockSize,ye=this.B,ve=this.h,Ve=0;Ve<te;){if(0==ve)for(;Ve<=ce;)u(this,ge,Ve),Ve+=this.blockSize;if("string"==typeof ge){for(;Ve<te;)if(ye[ve++]=ge.charCodeAt(Ve++),ve==this.blockSize){u(this,ye),ve=0;break}}else for(;Ve<te;)if(ye[ve++]=ge[Ve++],ve==this.blockSize){u(this,ye),ve=0;break}}this.h=ve,this.o+=te},s.prototype.v=function(){var ge=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ge[0]=128;for(var te=1;te<ge.length-8;++te)ge[te]=0;var ce=8*this.o;for(te=ge.length-8;te<ge.length;++te)ge[te]=255&ce,ce/=256;for(this.u(ge),ge=Array(16),te=ce=0;4>te;++te)for(var ye=0;32>ye;ye+=8)ge[ce++]=this.g[te]>>>ye&255;return ge};var w={};function b(ge){return-128<=ge&&128>ge?function d(ge,te){var ce=w;return Object.prototype.hasOwnProperty.call(ce,ge)?ce[ge]:ce[ge]=te(ge)}(ge,function(te){return new g([0|te],0>te?-1:0)}):new g([0|ge],0>ge?-1:0)}function O(ge){if(isNaN(ge)||!isFinite(ge))return K;if(0>ge)return st(O(-ge));for(var te=[],ce=1,ye=0;ge>=ce;ye++)te[ye]=ge/ce|0,ce*=4294967296;return new g(te,0)}var K=b(0),se=b(1),Me=b(16777216);function Je(ge){if(0!=ge.h)return!1;for(var te=0;te<ge.g.length;te++)if(0!=ge.g[te])return!1;return!0}function dt(ge){return-1==ge.h}function st(ge){for(var te=ge.g.length,ce=[],ye=0;ye<te;ye++)ce[ye]=~ge.g[ye];return new g(ce,~ge.h).add(se)}function kt(ge,te){return ge.add(st(te))}function Ht(ge,te){for(;(65535&ge[te])!=ge[te];)ge[te+1]+=ge[te]>>>16,ge[te]&=65535,te++}function Tt(ge,te){this.g=ge,this.h=te}function zt(ge,te){if(Je(te))throw Error("division by zero");if(Je(ge))return new Tt(K,K);if(dt(ge))return te=zt(st(ge),te),new Tt(st(te.g),st(te.h));if(dt(te))return te=zt(ge,st(te)),new Tt(st(te.g),te.h);if(30<ge.g.length){if(dt(ge)||dt(te))throw Error("slowDivide_ only works with positive integers.");for(var ce=se,ye=te;0>=ye.l(ge);)ce=yn(ce),ye=yn(ye);var ve=ln(ce,1),Ve=ln(ye,1);for(ye=ln(ye,2),ce=ln(ce,2);!Je(ye);){var ue=Ve.add(ye);0>=ue.l(ge)&&(ve=ve.add(ce),Ve=ue),ye=ln(ye,1),ce=ln(ce,1)}return te=kt(ge,ve.j(te)),new Tt(ve,te)}for(ve=K;0<=ge.l(te);){for(ce=Math.max(1,Math.floor(ge.m()/te.m())),ye=48>=(ye=Math.ceil(Math.log(ce)/Math.LN2))?1:Math.pow(2,ye-48),ue=(Ve=O(ce)).j(te);dt(ue)||0<ue.l(ge);)ue=(Ve=O(ce-=ye)).j(te);Je(Ve)&&(Ve=se),ve=ve.add(Ve),ge=kt(ge,ue)}return new Tt(ve,ge)}function yn(ge){for(var te=ge.g.length+1,ce=[],ye=0;ye<te;ye++)ce[ye]=ge.i(ye)<<1|ge.i(ye-1)>>>31;return new g(ce,ge.h)}function ln(ge,te){var ce=te>>5;te%=32;for(var ye=ge.g.length-ce,ve=[],Ve=0;Ve<ye;Ve++)ve[Ve]=0<te?ge.i(Ve+ce)>>>te|ge.i(Ve+ce+1)<<32-te:ge.i(Ve+ce);return new g(ve,ge.h)}(a=g.prototype).m=function(){if(dt(this))return-st(this).m();for(var ge=0,te=1,ce=0;ce<this.g.length;ce++){var ye=this.i(ce);ge+=(0<=ye?ye:4294967296+ye)*te,te*=4294967296}return ge},a.toString=function(ge){if(2>(ge=ge||10)||36<ge)throw Error("radix out of range: "+ge);if(Je(this))return"0";if(dt(this))return"-"+st(this).toString(ge);for(var te=O(Math.pow(ge,6)),ce=this,ye="";;){var ve=zt(ce,te).g,Ve=((0<(ce=kt(ce,ve.j(te))).g.length?ce.g[0]:ce.h)>>>0).toString(ge);if(Je(ce=ve))return Ve+ye;for(;6>Ve.length;)Ve="0"+Ve;ye=Ve+ye}},a.i=function(ge){return 0>ge?0:ge<this.g.length?this.g[ge]:this.h},a.l=function(ge){return dt(ge=kt(this,ge))?-1:Je(ge)?0:1},a.abs=function(){return dt(this)?st(this):this},a.add=function(ge){for(var te=Math.max(this.g.length,ge.g.length),ce=[],ye=0,ve=0;ve<=te;ve++){var Ve=ye+(65535&this.i(ve))+(65535&ge.i(ve)),ue=(Ve>>>16)+(this.i(ve)>>>16)+(ge.i(ve)>>>16);ye=ue>>>16,ce[ve]=(ue&=65535)<<16|(Ve&=65535)}return new g(ce,-2147483648&ce[ce.length-1]?-1:0)},a.j=function(ge){if(Je(this)||Je(ge))return K;if(dt(this))return dt(ge)?st(this).j(st(ge)):st(st(this).j(ge));if(dt(ge))return st(this.j(st(ge)));if(0>this.l(Me)&&0>ge.l(Me))return O(this.m()*ge.m());for(var te=this.g.length+ge.g.length,ce=[],ye=0;ye<2*te;ye++)ce[ye]=0;for(ye=0;ye<this.g.length;ye++)for(var ve=0;ve<ge.g.length;ve++){var Ve=this.i(ye)>>>16,ue=65535&this.i(ye),Ps=ge.i(ve)>>>16,La=65535&ge.i(ve);ce[2*ye+2*ve]+=ue*La,Ht(ce,2*ye+2*ve),ce[2*ye+2*ve+1]+=Ve*La,Ht(ce,2*ye+2*ve+1),ce[2*ye+2*ve+1]+=ue*Ps,Ht(ce,2*ye+2*ve+1),ce[2*ye+2*ve+2]+=Ve*Ps,Ht(ce,2*ye+2*ve+2)}for(ye=0;ye<te;ye++)ce[ye]=ce[2*ye+1]<<16|ce[2*ye];for(ye=te;ye<2*te;ye++)ce[ye]=0;return new g(ce,0)},a.A=function(ge){return zt(this,ge).h},a.and=function(ge){for(var te=Math.max(this.g.length,ge.g.length),ce=[],ye=0;ye<te;ye++)ce[ye]=this.i(ye)&ge.i(ye);return new g(ce,this.h&ge.h)},a.or=function(ge){for(var te=Math.max(this.g.length,ge.g.length),ce=[],ye=0;ye<te;ye++)ce[ye]=this.i(ye)|ge.i(ye);return new g(ce,this.h|ge.h)},a.xor=function(ge){for(var te=Math.max(this.g.length,ge.g.length),ce=[],ye=0;ye<te;ye++)ce[ye]=this.i(ye)^ge.i(ye);return new g(ce,this.h^ge.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,ir=$r.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=O,g.fromString=function j(ge,te){if(0==ge.length)throw Error("number format error: empty string");if(2>(te=te||10)||36<te)throw Error("radix out of range: "+te);if("-"==ge.charAt(0))return st(j(ge.substring(1),te));if(0<=ge.indexOf("-"))throw Error('number format error: interior "-" character');for(var ce=O(Math.pow(te,8)),ye=K,ve=0;ve<ge.length;ve+=8){var Ve=Math.min(8,ge.length-ve),ue=parseInt(ge.substring(ve,ve+Ve),te);8>Ve?(Ve=O(Math.pow(te,Ve)),ye=ye.j(Ve).add(O(ue))):ye=(ye=ye.j(ce)).add(O(ue))}return ye},gn=$r.Integer=g}).apply(typeof tn<"u"?tn:typeof self<"u"?self:typeof window<"u"?window:{});var Er,Nr,Ei,Vr,Zn,qt,hn,Kt,Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nt={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,L){return p==Array.prototype||p==Object.prototype||(p[R]=L.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Dn&&Dn];for(var R=0;R<p.length;++R){var L=p[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}(this);!function u(p,R){if(R)e:{var L=s;p=p.split(".");for(var W=0;W<p.length-1;W++){var be=p[W];if(!(be in L))break e;L=L[be]}(R=R(W=L[p=p[p.length-1]]))!=W&&null!=R&&e(L,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function d(p,R){p instanceof String&&(p+="");var L=0,W=!1,be={next:function(){if(!W&&L<p.length){var $e=L++;return{value:R($e,p[$e]),done:!1}}return W=!0,{done:!0,value:void 0}}};return be[Symbol.iterator]=function(){return be},be}(this,function(R,L){return L})}});var g=g||{},w=this||self;function b(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function O(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function j(p,R,L){return p.call.apply(p.bind,arguments)}function K(p,R,L){if(!p)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,W),p.apply(R,be)}}return function(){return p.apply(R,arguments)}}function se(p,R,L){return(se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?j:K).apply(null,arguments)}function Me(p,R){var L=Array.prototype.slice.call(arguments,1);return function(){var W=L.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function Je(p,R){function L(){}L.prototype=R.prototype,p.aa=R.prototype,p.prototype=new L,p.prototype.constructor=p,p.Qb=function(W,be,$e){for(var Ct=Array(arguments.length-2),Ar=2;Ar<arguments.length;Ar++)Ct[Ar-2]=arguments[Ar];return R.prototype[be].apply(W,Ct)}}function dt(p){const R=p.length;if(0<R){const L=Array(R);for(let W=0;W<R;W++)L[W]=p[W];return L}return[]}function st(p,R){for(let L=1;L<arguments.length;L++){const W=arguments[L];if(b(W)){const be=p.length||0,$e=W.length||0;p.length=be+$e;for(let Ct=0;Ct<$e;Ct++)p[be+Ct]=W[Ct]}else p.push(W)}}function Ht(p){return/^[\s\xa0]*$/.test(p)}function Tt(){var p=w.navigator;return p&&(p=p.userAgent)?p:""}function zt(p){return zt[" "](p),p}zt[" "]=function(){};var yn=!(-1==Tt().indexOf("Gecko")||-1!=Tt().toLowerCase().indexOf("webkit")&&-1==Tt().indexOf("Edge")||-1!=Tt().indexOf("Trident")||-1!=Tt().indexOf("MSIE")||-1!=Tt().indexOf("Edge"));function ln(p,R,L){for(const W in p)R.call(L,p[W],W,p)}function te(p){const R={};for(const L in p)R[L]=p[L];return R}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(p,R){let L,W;for(let be=1;be<arguments.length;be++){for(L in W=arguments[be],W)p[L]=W[L];for(let $e=0;$e<ce.length;$e++)L=ce[$e],Object.prototype.hasOwnProperty.call(W,L)&&(p[L]=W[L])}}function ve(p){var R=1;p=p.split(":");const L=[];for(;0<R&&p.length;)L.push(p.shift()),R--;return p.length&&L.push(p.join(":")),L}function Ve(p){w.setTimeout(()=>{throw p},0)}function ue(){var p=pc;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var La=new class kt{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new kd,p=>p.reset());class kd{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Va,Fa=!1,pc=new class Ps{constructor(){this.h=this.g=null}add(R,L){const W=La.get();W.set(R,L),this.h?this.h.next=W:this.g=W,this.h=W}},El=()=>{const p=w.Promise.resolve(void 0);Va=()=>{p.then(Ld)}};var Ld=()=>{for(var p;p=ue();){try{p.h.call(p.g)}catch(L){Ve(L)}var R=La;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}Fa=!1};function Du(){this.s=this.s,this.C=this.C}function Fi(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}Du.prototype.s=!1,Du.prototype.ma=function(){this.s||(this.s=!0,this.N())},Du.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Fi.prototype.h=function(){this.defaultPrevented=!0};var Ny=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const L=()=>{};w.addEventListener("test",L,R),w.removeEventListener("test",L,R)}catch{}return p}();function Vd(p,R){if(Fi.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var L=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(yn){e:{try{zt(R.nodeName);var be=!0;break e}catch{}be=!1}be||(R=null)}}else"mouseover"==L?R=p.fromElement:"mouseout"==L&&(R=p.toElement);this.relatedTarget=R,W?(this.clientX=void 0!==W.clientX?W.clientX:W.pageX,this.clientY=void 0!==W.clientY?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:xy[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Vd.aa.h.call(this)}}Je(Vd,Fi);var xy={2:"touch",3:"pen",4:"mouse"};Vd.prototype.h=function(){Vd.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Fd="closure_listenable_"+(1e6*Math.random()|0),Oy=0;function ky(p,R,L,W,be){this.listener=p,this.proxy=null,this.src=R,this.type=L,this.capture=!!W,this.ha=be,this.key=++Oy,this.da=this.fa=!1}function tf(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ud(p){this.src=p,this.g={},this.h=0}function Tm(p,R){var L=R.type;if(L in p.g){var $e,W=p.g[L],be=Array.prototype.indexOf.call(W,R,void 0);($e=0<=be)&&Array.prototype.splice.call(W,be,1),$e&&(tf(R),0==p.g[L].length&&(delete p.g[L],p.h--))}}function Ly(p,R,L,W){for(var be=0;be<p.length;++be){var $e=p[be];if(!$e.da&&$e.listener==R&&$e.capture==!!L&&$e.ha==W)return be}return-1}Ud.prototype.add=function(p,R,L,W,be){var $e=p.toString();(p=this.g[$e])||(p=this.g[$e]=[],this.h++);var Ct=Ly(p,R,W,be);return-1<Ct?(R=p[Ct],L||(R.fa=!1)):((R=new ky(R,this.src,$e,!!W,be)).fa=L,p.push(R)),R};var Vy="closure_lm_"+(1e6*Math.random()|0),wm={};function Fy(p,R,L,W,be){if(W&&W.once)return bI(p,R,L,W,be);if(Array.isArray(R)){for(var $e=0;$e<R.length;$e++)Fy(p,R[$e],L,W,be);return null}return L=Bd(L),p&&p[Fd]?p.K(R,L,O(W)?!!W.capture:!!W,be):CI(p,R,L,!1,W,be)}function CI(p,R,L,W,be,$e){if(!R)throw Error("Invalid event type");var Ct=O(be)?!!be.capture:!!be,Ar=Tl(p);if(Ar||(p[Vy]=Ar=new Ud(p)),(L=Ar.add(R,L,W,Ct,$e)).proxy)return L;if(W=function SI(){const R=Dm;return function p(L){return R.call(p.src,p.listener,L)}}(),L.proxy=W,W.src=p,W.listener=L,p.addEventListener)Ny||(be=Ct),void 0===be&&(be=!1),p.addEventListener(R.toString(),W,be);else if(p.attachEvent)p.attachEvent(By(R.toString()),W);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(W)}return L}function bI(p,R,L,W,be){if(Array.isArray(R)){for(var $e=0;$e<R.length;$e++)bI(p,R[$e],L,W,be);return null}return L=Bd(L),p&&p[Fd]?p.L(R,L,O(W)?!!W.capture:!!W,be):CI(p,R,L,!0,W,be)}function Uy(p,R,L,W,be){if(Array.isArray(R))for(var $e=0;$e<R.length;$e++)Uy(p,R[$e],L,W,be);else W=O(W)?!!W.capture:!!W,L=Bd(L),p&&p[Fd]?(p=p.i,(R=String(R).toString())in p.g&&-1<(L=Ly($e=p.g[R],L,W,be))&&(tf($e[L]),Array.prototype.splice.call($e,L,1),0==$e.length&&(delete p.g[R],p.h--))):p&&(p=Tl(p))&&(R=p.g[R.toString()],p=-1,R&&(p=Ly(R,L,W,be)),(L=-1<p?R[p]:null)&&Am(L))}function Am(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[Fd])Tm(R.i,p);else{var L=p.type,W=p.proxy;R.removeEventListener?R.removeEventListener(L,W,p.capture):R.detachEvent?R.detachEvent(By(L),W):R.addListener&&R.removeListener&&R.removeListener(W),(L=Tl(R))?(Tm(L,p),0==L.h&&(L.src=null,R[Vy]=null)):tf(p)}}}function By(p){return p in wm?wm[p]:wm[p]="on"+p}function Dm(p,R){if(p.da)p=!0;else{R=new Vd(R,this);var L=p.listener,W=p.ha||p.src;p.fa&&Am(p),p=L.call(W,R)}return p}function Tl(p){return(p=p[Vy])instanceof Ud?p:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bd(p){return"function"==typeof p?p:(p[nf]||(p[nf]=function(R){return p.handleEvent(R)}),p[nf])}function Ui(){Du.call(this),this.i=new Ud(this),this.M=this,this.F=null}function Ii(p,R){var L,W=p.F;if(W)for(L=[];W;W=W.F)L.push(W);if(p=p.M,W=R.type||R,"string"==typeof R)R=new Fi(R,p);else if(R instanceof Fi)R.target=R.target||p;else{var be=R;ye(R=new Fi(W,p),be)}if(be=!0,L)for(var $e=L.length-1;0<=$e;$e--){var Ct=R.g=L[$e];be=rf(Ct,W,!0,R)&&be}if(be=rf(Ct=R.g=p,W,!0,R)&&be,be=rf(Ct,W,!1,R)&&be,L)for($e=0;$e<L.length;$e++)be=rf(Ct=R.g=L[$e],W,!1,R)&&be}function rf(p,R,L,W){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var be=!0,$e=0;$e<R.length;++$e){var Ct=R[$e];if(Ct&&!Ct.da&&Ct.capture==L){var Ar=Ct.listener,Bi=Ct.ha||Ct.src;Ct.fa&&Tm(p.i,Ct),be=!1!==Ar.call(Bi,W)&&be}}return be&&!W.defaultPrevented}function jy(p,R,L){if("function"==typeof p)L&&(p=se(p,L));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=se(p.handleEvent,p)}return 2147483647<Number(R)?-1:w.setTimeout(p,R||0)}function jd(p){p.g=jy(()=>{p.g=null,p.i&&(p.i=!1,jd(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}Je(Ui,Du),Ui.prototype[Fd]=!0,Ui.prototype.removeEventListener=function(p,R,L,W){Uy(this,p,R,L,W)},Ui.prototype.N=function(){if(Ui.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var L=p.g[R],W=0;W<L.length;W++)tf(L[W]);delete p.g[R],p.h--}}this.F=null},Ui.prototype.K=function(p,R,L,W){return this.i.add(String(p),R,!1,L,W)},Ui.prototype.L=function(p,R,L,W){return this.i.add(String(p),R,!0,L,W)};class RI extends Du{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:jd(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sf(p){Du.call(this),this.h=p,this.g={}}Je(sf,Du);var $y=[];function Hy(p){ln(p.g,function(R,L){this.g.hasOwnProperty(L)&&Am(R)},p),p.g={}}sf.prototype.N=function(){sf.aa.N.call(this),Hy(this)},sf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var af=w.JSON.stringify,Fp=w.JSON.parse,Up=class{stringify(p){return w.JSON.stringify(p,void 0)}parse(p){return w.JSON.parse(p,void 0)}};function zy(){}function Wy(){}zy.prototype.h=null;var wl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cm(){Fi.call(this,"d")}function Bp(){Fi.call(this,"c")}Je(Cm,Fi),Je(Bp,Fi);var Al={},Ky=null;function uf(){return Ky=Ky||new Ui}function Sm(p){Fi.call(this,Al.La,p)}function $d(p){const R=uf();Ii(R,new Sm(R))}function qy(p,R){Fi.call(this,Al.STAT_EVENT,p),this.stat=R}function vs(p){const R=uf();Ii(R,new qy(R,p))}function Qy(p,R){Fi.call(this,Al.Ma,p),this.size=R}function cf(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){p()},R)}function Dl(){this.g=!0}function Cu(p,R,L,W){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function Rm(p,R){if(!p.g)return R;if(!R)return null;try{var L=JSON.parse(R);if(L)for(p=0;p<L.length;p++)if(Array.isArray(L[p])){var W=L[p];if(!(2>W.length)){var be=W[1];if(Array.isArray(be)&&!(1>be.length)){var $e=be[0];if("noop"!=$e&&"stop"!=$e&&"close"!=$e)for(var Ct=1;Ct<be.length;Ct++)be[Ct]=""}}}return af(L)}catch{return R}}(p,L)+(W?" "+W:"")})}Al.La="serverreachability",Je(Sm,Fi),Al.STAT_EVENT="statevent",Je(qy,Fi),Al.Ma="timingevent",Je(Qy,Fi),Dl.prototype.xa=function(){this.g=!1},Dl.prototype.info=function(){};var Pm,lf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function $p(){}function Ua(p,R,L,W){this.j=p,this.i=R,this.l=L,this.R=W||1,this.U=new sf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hp}function Hp(){this.i=null,this.g="",this.h=!1}Je($p,zy),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},Pm=new $p;var Mm={},zp={};function Nm(p,R,L){p.L=1,p.v=Hd(Ba(R)),p.m=L,p.P=!0,Xy(p,null)}function Xy(p,R){p.F=Date.now(),df(p),p.A=Ba(p.v);var L=p.A,W=p.R;Array.isArray(W)||(W=[String(W)]),sv(L.i,"t",W),p.C=0,L=p.j.J,p.h=new Hp,p.g=qm(p.j,L?R:null,!p.m),0<p.O&&(p.M=new RI(se(p.Y,p,p.g),p.O)),R=p.U,L=p.g,W=p.ca;var be="readystatechange";Array.isArray(be)||(be&&($y[0]=be.toString()),be=$y);for(var $e=0;$e<be.length;$e++){var Ct=Fy(L,be[$e],W||R.handleEvent,!1,R.h||R);if(!Ct)break;R.g[Ct.key]=Ct}R=p.H?te(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),$d(),function bm(p,R,L,W,be,$e){p.info(function(){if(p.g)if($e)for(var Ct="",Ar=$e.split("&"),Bi=0;Bi<Ar.length;Bi++){var cr=Ar[Bi].split("=");if(1<cr.length){var rs=cr[0];cr=cr[1];var is=rs.split("_");Ct=2<=is.length&&"type"==is[1]?Ct+(rs+"=")+cr+"&":Ct+(rs+"=redacted&")}}else Ct=null;else Ct=$e;return"XMLHTTP REQ ("+W+") [attempt "+be+"]: "+R+"\n"+L+"\n"+Ct})}(p.i,p.u,p.A,p.l,p.R,p.m)}function xm(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function Om(p,R){var L=p.C,W=R.indexOf("\n",L);return-1==W?zp:(L=Number(R.substring(L,W)),isNaN(L)?Mm:(W+=1)+L>R.length?zp:(R=R.slice(W,W+L),p.C=W+L,R))}function df(p){p.S=Date.now()+p.I,Gp(p,p.I)}function Gp(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=cf(se(p.ba,p),R)}function Wp(p){p.B&&(w.clearTimeout(p.B),p.B=null)}function hf(p){0==p.j.G||p.J||dv(p.j,p)}function gc(p){Wp(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,Hy(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function Kp(p,R){try{var L=p.j;if(0!=L.G&&(L.g==p||Lm(L.h,p)))if(!p.K&&Lm(L.h,p)&&3==L.G){try{var W=L.Da.g.parse(R)}catch{W=null}if(Array.isArray(W)&&3==W.length){var be=W;if(0==be[0]){e:if(!L.u){if(L.g){if(!(L.g.F+3e3<p.F))break e;rg(L),Zp(L)}tg(L),vs(18)}}else L.za=be[1],0<L.za-L.T&&37500>be[2]&&L.F&&0==L.v&&!L.C&&(L.C=cf(se(L.Za,L),6e3));if(1>=ev(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ru(L,11)}else if((p.K||L.g==p)&&rg(L),!Ht(R))for(be=L.Da.g.parse(R),R=0;R<be.length;R++){let cr=be[R];if(L.T=cr[0],cr=cr[1],2==L.G)if("c"==cr[0]){L.K=cr[1],L.ia=cr[2];const rs=cr[3];null!=rs&&(L.la=rs,L.j.info("VER="+L.la));const is=cr[4];null!=is&&(L.Aa=is,L.j.info("SVER="+L.Aa));const Yd=cr[5];null!=Yd&&"number"==typeof Yd&&0<Yd&&(L.L=W=1.5*Yd,L.j.info("backChannelRequestTimeoutMs_="+W)),W=L;const ra=p.g;if(ra){const sg=ra.g?ra.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sg){var $e=W.h;$e.g||-1==sg.indexOf("spdy")&&-1==sg.indexOf("quic")&&-1==sg.indexOf("h2")||($e.j=$e.l,$e.g=new Set,$e.h&&(qp($e,$e.h),$e.h=null))}if(W.D){const Jm=ra.g?ra.g.getResponseHeader("X-HTTP-Session-Id"):null;Jm&&(W.ya=Jm,Lr(W.I,W.D,Jm))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-p.F,L.j.info("Handshake RTT: "+L.R+"ms"));var Ct=p;if((W=L).qa=Km(W,W.J?W.ia:null,W.W),Ct.K){Qp(W.h,Ct);var Ar=Ct,Bi=W.L;Bi&&(Ar.I=Bi),Ar.B&&(Wp(Ar),df(Ar)),W.g=Ct}else lv(W);0<L.i.length&&eg(L)}else"stop"!=cr[0]&&"close"!=cr[0]||Ru(L,7);else 3==L.G&&("stop"==cr[0]||"close"==cr[0]?"stop"==cr[0]?Ru(L,7):bl(L):"noop"!=cr[0]&&L.l&&L.l.ta(cr),L.v=0)}$d()}catch{}}function km(p){this.l=p||10,p=w.PerformanceNavigationTiming?0<(p=w.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zy(p){return!!p.h||!!p.g&&p.g.size>=p.j}function ev(p){return p.h?1:p.g?p.g.size:0}function Lm(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function qp(p,R){p.g?p.g.add(R):p.h=R}function Qp(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function Vm(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const L of p.g.values())R=R.concat(L.D);return R}return dt(p.i)}function Fm(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(b(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var L=function nv(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(b(p)||"string"==typeof p){var R=[];p=p.length;for(var L=0;L<p;L++)R.push(L);return R}R=[],L=0;for(const W in p)R[L++]=W;return R}}}(p),W=function tv(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(b(p)){for(var R=[],L=p.length,W=0;W<L;W++)R.push(p[W]);return R}for(W in R=[],L=0,p)R[L++]=p[W];return R}(p),be=W.length,$e=0;$e<be;$e++)R.call(void 0,W[$e],L&&L[$e],p)}Ua.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==bu(p)?R.j():this.Y(p)},Ua.prototype.Y=function(p){try{if(p==this.g)e:{const is=bu(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>is)&&(3!=is||this.g&&(this.h.h||this.g.oa()||cv(this.g)))){this.J||4!=is||7==R||$d(),Wp(this);var L=this.g.Z();this.X=L;t:if(xm(this)){var W=cv(this.g);p="";var be=W.length,$e=4==bu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gc(this),hf(this);var Ct="";break t}this.h.i=new w.TextDecoder}for(R=0;R<be;R++)this.h.h=!0,p+=this.h.i.decode(W[R],{stream:!($e&&R==be-1)});W.length=0,this.h.g+=p,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=200==L,function PI(p,R,L,W,be,$e,Ct){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+be+"]: "+R+"\n"+L+"\n"+$e+" "+Ct})}(this.i,this.u,this.A,this.l,this.R,is,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Ar,Bi=this.g;if((Ar=Bi.g?Bi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ht(Ar)){var cr=Ar;break t}}cr=null}if(!(L=cr)){this.o=!1,this.s=3,vs(12),gc(this),hf(this);break e}Cu(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kp(this,L)}if(this.P){let ra;for(L=!0;!this.J&&this.C<Ct.length;){if(ra=Om(this,Ct),ra==zp){4==is&&(this.s=4,vs(14),L=!1),Cu(this.i,this.l,null,"[Incomplete Response]");break}if(ra==Mm){this.s=4,vs(15),Cu(this.i,this.l,Ct,"[Invalid Chunk]"),L=!1;break}Cu(this.i,this.l,ra,null),Kp(this,ra)}if(xm(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=is||0!=Ct.length||this.h.h||(this.s=1,vs(16),L=!1),this.o=this.o&&L,L){if(0<Ct.length&&!this.W){this.W=!0;var rs=this.j;rs.g==this&&rs.ba&&!rs.M&&(rs.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),ng(rs),rs.M=!0,vs(11))}}else Cu(this.i,this.l,Ct,"[Invalid Chunked Response]"),gc(this),hf(this)}else Cu(this.i,this.l,Ct,null),Kp(this,Ct);4==is&&gc(this),this.o&&!this.J&&(4==is?dv(this.j,this):(this.o=!1,df(this)))}else(function FI(p){const R={};p=(p.g&&2<=bu(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let W=0;W<p.length;W++){if(Ht(p[W]))continue;var L=ve(p[W]);const be=L[0];if("string"!=typeof(L=L[1]))continue;L=L.trim();const $e=R[be]||[];R[be]=$e,$e.push(L)}!function ge(p,R){for(const L in p)R.call(void 0,p[L],L,p)}(R,function(W){return W.join(", ")})})(this.g),400==L&&0<Ct.indexOf("Unknown SID")?(this.s=3,vs(12)):(this.s=0,vs(13)),gc(this),hf(this)}}}catch{}},Ua.prototype.cancel=function(){this.J=!0,gc(this)},Ua.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function jp(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&($d(),vs(17)),gc(this),this.s=2,hf(this)):Gp(this,this.S-p)},km.prototype.cancel=function(){if(this.i=Vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mc(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof mc){this.h=p.h,Cl(this,p.j),this.o=p.o,this.g=p.g,ea(this,p.s),this.l=p.l;var R=p.i,L=new zd;L.i=R.i,R.g&&(L.g=new Map(R.g),L.h=R.h),iv(this,L),this.m=p.m}else p&&(R=String(p).match(Um))?(this.h=!1,Cl(this,R[1]||"",!0),this.o=ta(R[2]||""),this.g=ta(R[3]||"",!0),ea(this,R[4]),this.l=ta(R[5]||"",!0),iv(this,R[6]||"",!0),this.m=ta(R[7]||"")):(this.h=!1,this.i=new zd(null,this.h))}function Ba(p){return new mc(p)}function Cl(p,R,L){p.j=L?ta(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function ea(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function iv(p,R,L){R instanceof zd?(p.i=R,function ov(p,R){R&&!p.j&&(_c(p),p.i=null,p.g.forEach(function(L,W){var be=W.toLowerCase();W!=be&&(mi(this,W),sv(this,be,L))},p)),p.j=R}(p.i,p.h)):(L||(R=Sl(R,NI)),p.i=new zd(R,p.h))}function Lr(p,R,L){p.i.set(R,L)}function Hd(p){return Lr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function ta(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Sl(p,R,L){return"string"==typeof p?(p=encodeURI(p).replace(R,MI),L&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function MI(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}mc.prototype.toString=function(){var p=[],R=this.j;R&&p.push(Sl(R,Yp,!0),":");var L=this.g;return(L||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(Sl(R,Yp,!0),"@"),p.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(L=this.s)&&p.push(":",String(L))),(L=this.l)&&(this.g&&"/"!=L.charAt(0)&&p.push("/"),p.push(Sl(L,"/"==L.charAt(0)?GE:zE,!0))),(L=this.i.toString())&&p.push("?",L),(L=this.m)&&p.push("#",Sl(L,xI)),p.join("")};var p,Yp=/[#\/\?@]/g,zE=/[#\?:]/g,GE=/[#\?]/g,NI=/[#\?@]/g,xI=/#/g;function zd(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function _c(p){p.g||(p.g=new Map,p.h=0,p.i&&function rv(p,R){if(p){p=p.split("&");for(var L=0;L<p.length;L++){var W=p[L].indexOf("="),be=null;if(0<=W){var $e=p[L].substring(0,W);be=p[L].substring(W+1)}else $e=p[L];R($e,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}(p.i,function(R,L){p.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}function mi(p,R){_c(p),R=Gd(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function Bm(p,R){return _c(p),R=Gd(p,R),p.g.has(R)}function sv(p,R,L){mi(p,R),0<L.length&&(p.i=null,p.g.set(Gd(p,R),dt(L)),p.h+=L.length)}function Gd(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function Su(p,R,L,W,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),W(L)}catch{}}function Wd(){this.g=new Up}function kI(p,R,L){const W=L||"";try{Fm(p,function(be,$e){let Ct=be;O(be)&&(Ct=af(be)),R.push(W+$e+"="+encodeURIComponent(Ct))})}catch(be){throw R.push(W+"type="+encodeURIComponent("_badmap")),be}}function ff(p){this.l=p.Ub||null,this.j=p.eb||!1}function pf(p,R){Ui.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function uv(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Kd(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Xp(p)}function Xp(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function jm(p){let R="";return ln(p,function(L,W){R+=W,R+=":",R+=L,R+="\r\n"}),R}function gf(p,R,L){e:{for(W in L){var W=!1;break e}W=!0}W||(L=jm(L),"string"==typeof p?null!=L&&encodeURIComponent(String(L)):Lr(p,R,L))}function fr(p){Ui.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=zd.prototype).add=function(p,R){_c(this),this.i=null,p=Gd(this,p);var L=this.g.get(p);return L||this.g.set(p,L=[]),L.push(R),this.h+=1,this},a.forEach=function(p,R){_c(this),this.g.forEach(function(L,W){L.forEach(function(be){p.call(R,be,W,this)},this)},this)},a.na=function(){_c(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),L=[];for(let W=0;W<R.length;W++){const be=p[W];for(let $e=0;$e<be.length;$e++)L.push(R[W])}return L},a.V=function(p){_c(this);let R=[];if("string"==typeof p)Bm(this,p)&&(R=R.concat(this.g.get(Gd(this,p))));else{p=Array.from(this.g.values());for(let L=0;L<p.length;L++)R=R.concat(p[L])}return R},a.set=function(p,R){return _c(this),this.i=null,Bm(this,p=Gd(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var L=0;L<R.length;L++){var W=R[L];const $e=encodeURIComponent(String(W)),Ct=this.V(W);for(W=0;W<Ct.length;W++){var be=$e;""!==Ct[W]&&(be+="="+encodeURIComponent(String(Ct[W]))),p.push(be)}}return this.i=p.join("&")},Je(ff,zy),ff.prototype.g=function(){return new pf(this.l,this.j)},ff.prototype.i=(p={},function(){return p}),Je(pf,Ui),(a=pf.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,Xp(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||w).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Kd(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Xp(this)),this.g&&(this.readyState=3,Xp(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uv(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?Kd(this):Xp(this),3==this.readyState&&uv(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,Kd(this))},a.Qa=function(p){this.g&&(this.response=p,Kd(this))},a.ga=function(){this.g&&Kd(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var L=R.next();!L.done;)p.push((L=L.value)[0]+": "+L[1]),L=R.next();return p.join("\r\n")},Object.defineProperty(pf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),Je(fr,Ui);var LI=/^https?$/i,VI=["POST","PUT"];function na(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,To(p),mf(p)}function To(p){p.A||(p.A=!0,Ii(p,"complete"),Ii(p,"error"))}function wo(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=bu(p)||2!=p.Z()))if(p.u&&4==bu(p))jy(p.Ea,0,p);else if(Ii(p,"readystatechange"),4==bu(p)){p.h=!1;try{const Ct=p.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var W;if(W=0===Ct){var be=String(p.D).match(Um)[1]||null;!be&&w.self&&w.self.location&&(be=w.self.location.protocol.slice(0,-1)),W=!LI.test(be?be.toLowerCase():"")}L=W}if(L)Ii(p,"complete"),Ii(p,"success");else{p.m=6;try{var $e=2<bu(p)?p.g.statusText:""}catch{$e=""}p.l=$e+" ["+p.Z()+"]",To(p)}}finally{mf(p)}}}function mf(p,R){if(p.g){$m(p);const L=p.g,W=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||Ii(p,"ready");try{L.onreadystatechange=W}catch{}}}function $m(p){p.I&&(w.clearTimeout(p.I),p.I=null)}function bu(p){return p.g?p.g.readyState:0}function cv(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function _f(p,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[p]||R}function Jp(p){this.Aa=0,this.i=[],this.j=new Dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_f("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_f("baseRetryDelayMs",5e3,p),this.cb=_f("retryDelaySeedMs",1e4,p),this.Wa=_f("forwardChannelMaxRetries",2,p),this.wa=_f("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new km(p&&p.concurrentRequestLimit),this.Da=new Wd,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function bl(p){if(Hm(p),3==p.G){var R=p.U++,L=Ba(p.I);if(Lr(L,"SID",p.K),Lr(L,"RID",R),Lr(L,"TYPE","terminate"),qd(p,L),(R=new Ua(p,p.j,R)).L=2,R.v=Hd(Ba(L)),L=!1,w.navigator&&w.navigator.sendBeacon)try{L=w.navigator.sendBeacon(R.v.toString(),"")}catch{}!L&&w.Image&&((new Image).src=R.v,L=!0),L||(R.g=qm(R.j,null),R.g.ea(R.v)),R.F=Date.now(),df(R)}Wm(p)}function Zp(p){p.g&&(ng(p),p.g.cancel(),p.g=null)}function Hm(p){Zp(p),p.u&&(w.clearTimeout(p.u),p.u=null),rg(p),p.h.cancel(),p.s&&("number"==typeof p.s&&w.clearTimeout(p.s),p.s=null)}function eg(p){if(!Zy(p.h)&&!p.s){p.s=!0;var R=p.Ga;Va||El(),Fa||(Va(),Fa=!0),pc.add(R,p),p.B=0}}function zm(p,R){var L;L=R?R.l:p.U++;const W=Ba(p.I);Lr(W,"SID",p.K),Lr(W,"RID",L),Lr(W,"AID",p.T),qd(p,W),p.m&&p.o&&gf(W,p.m,p.o),L=new Ua(p,p.j,L,p.B+1),null===p.m&&(L.H=p.o),R&&(p.i=R.D.concat(p.i)),R=yf(p,L,1e3),L.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),qp(p.h,L),Nm(L,W,R)}function qd(p,R){p.H&&ln(p.H,function(L,W){Lr(R,W,L)}),p.l&&Fm({},function(L,W){Lr(R,W,L)})}function yf(p,R,L){L=Math.min(p.i.length,L);var W=p.l?se(p.l.Na,p.l,p):null;e:{var be=p.i;let $e=-1;for(;;){const Ct=["count="+L];-1==$e?0<L?($e=be[0].g,Ct.push("ofs="+$e)):$e=0:Ct.push("ofs="+$e);let Ar=!0;for(let Bi=0;Bi<L;Bi++){let cr=be[Bi].g;const rs=be[Bi].map;if(cr-=$e,0>cr)$e=Math.max(0,be[Bi].g-100),Ar=!1;else try{kI(rs,Ct,"req"+cr+"_")}catch{W&&W(rs)}}if(Ar){W=Ct.join("&");break e}}}return p=p.i.splice(0,L),R.D=p,W}function lv(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;Va||El(),Fa||(Va(),Fa=!0),pc.add(R,p),p.v=0}}function tg(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=cf(se(p.Fa,p),ig(p,p.v)),p.v++,0))}function ng(p){null!=p.A&&(w.clearTimeout(p.A),p.A=null)}function Gm(p){p.g=new Ua(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=Ba(p.qa);Lr(R,"RID","rpc"),Lr(R,"SID",p.K),Lr(R,"AID",p.T),Lr(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&Lr(R,"TO",p.ja),Lr(R,"TYPE","xmlhttp"),qd(p,R),p.m&&p.o&&gf(R,p.m,p.o),p.L&&(p.g.I=p.L);var L=p.g;p=p.ia,L.L=1,L.v=Hd(Ba(R)),L.m=null,L.P=!0,Xy(L,p)}function rg(p){null!=p.C&&(w.clearTimeout(p.C),p.C=null)}function dv(p,R){var L=null;if(p.g==R){rg(p),ng(p),p.g=null;var W=2}else{if(!Lm(p.h,R))return;L=R.D,Qp(p.h,R),W=1}if(0!=p.G)if(R.o)if(1==W){L=R.m?R.m.length:0,R=Date.now()-R.F;var be=p.B;Ii(W=uf(),new Qy(W,L)),eg(p)}else lv(p);else if(3==(be=R.s)||0==be&&0<R.X||!(1==W&&function UI(p,R){return!(ev(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=cf(se(p.Ga,p,R),ig(p,p.B)),p.B++,0)))}(p,R)||2==W&&tg(p)))switch(L&&0<L.length&&(R=p.h,R.i=R.i.concat(L)),be){case 1:Ru(p,5);break;case 4:Ru(p,10);break;case 3:Ru(p,6);break;default:Ru(p,2)}}function ig(p,R){let L=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(L*=2),L*R}function Ru(p,R){if(p.j.info("Error code "+R),2==R){var L=se(p.fb,p),W=p.Xa;const be=!W;W=new mc(W||"//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||Cl(W,"https"),Hd(W),be?function OI(p,R){const L=new Dl;if(w.Image){const W=new Image;W.onload=Me(Su,L,"TestLoadImage: loaded",!0,R,W),W.onerror=Me(Su,L,"TestLoadImage: error",!1,R,W),W.onabort=Me(Su,L,"TestLoadImage: abort",!1,R,W),W.ontimeout=Me(Su,L,"TestLoadImage: timeout",!1,R,W),w.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else R(!1)}(W.toString(),L):function av(p,R){new Dl;const W=new AbortController,be=setTimeout(()=>{W.abort(),Su(0,0,!1,R)},1e4);fetch(p,{signal:W.signal}).then($e=>{clearTimeout(be),Su(0,0,!!$e.ok,R)}).catch(()=>{clearTimeout(be),Su(0,0,!1,R)})}(W.toString(),L)}else vs(2);p.G=0,p.l&&p.l.sa(R),Wm(p),Hm(p)}function Wm(p){if(p.G=0,p.ka=[],p.l){const R=Vm(p.h);(0!=R.length||0!=p.i.length)&&(st(p.ka,R),st(p.ka,p.i),p.h.i.length=0,dt(p.i),p.i.length=0),p.l.ra()}}function Km(p,R,L){var W=L instanceof mc?Ba(L):new mc(L);if(""!=W.g)R&&(W.g=R+"."+W.g),ea(W,W.s);else{var be=w.location;W=be.protocol,R=R?R+"."+be.hostname:be.hostname,be=+be.port;var $e=new mc(null);W&&Cl($e,W),R&&($e.g=R),be&&ea($e,be),L&&($e.l=L),W=$e}return R=p.ya,(L=p.D)&&R&&Lr(W,L,R),Lr(W,"VER",p.la),qd(p,W),W}function qm(p,R,L){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new fr(p.Ca&&!p.pa?new ff({eb:L}):p.pa)).Ha(p.J),R}function Qm(){}function vf(){}function Ms(p,R){Ui.call(this),this.g=new Jp(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!Ht(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Ht(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new Qd(this)}function Ym(p){Cm.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const L in R){p=L;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function Xm(){Bp.call(this),this.status=1}function Qd(p){this.g=p}(a=fr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,L,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pm.g(),this.v=function Gy(p){return p.h||(p.h=p.i())}(this.o?this.o:Pm),this.g.onreadystatechange=se(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch($e){return void na(this,$e)}if(p=L||"",L=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var be in W)L.set(be,W[be]);else{if("function"!=typeof W.keys||"function"!=typeof W.get)throw Error("Unknown input type for opt_headers: "+String(W));for(const $e of W.keys())L.set($e,W.get($e))}W=Array.from(L.keys()).find($e=>"content-type"==$e.toLowerCase()),be=w.FormData&&p instanceof w.FormData,!(0<=Array.prototype.indexOf.call(VI,R,void 0))||W||be||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,Ct]of L)this.g.setRequestHeader($e,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$m(this),this.u=!0,this.g.send(p),this.u=!1}catch($e){na(this,$e)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ii(this,"complete"),Ii(this,"abort"),mf(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mf(this,!0)),fr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?wo(this):this.bb())},a.bb=function(){wo(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<bu(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),Fp(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Jp.prototype).la=8,a.G=1,a.connect=function(p,R,L,W){vs(0),this.W=p,this.H=R||{},L&&void 0!==W&&(this.H.OSID=L,this.H.OAID=W),this.F=this.X,this.I=Km(this,null,this.W),eg(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const be=new Ua(this,this.j,p);let $e=this.o;if(this.S&&($e?($e=te($e),ye($e,this.S)):$e=this.S),null!==this.m||this.O||(be.H=$e,$e=null),this.P)e:{for(var R=0,L=0;L<this.i.length;L++){var W=this.i[L];if(void 0===(W="__data__"in W.map&&"string"==typeof(W=W.map.__data__)?W.length:void 0))break;if(4096<(R+=W)){R=L;break e}if(4096===R||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=yf(this,be,R),Lr(L=Ba(this.I),"RID",p),Lr(L,"CVER",22),this.D&&Lr(L,"X-HTTP-Session-Id",this.D),qd(this,L),$e&&(this.O?R="headers="+encodeURIComponent(String(jm($e)))+"&"+R:this.m&&gf(L,this.m,$e)),qp(this.h,be),this.Ua&&Lr(L,"TYPE","init"),this.P?(Lr(L,"$req",R),Lr(L,"SID","null"),be.T=!0,Nm(be,L,null)):Nm(be,L,R),this.G=2}}else 3==this.G&&(p?zm(this,p):0==this.i.length||Zy(this.h)||zm(this))},a.Fa=function(){if(this.u=null,Gm(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=cf(se(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vs(10),Zp(this),Gm(this))},a.Za=function(){null!=this.C&&(this.C=null,Zp(this),tg(this),vs(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=Qm.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},vf.prototype.g=function(p,R){return new Ms(p,R)},Je(Ms,Ui),Ms.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ms.prototype.close=function(){bl(this.g)},Ms.prototype.o=function(p){var R=this.g;if("string"==typeof p){var L={};L.__data__=p,p=L}else this.u&&((L={}).__data__=af(p),p=L);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&eg(R)},Ms.prototype.N=function(){this.g.l=null,delete this.j,bl(this.g),delete this.g,Ms.aa.N.call(this)},Je(Ym,Cm),Je(Xm,Bp),Je(Qd,Qm),Qd.prototype.ua=function(){Ii(this.g,"a")},Qd.prototype.ta=function(p){Ii(this.g,new Ym(p))},Qd.prototype.sa=function(p){Ii(this.g,new Xm)},Qd.prototype.ra=function(){Ii(this.g,"b")},vf.prototype.createWebChannel=vf.prototype.g,Ms.prototype.send=Ms.prototype.o,Ms.prototype.open=Ms.prototype.m,Ms.prototype.close=Ms.prototype.close,Kt=Nt.createWebChannelTransport=function(){return new vf},hn=Nt.getStatEventTarget=function(){return uf()},qt=Nt.Event=Al,Zn=Nt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lf.NO_ERROR=0,lf.TIMEOUT=8,lf.HTTP_ERROR=6,Vr=Nt.ErrorCode=lf,Yy.COMPLETE="complete",Ei=Nt.EventType=Yy,Wy.EventType=wl,wl.OPEN="a",wl.CLOSE="b",wl.ERROR="c",wl.MESSAGE="d",Ui.prototype.listen=Ui.prototype.K,Nr=Nt.WebChannel=Wy,Nt.FetchXmlHttpFactory=ff,fr.prototype.listenOnce=fr.prototype.L,fr.prototype.getLastError=fr.prototype.Ka,fr.prototype.getLastErrorCode=fr.prototype.Ba,fr.prototype.getStatus=fr.prototype.Z,fr.prototype.getResponseJson=fr.prototype.Oa,fr.prototype.getResponseText=fr.prototype.oa,fr.prototype.send=fr.prototype.ea,fr.prototype.setWithCredentials=fr.prototype.Ha,Er=Nt.XhrIo=fr}).apply(typeof Dn<"u"?Dn:typeof self<"u"?self:typeof window<"u"?window:{});const pr="@firebase/firestore";class Sn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");let or="10.14.0";const dn=new Ut.Vy("@firebase/firestore");function yr(){return dn.logLevel}function Ce(a,...e){if(dn.logLevel<=Ut.$b.DEBUG){const r=e.map(ii);dn.debug(`Firestore (${or}): ${a}`,...r)}}function zn(a,...e){if(dn.logLevel<=Ut.$b.ERROR){const r=e.map(ii);dn.error(`Firestore (${or}): ${a}`,...r)}}function Wt(a,...e){if(dn.logLevel<=Ut.$b.WARN){const r=e.map(ii);dn.warn(`Firestore (${or}): ${a}`,...r)}}function ii(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function rt(a="Unexpected state"){const e=`FIRESTORE (${or}) INTERNAL ASSERTION FAILED: `+a;throw zn(e),new Error(e)}function St(a,e){a||rt()}function at(a,e){return a}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Mt.g{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class os{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class si{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Sn.UNAUTHENTICATED))}shutdown(){}}class Ti{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class $i{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;St(void 0===this.o);let u=this.i;const d=O=>this.i!==u?(u=this.i,r(O)):Promise.resolve();let g=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Yn,e.enqueueRetryable(()=>d(this.currentUser))};const w=()=>{const O=g;e.enqueueRetryable((0,ae.A)(function*(){yield O.promise,yield d(s.currentUser)}))},b=O=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.o&&(this.auth.addAuthTokenListener(this.o),w())};this.t.onInit(O=>b(O)),setTimeout(()=>{if(!this.auth){const O=this.t.getImmediate({optional:!0});O?b(O):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Yn)}},0),w()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(St("string"==typeof s.accessToken),new os(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Sn(e)}}class Hi{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ge{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Hi(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){St(void 0===this.o);const s=d=>{null!=d.error&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const g=d.token!==this.R;return this.R=d.token,Ce("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable(()=>s(d))};const u=d=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(St("string"==typeof r.token),this.R=r.token,new z(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ne(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class ie{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=ne(40);for(let d=0;d<u.length;++d)s.length<20&&u[d]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return s}}function Re(a,e){return a<e?-1:a>e?1:0}function ct(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function jt(a){return a+"\0"}class vt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new vt(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pt(e)}static min(){return new pt(new vt(0,0))}static max(){return new pt(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Un{constructor(e,r,s){void 0===r?r=0:r>e.length&&rt(),void 0===s?s=e.length-r:s>e.length-r&&rt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Un.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Un?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const d=e.get(u),g=r.get(u);if(d<g)return-1;if(d>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class wt extends Un{construct(e,r,s){return new wt(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new Xe(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new wt(r)}static emptyPath(){return new wt([])}}const oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends Un{construct(e,r,s){return new kn(e,r,s)}static isValidIdentifier(e){return oi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const d=()=>{if(0===s.length)throw new Xe(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;u<e.length;){const w=e[u];if("\\"===w){if(u+1===e.length)throw new Xe(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Xe(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,u+=2}else"`"===w?(g=!g,u++):"."!==w||g?(s+=w,u++):(d(),u++)}if(d(),g)throw new Xe(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(r)}static emptyPath(){return new kn([])}}class It{constructor(e){this.path=e}static fromPath(e){return new It(wt.fromString(e))}static fromName(e){return new It(wt.fromString(e).popFirst(5))}static empty(){return new It(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new It(new wt(e.slice()))}}class Cr{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function ui(a){return a.fields.find(e=>2===e.kind)}function Hr(a){return a.fields.filter(e=>2!==e.kind)}Cr.UNKNOWN_ID=-1;class rn{constructor(e,r){this.fieldPath=e,this.kind=r}}class Le{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Le(0,ht.min())}}function Ie(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=pt.fromTimestamp(1e9===s?new vt(r+1,0):new vt(r,s));return new ht(u,It.empty(),e)}function We(a){return new ht(a.readTime,a.key,-1)}class ht{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new ht(pt.min(),It.empty(),-1)}static max(){return new ht(pt.max(),It.empty(),-1)}}function $t(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=It.comparator(a.documentKey,e.documentKey),0!==r?r:Re(a.largestBatchId,e.largestBatchId))}const nn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Cn(a){return er.apply(this,arguments)}function er(){return(er=(0,ae.A)(function*(a){if(a.code!==xe.FAILED_PRECONDITION||a.message!==nn)throw a;Ce("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new me((s,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(s,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof me?r:me.resolve(r)}catch(r){return me.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):me.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):me.reject(r)}static resolve(e){return new me((r,s)=>{r(e)})}static reject(e){return new me((r,s)=>{s(e)})}static waitFor(e){return new me((r,s)=>{let u=0,d=0,g=!1;e.forEach(w=>{++u,w.next(()=>{++d,g&&d===u&&r()},b=>s(b))}),g=!0,d===u&&r()})}static or(e){let r=me.resolve(!1);for(const s of e)r=r.next(u=>u?me.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,d)=>{s.push(r.call(this,u,d))}),this.waitFor(s)}static mapArray(e,r){return new me((s,u)=>{const d=e.length,g=new Array(d);let w=0;for(let b=0;b<d;b++){const O=b;r(e[O]).next(j=>{g[O]=j,++w,w===d&&s(g)},j=>u(j))}})}static doWhile(e,r){return new me((s,u)=>{const d=()=>{!0===e()?r().next(()=>{d()},u):s()};d()})}}class vn{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Gi(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=_i(s.target.error);this.V.reject(new Gi(e,u))}}static open(e,r,s,u){try{return new vn(r,e.transaction(u,s))}catch(d){throw new Gi(r,d)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ia(r)}}class Xr{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===Xr.S((0,Mt.ZQ)())&&zn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ce("SimpleDb","Removing database:",e),Sr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Mt.zW)())return!1;if(Xr.v())return!0;const e=(0,Mt.ZQ)(),r=Xr.S(e),s=0<r&&r<10,u=zi(e),d=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||d)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,ae.A)(function*(){return r.db||(Ce("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=g=>{s(g.target.result)},d.onblocked=()=>{u(new Gi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=g=>{const w=g.target.error;u("VersionError"===w.name?new Xe(xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Xe(xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new Gi(e,w))},d.onupgradeneeded=g=>{Ce("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,d.transaction,g.oldVersion,r.version).next(()=>{Ce("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var d=this;return(0,ae.A)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{d.db=yield d.M(e);const b=vn.open(d.db,e,g?"readonly":"readwrite",s),O=u(b).next(j=>(b.g(),j)).catch(j=>(b.abort(j),me.reject(j))).toPromise();return O.catch(()=>{}),yield b.m,O}catch(b){const O=b,j="FirebaseError"!==O.name&&w<3;if(Ce("SimpleDb","Transaction failed with error:",O.message,"Retrying:",j),d.close(),!j)return Promise.reject(O)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function zi(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class yc{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Sr(this.B.delete())}}class Gi extends Xe{constructor(e,r){super(xe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function us(a){return"IndexedDbTransactionError"===a.name}class ia{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(Ce("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(Ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Sr(s)}add(e){return Ce("SimpleDb","ADD",this.store.name,e,e),Sr(this.store.add(e))}get(e){return Sr(this.store.get(e)).next(r=>(void 0===r&&(r=null),Ce("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return Ce("SimpleDb","DELETE",this.store.name,e),Sr(this.store.delete(e))}count(){return Ce("SimpleDb","COUNT",this.store.name),Sr(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(s.range);return new me((g,w)=>{d.onerror=b=>{w(b.target.error)},d.onsuccess=b=>{g(b.target.result)}})}{const d=this.cursor(s),g=[];return this.W(d,(w,b)=>{g.push(b)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new me((u,d)=>{s.onerror=g=>{d(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}j(e,r){Ce("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(d,g,w)=>w.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new me((s,u)=>{r.onerror=d=>{const g=_i(d.target.error);u(g)},r.onsuccess=d=>{const g=d.target.result;g?e(g.primaryKey,g.value).next(w=>{w?g.continue():s()}):s()}})}W(e,r){const s=[];return new me((u,d)=>{e.onerror=g=>{d(g.target.error)},e.onsuccess=g=>{const w=g.target.result;if(!w)return void u();const b=new yc(w),O=r(w.primaryKey,w.value,b);if(O instanceof me){const j=O.catch(K=>(b.done(),me.reject(K)));s.push(j)}b.isDone?u():null===b.K?w.continue():w.continue(b.K)}}).next(()=>me.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Sr(a){return new me((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=_i(s.target.error);r(u)}})}let Ns=!1;function _i(a){const e=Xr.S((0,Mt.ZQ)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ns||(Ns=!0,setTimeout(()=>{throw s},0)),s}}return a}class ja{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;Ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.A)(function*(){r.task=null;try{Ce("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){us(s)?Ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Cn(s)}yield r.X(6e4)}))}}class Wi{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,ae.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,d=!0;return me.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return Ce("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,u).next(w=>{u-=w,s.add(g)});d=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(d=>{const g=d.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(u,d)).next(w=>(Ce("IndexBackfiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,r,w))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((u,d)=>{const g=We(d);$t(g,s)>0&&(s=g)}),new ht(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let zr=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function Pi(a){return null==a}function wi(a){return 0===a&&1/a==-1/0}function sa(a){return"number"==typeof a&&Number.isInteger(a)&&!wi(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function ar(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=Ha(e)),e=$a(a.get(r),e);return Ha(e)}function $a(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Ha(a){return a+"\x01\x01"}function Ki(a){const e=a.length;if(St(e>=2),2===e)return St("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),wt.emptyPath();const r=e-2,s=[];let u="";for(let d=0;d<e;){const g=a.indexOf("\x01",d);switch((g<0||g>r)&&rt(),a.charAt(g+1)){case"\x01":const w=a.substring(d,g);let b;0===u.length?b=w:(u+=w,b=u,u=""),s.push(b);break;case"\x10":u+=a.substring(d,g),u+="\0";break;case"\x11":u+=a.substring(d,g+1);break;default:rt()}d=g+2}return new wt(s)}const za=["userId","batchId"];function bo(a,e){return[a,ar(e)]}function oa(a,e,r){return[a,ar(e),r]}const Pu={},Mu=["prefixPath","collectionGroup","readTime","documentId"],xs=["prefixPath","collectionGroup","documentId"],aa=["collectionGroup","readTime","prefixPath","documentId"],wn=["canonicalId","targetId"],Or=["targetId","path"],Jr=["path","targetId"],to=["collectionId","parent"],kr=["indexId","uid"],Ga=["uid","sequenceNumber"],no=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ro=["indexId","uid","orderedDocumentKey"],Mi=["userId","collectionPath","documentId"],qi=["userId","collectionPath","largestBatchId"],dr=["userId","collectionGroup","largestBatchId"],At=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],cn=[...At,"documentOverlays"],Bn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gr=Bn,io=[...Gr,"indexConfiguration","indexState","indexEntries"],br=io,Os=[...io,"globals"];class tr extends fn{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function sr(a,e){const r=at(a);return Xr.F(r._e,e)}function Ni(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function Gt(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function ks(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class mn{constructor(e,r){this.comparator=e,this.root=r||Rr.EMPTY}insert(e,r){return new mn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}}class ur{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=r?s(e.key,r):1,r&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(0===d){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,r,s,u,d){this.key=e,this.value=r,this.color=s??Rr.RED,this.left=u??Rr.EMPTY,this.right=d??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,d){return new Rr(e??this.key,r??this.value,s??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const d=s(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return Rr.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(e,r,s,u,d){return this}insert(e,r,s){return new Rr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new xi(this.data.getIterator())}getIteratorFrom(e){return new xi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new sn(this.comparator);return r.data=e,r}}class xi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ai(a){return a.hasNext()?a.getNext():void 0}class Zr{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new Zr([])}unionWith(e){let r=new sn(kn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Zr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ct(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class Di extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Di("Invalid base64 string: "+d):d}}(e);return new qn(r)}static fromUint8Array(e){const r=function(u){let d="";for(let g=0;g<u.length;++g)d+=String.fromCharCode(u[g]);return d}(e);return new qn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const Ro=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function on(a){if(St(!!a),"string"==typeof a){let e=0;const r=Ro.exec(a);if(St(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:hr(a.seconds),nanos:hr(a.nanos)}}function hr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function ei(a){return"string"==typeof a?qn.fromBase64String(a):qn.fromUint8Array(a)}function Ls(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ci(a){const e=a.mapValue.fields.__previous_value__;return Ls(e)?Ci(e):e}function Qi(a){const e=on(a.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}class Po{constructor(e,r,s,u,d,g,w,b,O){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=d,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=b,this.useFetchStreams=O}}class yi{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new yi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}const Gn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vs={nullValue:"NULL_VALUE"};function nr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ls(a)?4:vc(a)?9007199254740991:Wn(a)?10:11:rt()}function bn(a,e){if(a===e)return!0;const r=nr(a);if(r!==nr(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Qi(a).isEqual(Qi(e));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const g=on(u.timestampValue),w=on(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return d=e,ei(a.bytesValue).isEqual(ei(d.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,d){return hr(u.geoPointValue.latitude)===hr(d.geoPointValue.latitude)&&hr(u.geoPointValue.longitude)===hr(d.geoPointValue.longitude)}(a,e);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return hr(u.integerValue)===hr(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const g=hr(u.doubleValue),w=hr(d.doubleValue);return g===w?wi(g)===wi(w):isNaN(g)&&isNaN(w)}return!1}(a,e);case 9:return ct(a.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(u,d){const g=u.mapValue.fields||{},w=d.mapValue.fields||{};if(Ni(g)!==Ni(w))return!1;for(const b in g)if(g.hasOwnProperty(b)&&(void 0===w[b]||!bn(g[b],w[b])))return!1;return!0}(a,e);default:return rt()}var d}function Is(a,e){return void 0!==(a.values||[]).find(r=>bn(r,e))}function Fr(a,e){if(a===e)return 0;const r=nr(a),s=nr(e);if(r!==s)return Re(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Re(a.booleanValue,e.booleanValue);case 2:return function(d,g){const w=hr(d.integerValue||d.doubleValue),b=hr(g.integerValue||g.doubleValue);return w<b?-1:w>b?1:w===b?0:isNaN(w)?isNaN(b)?0:-1:1}(a,e);case 3:return Wa(a.timestampValue,e.timestampValue);case 4:return Wa(Qi(a),Qi(e));case 5:return Re(a.stringValue,e.stringValue);case 6:return function(d,g){const w=ei(d),b=ei(g);return w.compareTo(b)}(a.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),b=g.split("/");for(let O=0;O<w.length&&O<b.length;O++){const j=Re(w[O],b[O]);if(0!==j)return j}return Re(w.length,b.length)}(a.referenceValue,e.referenceValue);case 8:return function(d,g){const w=Re(hr(d.latitude),hr(g.latitude));return 0!==w?w:Re(hr(d.longitude),hr(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return Wr(a.arrayValue,e.arrayValue);case 10:return function(d,g){var w,b,O,j;const Me=null===(w=(d.fields||{}).value)||void 0===w?void 0:w.arrayValue,Je=null===(b=(g.fields||{}).value)||void 0===b?void 0:b.arrayValue,dt=Re((null===(O=Me?.values)||void 0===O?void 0:O.length)||0,(null===(j=Je?.values)||void 0===j?void 0:j.length)||0);return 0!==dt?dt:Wr(Me,Je)}(a.mapValue,e.mapValue);case 11:return function(d,g){if(d===Gn.mapValue&&g===Gn.mapValue)return 0;if(d===Gn.mapValue)return 1;if(g===Gn.mapValue)return-1;const w=d.fields||{},b=Object.keys(w),O=g.fields||{},j=Object.keys(O);b.sort(),j.sort();for(let K=0;K<b.length&&K<j.length;++K){const se=Re(b[K],j[K]);if(0!==se)return se;const Me=Fr(w[b[K]],O[j[K]]);if(0!==Me)return Me}return Re(b.length,j.length)}(a.mapValue,e.mapValue);default:throw rt()}}function Wa(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return Re(a,e);const r=on(a),s=on(e),u=Re(r.seconds,s.seconds);return 0!==u?u:Re(r.nanos,s.nanos)}function Wr(a,e){const r=a.values||[],s=e.values||[];for(let u=0;u<r.length&&u<s.length;++u){const d=Fr(r[u],s[u]);if(d)return d}return Re(r.length,s.length)}function Es(a){return Fs(a)}function Fs(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=on(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?ei(a.bytesValue).toBase64():"referenceValue"in a?It.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const d of r.values||[])u?u=!1:s+=",",s+=Fs(d);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of s)d?d=!1:u+=",",u+=`${g}:${Fs(r.fields[g])}`;return u+"}"}(a.mapValue):rt()}function so(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Mo(a){return!!a&&"integerValue"in a}function Tr(a){return!!a&&"arrayValue"in a}function oo(a){return!!a&&"nullValue"in a}function Pl(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function ua(a){return!!a&&"mapValue"in a}function Wn(a){var e,r;return"__vector__"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ts(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return Gt(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Ts(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Ts(a.arrayValue.values[r]);return e}return Object.assign({},a)}function vc(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Ml={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ic(a){return"nullValue"in a?Vs:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?so(yi.empty(),It.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Wn(a)?Ml:{mapValue:{}}:rt()}function Ec(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?so(yi.empty(),It.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Ml:"mapValue"in a?Wn(a)?{mapValue:{}}:Gn:rt()}function Nu(a,e){const r=Fr(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Ka(a,e){const r=Fr(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!ua(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ts(r)}setAll(e){let r=kn.emptyPath(),s={},u=[];e.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const b=this.getFieldsMap(r);this.applyChanges(b,s,u),s={},u=[],r=w.popLast()}g?s[w.lastSegment()]=Ts(g):u.push(w.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,s,u)}delete(e){const r=this.field(e.popLast());ua(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];ua(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){Gt(r,(u,d)=>e[u]=d);for(const u of s)delete e[u]}clone(){return new Kr(Ts(this.value))}}function qa(a){const e=[];return Gt(a.fields,(r,s)=>{const u=new kn([r]);if(ua(s)){const d=qa(s.mapValue).fields;if(0===d.length)e.push(u);else for(const g of d)e.push(u.child(g))}else e.push(u)}),new Zr(e)}class rr{constructor(e,r,s,u,d,g,w){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=d,this.data=g,this.documentState=w}static newInvalidDocument(e){return new rr(e,0,pt.min(),pt.min(),pt.min(),Kr.empty(),0)}static newFoundDocument(e,r,s,u){return new rr(e,1,r,pt.min(),s,u,0)}static newNoDocument(e,r){return new rr(e,2,r,pt.min(),pt.min(),Kr.empty(),0)}static newUnknownDocument(e,r){return new rr(e,3,r,pt.min(),pt.min(),Kr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(pt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Yi{constructor(e,r){this.position=e,this.inclusive=r}}function ds(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const d=e[u],g=a.position[u];if(s=d.field.isKeyField()?It.comparator(It.fromName(g.referenceValue),r.key):Fr(g,r.data.field(d.field)),"desc"===d.dir&&(s*=-1),0!==s)break}return s}function ca(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!bn(a.position[r],e.position[r]))return!1;return!0}class vi{constructor(e,r="asc"){this.field=e,this.dir=r}}function Oi(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Bs{}class Rn extends Bs{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new xo(e,r,s):"array-contains"===r?new Ya(e,s):"in"===r?new uo(e,s):"not-in"===r?new js(e,s):"array-contains-any"===r?new As(e,s):new Rn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new la(e,s):new Tc(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Fr(r,this.value)):null!==r&&nr(this.value)===nr(r)&&this.matchesComparison(Fr(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Bs{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new an(e,r)}matches(e){return Xi(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xi(a){return"and"===a.op}function qr(a){return"or"===a.op}function Qa(a){return No(a)&&Xi(a)}function No(a){for(const e of a.filters)if(e instanceof an)return!1;return!0}function ws(a){if(a instanceof Rn)return a.field.canonicalString()+a.op.toString()+Es(a.value);if(Qa(a))return a.filters.map(e=>ws(e)).join(",");{const e=a.filters.map(r=>ws(r)).join(",");return`${a.op}(${e})`}}function hs(a,e){return a instanceof Rn?(s=a,(u=e)instanceof Rn&&s.op===u.op&&s.field.isEqual(u.field)&&bn(s.value,u.value)):a instanceof an?function(s,u){return u instanceof an&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((d,g,w)=>d&&hs(g,u.filters[w]),!0)}(a,e):void rt();var s,u}function ao(a,e){const r=a.filters.concat(e);return an.create(r,a.op)}function Ji(a){return a instanceof Rn?`${(r=a).field.canonicalString()} ${r.op} ${Es(r.value)}`:a instanceof an?function(r){return r.op.toString()+" {"+r.getFilters().map(Ji).join(" ,")+"}"}(a):"Filter";var r}class xo extends Rn{constructor(e,r,s){super(e,r,s),this.key=It.fromName(s.referenceValue)}matches(e){const r=It.comparator(e.key,this.key);return this.matchesComparison(r)}}class la extends Rn{constructor(e,r){super(e,"in",r),this.keys=da(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Tc extends Rn{constructor(e,r){super(e,"not-in",r),this.keys=da(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function da(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>It.fromName(s.referenceValue))}class Ya extends Rn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Tr(r)&&Is(r.arrayValue,this.value)}}class uo extends Rn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Is(this.value.arrayValue,r)}}class js extends Rn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Is(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Is(this.value.arrayValue,r)}}class As extends Rn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Tr(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>Is(this.value.arrayValue,s))}}class Xa{constructor(e,r=null,s=[],u=[],d=null,g=null,w=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=d,this.startAt=g,this.endAt=w,this.ue=null}}function ha(a,e=null,r=[],s=[],u=null,d=null,g=null){return new Xa(a,e,r,s,u,d,g)}function Oo(a){const e=at(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>ws(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),Pi(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Es(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Es(s)).join(",")),e.ue=r}return e.ue}function ko(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Oi(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!hs(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!ca(a.startAt,e.startAt)&&ca(a.endAt,e.endAt)}function co(a){return It.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Lo(a,e){return a.filters.filter(r=>r instanceof Rn&&r.field.isEqual(e))}function Nl(a,e,r){let s=Vs,u=!0;for(const d of Lo(a,e)){let g=Vs,w=!0;switch(d.op){case"<":case"<=":g=Ic(d.value);break;case"==":case"in":case">=":g=d.value;break;case">":g=d.value,w=!1;break;case"!=":case"not-in":g=Vs}Nu({value:s,inclusive:u},{value:g,inclusive:w})<0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];Nu({value:s,inclusive:u},{value:g,inclusive:r.inclusive})<0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}function xu(a,e,r){let s=Gn,u=!0;for(const d of Lo(a,e)){let g=Gn,w=!0;switch(d.op){case">=":case">":g=Ec(d.value),w=!1;break;case"==":case"in":case"<=":g=d.value;break;case"<":g=d.value,w=!1;break;case"!=":case"not-in":g=Gn}Ka({value:s,inclusive:u},{value:g,inclusive:w})>0&&(s=g,u=w)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(e)){const g=r.position[d];Ka({value:s,inclusive:u},{value:g,inclusive:r.inclusive})>0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}class Si{constructor(e,r=null,s=[],u=[],d=null,g="F",w=null,b=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=d,this.limitType=g,this.startAt=w,this.endAt=b,this.ce=null,this.le=null,this.he=null}}function wc(a,e,r,s,u,d,g,w){return new Si(a,e,r,s,u,d,g,w)}function $s(a){return new Si(a)}function Ja(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function fa(a){return null!==a.collectionGroup}function Ds(a){const e=at(a);if(null===e.ce){e.ce=[];const r=new Set;for(const d of e.explicitOrderBy)e.ce.push(d),r.add(d.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new sn(kn.comparator);return g.filters.forEach(b=>{b.getFlattenedFilters().forEach(O=>{O.isInequality()&&(w=w.add(O.field))})}),w})(e).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||e.ce.push(new vi(d,s))}),r.has(kn.keyField().canonicalString())||e.ce.push(new vi(kn.keyField(),s))}return e.ce}function A(a){const e=at(a);return e.le||(e.le=function P(a,e){if("F"===a.limitType)return ha(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new vi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new Yi(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Yi(a.startAt.position,a.startAt.inclusive):null;return ha(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,Ds(a))),e.le}function V(a,e){const r=a.filters.concat([e]);return new Si(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function ee(a,e,r){return new Si(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function Oe(a,e){return ko(A(a),A(e))&&a.limitType===e.limitType}function nt(a){return`${Oo(A(a))}|lt:${a.limitType}`}function bt(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>Ji(u)).join(", ")}]`),Pi(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Es(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Es(u)).join(",")),`Target(${s})`}(A(a))}; limitType=${a.limitType})`}function Ln(a,e){return e.isFoundDocument()&&function(s,u){const d=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(d):It.isDocumentKey(s.path)?s.path.isEqual(d):s.path.isImmediateParentOf(d)}(a,e)&&function(s,u){for(const d of Ds(s))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,e)&&function(s,u){for(const d of s.filters)if(!d.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(g,w,b){const O=ds(g,w,b);return g.inclusive?O<=0:O<0}(s.startAt,Ds(s),u)||s.endAt&&!function(g,w,b){const O=ds(g,w,b);return g.inclusive?O>=0:O>0}(s.endAt,Ds(s),u)));var s,u}function Mn(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Vn(a){return(e,r)=>{let s=!1;for(const u of Ds(a)){const d=_n(u,e,r);if(0!==d)return d;s=s||u.field.isKeyField()}return 0}}function _n(a,e,r){const s=a.field.isKeyField()?It.comparator(e.key,r.key):function(d,g,w){const b=g.data.field(d),O=w.data.field(d);return null!==b&&null!==O?Fr(b,O):rt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return rt()}}class Kn{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,d]of s)if(this.equalsFn(u,e))return d}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Gt(this.inner,(r,s)=>{for(const[u,d]of s)e(u,d)})}isEmpty(){return ks(this.inner)}size(){return this.innerSize}}const Xn=new mn(It.comparator);function Nn(){return Xn}const ti=new mn(It.comparator);function ni(...a){let e=ti;for(const r of a)e=e.insert(r.key,r);return e}function Hs(a){let e=ti;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function vr(){return Pr()}function Cs(){return Pr()}function Pr(){return new Kn(a=>a.toString(),(a,e)=>a.isEqual(e))}const Zi=new mn(It.comparator),Jd=new sn(It.comparator);function Lt(...a){let e=Jd;for(const r of a)e=e.add(r);return e}const pa=new sn(Re);function zs(){return pa}function ci(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wi(e)?"-0":e}}function xl(a){return{integerValue:""+a}}function Ol(a,e){return sa(e)?xl(e):ci(a,e)}class lo{constructor(){this._=void 0}}function wr(a,e,r){return a instanceof Vo?function(u,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&Ls(d)&&(d=Ci(d)),d&&(g.fields.__previous_value__=d),{mapValue:g}}(r,e):a instanceof li?Gs(a,e):a instanceof Ss?Ll(a,e):function(u,d){const g=kl(u,d),w=Ac(g)+Ac(u.Pe);return Mo(g)&&Mo(u.Pe)?xl(w):ci(u.serializer,w)}(a,e)}function wf(a,e,r){return a instanceof li?Gs(a,e):a instanceof Ss?Ll(a,e):r}function kl(a,e){return a instanceof ga?Mo(s=e)||(d=s)&&"doubleValue"in d?e:{integerValue:0}:null;var s,d}class Vo extends lo{}class li extends lo{constructor(e){super(),this.elements=e}}function Gs(a,e){const r=Dc(e);for(const s of a.elements)r.some(u=>bn(u,s))||r.push(s);return{arrayValue:{values:r}}}class Ss extends lo{constructor(e){super(),this.elements=e}}function Ll(a,e){let r=Dc(e);for(const s of a.elements)r=r.filter(u=>!bn(u,s));return{arrayValue:{values:r}}}class ga extends lo{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Ac(a){return hr(a.integerValue||a.doubleValue)}function Dc(a){return Tr(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Qt{constructor(e,r){this.field=e,this.transform=r}}class Cc{constructor(e,r){this.version=e,this.transformResults=r}}class jn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new jn}static exists(e){return new jn(void 0,e)}static updateTime(e){return new jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class ma{}function Sc(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new ya(a.key,jn.none()):new eu(a.key,a.data,jn.none());{const r=a.data,s=Kr.empty();let u=new sn(kn.comparator);for(let d of e.fields)if(!u.has(d)){let g=r.field(d);null===g&&d.length>1&&(d=d.popLast(),g=r.field(d)),null===g?s.delete(d):s.set(d,g),u=u.add(d)}return new di(a.key,s,new Zr(u.toArray()),jn.none())}}function Za(a,e,r){a instanceof eu?function(u,d,g){const w=u.value.clone(),b=xn(u.fieldTransforms,d,g.transformResults);w.setAll(b),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(a,e,r):a instanceof di?function(u,d,g){if(!Ou(u.precondition,d))return void d.convertToUnknownDocument(g.version);const w=xn(u.fieldTransforms,d,g.transformResults),b=d.data;b.setAll(ot(u)),b.setAll(w),d.convertToFoundDocument(g.version,b).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function _a(a,e,r,s){return a instanceof eu?function(d,g,w,b){if(!Ou(d.precondition,g))return w;const O=d.value.clone(),j=Uo(d.fieldTransforms,b,g);return O.setAll(j),g.convertToFoundDocument(g.version,O).setHasLocalMutations(),null}(a,e,r,s):a instanceof di?function(d,g,w,b){if(!Ou(d.precondition,g))return w;const O=Uo(d.fieldTransforms,b,g),j=g.data;return j.setAll(ot(d)),j.setAll(O),g.convertToFoundDocument(g.version,j).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(K=>K.field))}(a,e,r,s):(w=r,Ou(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function eh(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),d=kl(s.transform,u||null);null!=d&&(null===r&&(r=Kr.empty()),r.set(s.field,d))}return r||null}function Fo(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&ct(s,u,(d,g)=>function Zd(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof li&&u instanceof li||s instanceof Ss&&u instanceof Ss?ct(s.elements,u.elements,bn):s instanceof ga&&u instanceof ga?bn(s.Pe,u.Pe):s instanceof Vo&&u instanceof Vo);var s,u}(d,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class eu extends ma{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class di extends ma{constructor(e,r,s,u,d=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function ot(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function xn(a,e,r){const s=new Map;St(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],g=d.transform,w=e.data.field(d.field);s.set(d.field,wf(g,w,r[u]))}return s}function Uo(a,e,r){const s=new Map;for(const u of a){const d=u.transform,g=r.data.field(u.field);s.set(u.field,wr(d,g,e))}return s}class ya extends ma{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pn extends ma{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bc{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Za(d,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=_a(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=_a(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=Cs();return this.mutations.forEach(u=>{const d=e.get(u.key),g=d.overlayedDocument;let w=this.applyToLocalView(g,d.mutatedFields);w=r.has(u.key)?null:w;const b=Sc(g,w);null!==b&&s.set(u.key,b),g.isValidDocument()||g.convertToNoDocument(pt.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Lt())}isEqual(e){return this.batchId===e.batchId&&ct(this.mutations,e.mutations,(r,s)=>Fo(r,s))&&ct(this.baseMutations,e.baseMutations,(r,s)=>Fo(r,s))}}class Ws{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){St(e.mutations.length===s.length);let u=Zi;const d=e.mutations;for(let g=0;g<d.length;g++)u=u.insert(d[g].key,s[g].version);return new Ws(e,r,s,u)}}class fs{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,r){this.count=e,this.unchangedNames=r}}var Ur,$n;function Pc(a){switch(a){default:return rt();case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0}}function Qr(a){if(void 0===a)return zn("GRPC error has no .code"),xe.UNKNOWN;switch(a){case Ur.OK:return xe.OK;case Ur.CANCELLED:return xe.CANCELLED;case Ur.UNKNOWN:return xe.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return xe.INTERNAL;case Ur.UNAVAILABLE:return xe.UNAVAILABLE;case Ur.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Ur.NOT_FOUND:return xe.NOT_FOUND;case Ur.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Ur.ABORTED:return xe.ABORTED;case Ur.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Ur.DATA_LOSS:return xe.DATA_LOSS;default:return rt()}}($n=Ur||(Ur={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";function jo(){return new TextEncoder}const Ks=new gn([4294967295,4294967295],0);function ps(a){const e=jo().encode(a),r=new ir;return r.update(e),new Uint8Array(r.digest())}function ku(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new gn([r,s],0),new gn([u,d],0)]}class Lu{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new va(`Invalid padding: ${r}`);if(s<0)throw new va(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new va(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new va(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gn.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(gn.fromNumber(s)));return 1===u.compare(Ks)&&(u=new gn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=ps(e),[s,u]=ku(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);if(!this.de(g))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),g=new Lu(d,u,r);return s.forEach(w=>g.insert(w)),g}insert(e){if(0===this.Ie)return;const r=ps(e),[s,u]=ku(r);for(let d=0;d<this.hashCount;d++){const g=this.Ee(s,u,d);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Vu{constructor(e,r,s,u,d){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,ho.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new Vu(pt.min(),u,new mn(Re),Nn(),Lt())}}class ho{constructor(e,r,s,u,d){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new ho(s,r,Lt(),Lt(),Lt())}}class Ia{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class Vl{constructor(e,r){this.targetId=e,this.me=r}}class E{constructor(e,r,s=qn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class D{constructor(){this.fe=0,this.ge=N(),this.pe=qn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Lt(),r=Lt(),s=Lt();return this.ge.forEach((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:rt()}}),new ho(this.pe,this.ye,e,r,s)}Ce(){this.we=!1,this.ge=N()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class v{constructor(e){this.Le=e,this.Be=new Map,this.ke=Nn(),this.qe=S(),this.Qe=new mn(Re)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:rt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const d=u.target;if(co(d))if(0===s){const g=new It(d.path);this.Ue(r,g,rr.newNoDocument(g,pt.min()))}else St(1===s);else{const g=this.Ye(r);if(g!==s){const w=this.Ze(e),b=w?this.Xe(w,e,g):1;0!==b&&(this.je(r),this.Qe=this.Qe.insert(r,2===b?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:d=0}=r;let g,w;try{g=ei(s).toUint8Array()}catch(b){if(b instanceof Di)return Wt("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{w=new Lu(g,u,d)}catch(b){return Wt(b instanceof va?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return 0===w.Ie?null:w}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(d=>{const g=this.Le.tt(),w=`projects/${g.projectId}/databases/${g.database}/documents/${d.path.canonicalString()}`;e.mightContain(w)||(this.Ue(r,d,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((d,g)=>{const w=this.Je(g);if(w){if(d.current&&co(w.target)){const b=new It(w.target.path);null!==this.ke.get(b)||this.it(g,b)||this.Ue(g,b,rr.newNoDocument(b,e))}d.be&&(r.set(g,d.ve()),d.Ce())}});let s=Lt();this.qe.forEach((d,g)=>{let w=!0;g.forEachWhile(b=>{const O=this.Je(b);return!O||"TargetPurposeLimboResolution"===O.purpose||(w=!1,!1)}),w&&(s=s.add(d))}),this.ke.forEach((d,g)=>g.setReadTime(e));const u=new Vu(e,r,this.Qe,this.ke,s);return this.ke=Nn(),this.qe=S(),this.Qe=new mn(Re),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new D,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new sn(Re),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||Ce("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new D),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function S(){return new mn(It.comparator)}function N(){return new mn(It.comparator)}const G={asc:"ASCENDING",desc:"DESCENDING"},X={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fe={and:"AND",or:"OR"};class Pe{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Dt(a,e){return a.useProto3Json||Pi(e)?e:{value:e}}function un(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function In(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function En(a,e){return un(a,e.toTimestamp())}function Jt(a){return St(!!a),pt.fromTimestamp(function(r){const s=on(r);return new vt(s.seconds,s.nanos)}(a))}function $o(a,e){return Ho(a,e).canonicalString()}function Ho(a,e){const r=(u=a,new wt(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function Fu(a){const e=wt.fromString(a);return St($u(e)),e}function gs(a,e){return $o(a.databaseId,e.path)}function ms(a,e){const r=Fu(e);if(r.get(1)!==a.databaseId.projectId)throw new Xe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Xe(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new It(Af(r))}function th(a,e){return $o(a.databaseId,e)}function Mc(a){const e=Fu(a);return 4===e.length?wt.emptyPath():Af(e)}function bs(a){return new wt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Af(a){return St(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function tu(a,e,r){return{name:gs(a,e),fields:r.value.mapValue.fields}}function Nc(a,e,r){const s=ms(a,e.name),u=Jt(e.updateTime),d=e.createTime?Jt(e.createTime):pt.min(),g=new Kr({mapValue:{fields:e.fields}}),w=rr.newFoundDocument(s,u,d,g);return r&&w.setHasCommittedMutations(),r?w.setHasCommittedMutations():w}function Ea(a,e){let r;if(e instanceof eu)r={update:tu(a,e.key,e.value)};else if(e instanceof ya)r={delete:gs(a,e.key)};else if(e instanceof di)r={update:tu(a,e.key,e.data),updateMask:ih(e.fieldMask)};else{if(!(e instanceof Pn))return rt();r={verify:gs(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof Vo)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof li)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof Ss)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof ga)return{fieldPath:g.field.canonicalString(),increment:w.Pe};throw rt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:En(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:rt()),r;var d}function nu(a,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?jn.updateTime(Jt(d.updateTime)):void 0!==d.exists?jn.exists(d.exists):jn.none():jn.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(g,w){let b=null;"setToServerValue"in w?(St("REQUEST_TIME"===w.setToServerValue),b=new Vo):"appendMissingElements"in w?b=new li(w.appendMissingElements.values||[]):"removeAllFromArray"in w?b=new Ss(w.removeAllFromArray.values||[]):"increment"in w?b=new ga(g,w.increment):rt();const O=kn.fromServerFormat(w.fieldPath);return new Qt(O,b)}(a,u)):[];var d;if(e.update){const u=ms(a,e.update.name),d=new Kr({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Zr((e.updateMask.fieldPaths||[]).map(j=>kn.fromServerFormat(j)));return new di(u,d,g,r,s)}return new eu(u,d,r,s)}if(e.delete){const u=ms(a,e.delete);return new ya(u,r)}if(e.verify){const u=ms(a,e.verify);return new Pn(u,r)}return rt()}function ru(a,e){return{documents:[th(a,e.path)]}}function fo(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=th(a,u);const d=function(O){if(0!==O.length)return ju(an.create(O,"and"))}(e.filters);d&&(r.structuredQuery.where=d);const g=function(O){if(0!==O.length)return O.map(j=>{return{field:Ta((se=j).field),direction:pg(se.dir)};var se})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const w=Dt(a,e.limit);return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt=function(O){return{before:!O.inclusive,values:O.position}}(e.endAt)),{_t:r,parent:u};var O}function iu(a){let e=Mc(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){St(1===s);const j=r.from[0];j.allDescendants?u=j.collectionId:e=e.child(j.collectionId)}let d=[];r.where&&(d=function(K){const se=fg(K);return se instanceof an&&Qa(se)?se.getFilters():[se]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(se=>{return new vi(wa((Je=se).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Je.direction));var Je}));let w=null;r.limit&&(w=function(K){let se;return se="object"==typeof K?K.value:K,Pi(se)?null:se}(r.limit));let b=null;var K;r.startAt&&(b=new Yi((K=r.startAt).values||[],!!K.before));let O=null;return r.endAt&&(O=function(K){return new Yi(K.values||[],!K.before)}(r.endAt)),wc(e,u,g,d,w,"F",b,O)}function fg(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=wa(r.unaryFilter.field);return Rn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=wa(r.unaryFilter.field);return Rn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=wa(r.unaryFilter.field);return Rn.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=wa(r.unaryFilter.field);return Rn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(a):void 0!==a.fieldFilter?Rn.create(wa((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return an.create(r.compositeFilter.filters.map(s=>fg(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return rt()}}(r.compositeFilter.op))}(a):rt();var r}function pg(a){return G[a]}function gg(a){return X[a]}function Df(a){return Fe[a]}function Ta(a){return{fieldPath:a.canonicalString()}}function wa(a){return kn.fromServerFormat(a.fieldPath)}function ju(a){return a instanceof Rn?function(r){if("=="===r.op){if(Pl(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NAN"}};if(oo(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Pl(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NOT_NAN"}};if(oo(r.value))return{unaryFilter:{field:Ta(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(r.field),op:gg(r.op),value:r.value}}}(a):a instanceof an?function(r){const s=r.getFilters().map(u=>ju(u));return 1===s.length?s[0]:{compositeFilter:{op:Df(r.op),filters:s}}}(a):rt()}function ih(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function $u(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class _s{constructor(e,r,s,u,d=pt.min(),g=pt.min(),w=qn.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=b}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Oc{constructor(e){this.ct=e}}function kc(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Lc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:gs(d=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:un(d,g.version.toTimestamp()),createTime:un(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:qs(e.version)};else{if(!e.isUnknownDocument())return rt();s.unknownDocument={path:r.path.toArray(),version:qs(e.version)}}var d,g;return s}function Lc(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function qs(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bi(a){const e=new vt(a.seconds,a.nanoseconds);return pt.fromTimestamp(e)}function su(a,e){const r=(e.baseMutations||[]).map(d=>nu(a.ct,d));for(let d=0;d<e.mutations.length-1;++d)d+1<e.mutations.length&&void 0!==e.mutations[d+1].transform&&(e.mutations[d].updateTransforms=e.mutations[d+1].transform.fieldTransforms,e.mutations.splice(d+1,1),++d);const s=e.mutations.map(d=>nu(a.ct,d)),u=vt.fromMillis(e.localWriteTimeMs);return new bc(e.batchId,u,r,s)}function po(a){const e=bi(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?bi(a.lastLimboFreeSnapshotVersion):pt.min();let s;return s=void 0!==a.query.documents?(St(1===(d=a.query).documents.length),A($s(Mc(d.documents[0])))):function(d){return A(iu(d))}(a.query),new _s(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,qn.fromBase64String(a.resumeToken));var d}function Hu(a,e){const r=qs(e.snapshotVersion),s=qs(e.lastLimboFreeSnapshotVersion);let u;u=co(e.target)?ru(a.ct,e.target):fo(a.ct,e.target)._t;const d=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:r,resumeToken:d,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function zu(a){const e=iu({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?ee(e,e.limit,"L"):e}function Gu(a,e){return new fs(e.largestBatchId,nu(a.ct,e.overlayMutation))}function Wu(a,e){const r=e.path.lastSegment();return[a,ar(e.path.popLast()),r]}function sh(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:qs(s.readTime),documentKey:ar(s.documentKey.path),largestBatchId:s.largestBatchId}}class oh{getBundleMetadata(e,r){return ah(e).get(r).next(s=>{if(s)return{id:(d=s).bundleId,createTime:bi(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return ah(e).put({bundleId:(u=r).id,createTime:qs(Jt(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return uh(e).get(r).next(s=>{if(s)return{name:(d=s).name,query:zu(d.bundledQuery),readTime:bi(d.readTime)};var d})}saveNamedQuery(e,r){return uh(e).put({name:(u=r).name,readTime:qs(Jt(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ah(a){return sr(a,"bundles")}function uh(a){return sr(a,"namedQueries")}class ou{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new ou(e,r.uid||"")}getOverlay(e,r){return Vc(e).get(Wu(this.userId,r)).next(s=>s?Gu(this.serializer,s):null)}getOverlays(e,r){const s=vr();return me.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((d,g)=>{const w=new fs(r,g);u.push(this.ht(e,w))}),me.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(g=>u.add(ar(g.getCollectionPath())));const d=[];return u.forEach(g=>{const w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);d.push(Vc(e).j("collectionPathOverlayIndex",w))}),me.waitFor(d)}getOverlaysForCollection(e,r,s){const u=vr(),d=ar(r),g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,Number.POSITIVE_INFINITY],!0);return Vc(e).U("collectionPathOverlayIndex",g).next(w=>{for(const b of w){const O=Gu(this.serializer,b);u.set(O.getKey(),O)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const d=vr();let g;const w=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Vc(e).J({index:"collectionGroupOverlayIndex",range:w},(b,O,j)=>{const K=Gu(this.serializer,O);d.size()<u||K.largestBatchId===g?(d.set(K.getKey(),K),g=K.largestBatchId):j.done()}).next(()=>d)}ht(e,r){return Vc(e).put(function(u,d,g){const[w,b,O]=Wu(d,g.mutation.key);return{userId:d,collectionPath:b,documentId:O,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Ea(u.ct,g.mutation)}}(this.serializer,this.userId,r))}}function Vc(a){return sr(a,"documentOverlays")}class Fl{Pt(e){return sr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?qn.fromUint8Array(s):qn.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class Li{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(hr(e.integerValue));else if("doubleValue"in e){const s=hr(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),wi(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=on(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(ei(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?vc(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Wn(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):rt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const s=e.fields||{};this.dt(r,55);for(const u of Object.keys(s))this.Vt(u,r),this.Tt(s[u],r)}wt(e,r){var s,u;const d=e.fields||{};this.dt(r,53);const g="value",w=(null===(u=null===(s=d[g].arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(hr(w)),this.Vt(g,r),this.Tt(d[g],r)}bt(e,r){const s=e.values||[];this.dt(r,50);for(const u of s)this.Tt(u,r)}yt(e,r){this.dt(r,37),It.fromName(e).path.forEach(s=>{this.dt(r,60),this.Dt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function mg(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function ch(a){const e=64-function(s){let u=0;for(let d=0;d<8;++d){const g=mg(255&s[d]);if(u+=g,8!==g)break}return u}(a);return Math.ceil(e/8)}Li.vt=new Li;class Ul{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ft(s.value),s=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ot(s.value),s=r.next();this.Nt()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(e){const r=this.qt(e),s=ch(r);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(e){const r=this.qt(e),s=ch(r);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ft(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class Fc{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lh{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Br{constructor(){this.jt=new Ul,this.Ht=new Fc(this.jt),this.Jt=new lh(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class zo{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Zt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new zo(this.indexId,this.documentKey,this.arrayValue,s)}}function go(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=Ku(a.arrayValue,e.arrayValue),0!==r?r:(r=Ku(a.directionalValue,e.directionalValue),0!==r?r:It.comparator(a.documentKey,e.documentKey)))}function Ku(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Sf{constructor(e){this.Xt=new sn((r,s)=>kn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const s=r;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(St(e.collectionGroup===this.collectionId),this.nn)return!1;const r=ui(e);if(void 0!==r&&!this.sn(r))return!1;const s=Hr(e);let u=new Set,d=0,g=0;for(;d<s.length&&this.sn(s[d]);++d)u=u.add(s[d].fieldPath.canonicalString());if(d===s.length)return!0;if(this.Xt.size>0){const w=this.Xt.getIterator().getNext();if(!u.has(w.field.canonicalString())){const b=s[d];if(!this.on(w,b)||!this._n(this.en[g++],b))return!1}++d}for(;d<s.length;++d)if(g>=this.en.length||!this._n(this.en[g++],s[d]))return!1;return!0}an(){if(this.nn)return null;let e=new sn(kn.comparator);const r=[];for(const s of this.tn)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new rn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new rn(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new rn(s.field,"asc"===s.dir?0:1)));return new Cr(Cr.UNKNOWN_ID,this.collectionId,r,Le.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Bl(a){var e,r;if(St(a instanceof Rn||a instanceof an),a instanceof Rn){if(a instanceof uo){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(d=>Rn.create(a.field,"==",d)))||[];return an.create(u,"or")}return a}const s=a.filters.map(u=>Bl(u));return an.create(s,a.op)}function jl(a){if(0===a.getFilters().length)return[];const e=qu(Bl(a));return St(Da(e)),Go(e)||Aa(e)?[e]:e.getFilters()}function Go(a){return a instanceof Rn}function Aa(a){return a instanceof an&&Qa(a)}function Da(a){return Go(a)||Aa(a)||function(r){if(r instanceof an&&qr(r)){for(const s of r.getFilters())if(!Go(s)&&!Aa(s))return!1;return!0}return!1}(a)}function qu(a){if(St(a instanceof Rn||a instanceof an),a instanceof Rn)return a;if(1===a.filters.length)return qu(a.filters[0]);const e=a.filters.map(s=>qu(s));let r=an.create(e,a.op);return r=dh(r),Da(r)?r:(St(r instanceof an),St(Xi(r)),St(r.filters.length>1),r.filters.reduce((s,u)=>Uc(s,u)))}function Uc(a,e){let r;return St(a instanceof Rn||a instanceof an),St(e instanceof Rn||e instanceof an),r=a instanceof Rn?e instanceof Rn?an.create([a,e],"and"):au(a,e):e instanceof Rn?au(e,a):function(u,d){if(St(u.filters.length>0&&d.filters.length>0),Xi(u)&&Xi(d))return ao(u,d.getFilters());const g=qr(u)?u:d,w=qr(u)?d:u,b=g.filters.map(O=>Uc(O,w));return an.create(b,"or")}(a,e),dh(r)}function au(a,e){if(Xi(e))return ao(e,a.getFilters());{const r=e.filters.map(s=>Uc(a,s));return an.create(r,"or")}}function dh(a){if(St(a instanceof Rn||a instanceof an),a instanceof Rn)return a;const e=a.getFilters();if(1===e.length)return dh(e[0]);if(No(a))return a;const r=e.map(u=>dh(u)),s=[];return r.forEach(u=>{u instanceof Rn?s.push(u):u instanceof an&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:an.create(s,a.op)}class hh{constructor(){this.un=new bf}addToCollectionParentIndex(e,r){return this.un.add(r),me.resolve()}getCollectionParents(e,r){return me.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return me.resolve()}deleteFieldIndex(e,r){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,r){return me.resolve()}getDocumentsMatchingTarget(e,r){return me.resolve(null)}getIndexType(e,r){return me.resolve(0)}getFieldIndexes(e,r){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,r){return me.resolve(ht.min())}getMinOffsetFromCollectionGroup(e,r){return me.resolve(ht.min())}updateCollectionGroup(e,r,s){return me.resolve()}updateIndexEntries(e,r){return me.resolve()}}class bf{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new sn(wt.comparator),d=!u.has(s);return this.index[r]=u.add(s),d}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new sn(wt.comparator)).toArray()}}const fh=new Uint8Array(0);class _g{constructor(e,r){this.databaseId=r,this.cn=new bf,this.ln=new Kn(s=>Oo(s),(s,u)=>ko(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:s,parent:ar(u)};return yg(e).put(d)}return me.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[jt(r),""],!1,!0);return yg(e).U(u).next(d=>{for(const g of d){if(g.collectionId!==r)break;s.push(Ki(g.parent))}return s})}addFieldIndex(e,r){const s=$l(e),u={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var w;delete u.indexId;const d=s.add(u);if(r.indexState){const g=Qs(e);return d.next(w=>{g.put(sh(w,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(e,r){const s=$l(e),u=Qs(e),d=Ca(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=$l(e),s=Ca(e),u=Qs(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return me.forEach(this.hn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const d=new Sf(s).an();if(null!=d)return this.addFieldIndex(e,d)}}))}getDocumentsMatchingTarget(e,r){const s=Ca(e);let u=!0;const d=new Map;return me.forEach(this.hn(r),g=>this.Pn(e,g).next(w=>{u&&(u=!!w),d.set(g,w)})).next(()=>{if(u){let g=Lt();const w=[];return me.forEach(d,(b,O)=>{var Tt;Ce("IndexedDbIndexManager",`Using index ${Tt=b,`id=${Tt.indexId}|cg=${Tt.collectionGroup}|f=${Tt.fields.map(zt=>`${zt.fieldPath}:${zt.kind}`).join(",")}`} to execute ${Oo(r)}`);const j=function(Tt,zt){const yn=ui(zt);if(void 0===yn)return null;for(const ln of Lo(Tt,yn.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(O,b),K=function(Tt,zt){const yn=new Map;for(const ln of Hr(zt))for(const ge of Lo(Tt,ln.fieldPath))switch(ge.op){case"==":case"in":yn.set(ln.fieldPath.canonicalString(),ge.value);break;case"not-in":case"!=":return yn.set(ln.fieldPath.canonicalString(),ge.value),Array.from(yn.values())}return null}(O,b),se=function(Tt,zt){const yn=[];let ln=!0;for(const ge of Hr(zt)){const te=0===ge.kind?Nl(Tt,ge.fieldPath,Tt.startAt):xu(Tt,ge.fieldPath,Tt.startAt);yn.push(te.value),ln&&(ln=te.inclusive)}return new Yi(yn,ln)}(O,b),Me=function(Tt,zt){const yn=[];let ln=!0;for(const ge of Hr(zt)){const te=0===ge.kind?xu(Tt,ge.fieldPath,Tt.endAt):Nl(Tt,ge.fieldPath,Tt.endAt);yn.push(te.value),ln&&(ln=te.inclusive)}return new Yi(yn,ln)}(O,b),Je=this.In(b,O,se),dt=this.In(b,O,Me),st=this.Tn(b,O,K),kt=this.En(b.indexId,j,Je,se.inclusive,dt,Me.inclusive,st);return me.forEach(kt,Ht=>s.G(Ht,r.limit).next(Tt=>{Tt.forEach(zt=>{const yn=It.fromSegments(zt.documentKey);g.has(yn)||(g=g.add(yn),w.push(yn))})}))}).next(()=>w)}return me.resolve(null)})}hn(e){let r=this.ln.get(e);return r||(r=0===e.filters.length?[e]:jl(an.create(e.filters,"and")).map(s=>ha(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,r),r)}En(e,r,s,u,d,g,w){const b=(null!=r?r.length:1)*Math.max(s.length,d.length),O=b/(null!=r?r.length:1),j=[];for(let K=0;K<b;++K){const se=r?this.dn(r[K/O]):fh,Me=this.An(e,se,s[K%O],u),Je=this.Rn(e,se,d[K%O],g),dt=w.map(st=>this.An(e,se,st,!0));j.push(...this.createRange(Me,Je,dt))}return j}An(e,r,s,u){const d=new zo(e,It.empty(),r,s);return u?d:d.Zt()}Rn(e,r,s,u){const d=new zo(e,It.empty(),r,s);return u?d.Zt():d}Pn(e,r){const s=new Sf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(d=>{let g=null;for(const w of d)s.rn(w)&&(!g||w.fields.length>g.fields.length)&&(g=w);return g})}getIndexType(e,r){let s=2;const u=this.hn(r);return me.forEach(u,d=>this.Pn(e,d).next(g=>{g?0!==s&&g.fields.length<function(b){let O=new sn(kn.comparator),j=!1;for(const K of b.filters)for(const se of K.getFlattenedFilters())se.field.isKeyField()||("array-contains"===se.op||"array-contains-any"===se.op?j=!0:O=O.add(se.field));for(const K of b.orderBy)K.field.isKeyField()||(O=O.add(K.field));return O.size+(j?1:0)}(d)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}Vn(e,r){const s=new Br;for(const u of Hr(e)){const d=r.data.field(u.fieldPath);if(null==d)return null;const g=s.Yt(u.kind);Li.vt.It(d,g)}return s.zt()}dn(e){const r=new Br;return Li.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const s=new Br;return Li.vt.It(so(this.databaseId,r),s.Yt(function(d){const g=Hr(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.zt()}Tn(e,r,s){if(null===s)return[];let u=[];u.push(new Br);let d=0;for(const g of Hr(e)){const w=s[d++];for(const b of u)if(this.fn(r,g.fieldPath)&&Tr(w))u=this.gn(u,g,w);else{const O=b.Yt(g.kind);Li.vt.It(w,O)}}return this.pn(u)}In(e,r,s){return this.Tn(e,r,s.position)}pn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].zt();return r}gn(e,r,s){const u=[...e],d=[];for(const g of s.arrayValue.values||[])for(const w of u){const b=new Br;b.seed(w.zt()),Li.vt.It(g,b.Yt(r.kind)),d.push(b)}return d}fn(e,r){return!!e.filters.find(s=>s instanceof Rn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=$l(e),u=Qs(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(d=>{const g=[];return me.forEach(d,w=>u.get([w.indexId,this.uid]).next(b=>{g.push(function(j,K){const se=K?new Le(K.sequenceNumber,new ht(bi(K.readTime),new It(Ki(K.documentKey)),K.largestBatchId)):Le.empty(),Me=j.fields.map(([Je,dt])=>new rn(kn.fromServerFormat(Je),dt));return new Cr(j.indexId,j.collectionGroup,Me,se)}(w,b))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const d=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Re(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=$l(e),d=Qs(e);return this.yn(e).next(g=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(w=>me.forEach(w,b=>d.put(sh(b.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return me.forEach(r,(u,d)=>{const g=s.get(u.collectionGroup);return(g?me.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(w=>(s.set(u.collectionGroup,w),me.forEach(w,b=>this.wn(e,u,b).next(O=>{const j=this.Sn(d,b);return O.isEqual(j)?me.resolve():this.bn(e,d,b,O,j)}))))})}Dn(e,r,s,u){return Ca(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(s,r.key),documentKey:r.key.path.toArray()})}vn(e,r,s,u){return Ca(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(s,r.key),r.key.path.toArray()])}wn(e,r,s){const u=Ca(e);let d=new sn(go);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,r)])},(g,w)=>{d=d.add(new zo(s.indexId,r,w.arrayValue,w.directionalValue))}).next(()=>d)}Sn(e,r){let s=new sn(go);const u=this.Vn(r,e);if(null==u)return s;const d=ui(r);if(null!=d){const g=e.data.field(d.fieldPath);if(Tr(g))for(const w of g.arrayValue.values||[])s=s.add(new zo(r.indexId,e.key,this.dn(w),u))}else s=s.add(new zo(r.indexId,e.key,fh,u));return s}bn(e,r,s,u,d){Ce("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(b,O,j,K,se){const Me=b.getIterator(),Je=O.getIterator();let dt=Ai(Me),st=Ai(Je);for(;dt||st;){let kt=!1,Ht=!1;if(dt&&st){const Tt=j(dt,st);Tt<0?Ht=!0:Tt>0&&(kt=!0)}else null!=dt?Ht=!0:kt=!0;kt?(K(st),st=Ai(Je)):Ht?(se(dt),dt=Ai(Me)):(dt=Ai(Me),st=Ai(Je))}}(u,d,go,w=>{g.push(this.Dn(e,r,s,w))},w=>{g.push(this.vn(e,r,s,w))}),me.waitFor(g)}yn(e){let r=1;return Qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,w)=>go(g,w)).filter((g,w,b)=>!w||0!==go(g,b[w-1]));const u=[];u.push(e);for(const g of s){const w=go(g,e),b=go(g,r);if(0===w)u[0]=e.Zt();else if(w>0&&b<0)u.push(g),u.push(g.Zt());else if(b>0)break}u.push(r);const d=[];for(let g=0;g<u.length;g+=2){if(this.Cn(u[g],u[g+1]))return[];d.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,fh,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,fh,[]]))}return d}Cn(e,r){return go(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(Rf)}getMinOffset(e,r){return me.mapArray(this.hn(r),s=>this.Pn(e,s).next(u=>u||rt())).next(Rf)}}function yg(a){return sr(a,"collectionParents")}function Ca(a){return sr(a,"indexEntries")}function $l(a){return sr(a,"indexConfiguration")}function Qs(a){return sr(a,"indexState")}function Rf(a){St(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;$t(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new ht(e.readTime,e.documentKey,r)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qn{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Mf(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),d=[],g=IDBKeyRange.only(r.batchId);let w=0;const b=s.J({range:g},(j,K,se)=>(w++,se.delete()));d.push(b.next(()=>{St(1===w)}));const O=[];for(const j of r.mutations){const K=oa(e,j.key.path,r.batchId);d.push(u.delete(K)),O.push(j.key)}return me.waitFor(d).next(()=>O)}function Sa(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw rt();e=a.noDocument}return JSON.stringify(e).length}Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(41943040,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);class Hl{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Fn={}}static lt(e,r,s,u){St(""!==e.uid);const d=e.isAuthenticated()?e.uid:"";return new Hl(d,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).J({index:"userMutationsIndex",range:s},(u,d,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const d=uu(e),g=ys(e);return g.add({}).next(w=>{St("number"==typeof w);const b=new bc(w,r,s,u),O=function(Me,Je,dt){const st=dt.baseMutations.map(Ht=>Ea(Me.ct,Ht)),kt=dt.mutations.map(Ht=>Ea(Me.ct,Ht));return{userId:Je,batchId:dt.batchId,localWriteTimeMs:dt.localWriteTime.toMillis(),baseMutations:st,mutations:kt}}(this.serializer,this.userId,b),j=[];let K=new sn((se,Me)=>Re(se.canonicalString(),Me.canonicalString()));for(const se of u){const Me=oa(this.userId,se.key.path,w);K=K.add(se.key.path.popLast()),j.push(g.put(O)),j.push(d.put(Me,Pu))}return K.forEach(se=>{j.push(this.indexManager.addToCollectionParentIndex(e,se))}),e.addOnCommittedListener(()=>{this.Fn[w]=b.keys()}),me.waitFor(j).next(()=>b)})}lookupMutationBatch(e,r){return ys(e).get(r).next(s=>s?(St(s.userId===this.userId),su(this.serializer,s)):null)}Mn(e,r){return this.Fn[r]?me.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let d=null;return ys(e).J({index:"userMutationsIndex",range:u},(g,w,b)=>{w.userId===this.userId&&(St(w.batchId>=s),d=su(this.serializer,w)),b.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ys(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,g)=>{s=d.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ys(e).U("userMutationsIndex",r).next(s=>s.map(u=>su(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=bo(this.userId,r.path),u=IDBKeyRange.lowerBound(s),d=[];return uu(e).J({range:u},(g,w,b)=>{const[O,j,K]=g,se=Ki(j);if(O===this.userId&&r.path.isEqual(se))return ys(e).get(K).next(Me=>{if(!Me)throw rt();St(Me.userId===this.userId),d.push(su(this.serializer,Me))});b.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new sn(Re);const u=[];return r.forEach(d=>{const g=bo(this.userId,d.path),w=IDBKeyRange.lowerBound(g),b=uu(e).J({range:w},(O,j,K)=>{const[se,Me,Je]=O,dt=Ki(Me);se===this.userId&&d.path.isEqual(dt)?s=s.add(Je):K.done()});u.push(b)}),me.waitFor(u).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,d=bo(this.userId,s),g=IDBKeyRange.lowerBound(d);let w=new sn(Re);return uu(e).J({range:g},(b,O,j)=>{const[K,se,Me]=b,Je=Ki(se);K===this.userId&&s.isPrefixOf(Je)?Je.length===u&&(w=w.add(Me)):j.done()}).next(()=>this.xn(e,w))}xn(e,r){const s=[],u=[];return r.forEach(d=>{u.push(ys(e).get(d).next(g=>{if(null===g)throw rt();St(g.userId===this.userId),s.push(su(this.serializer,g))}))}),me.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return Mf(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.On(r.batchId)}),me.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return me.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return uu(e).J({range:s},(d,g,w)=>{if(d[0]===this.userId){const b=Ki(d[1]);u.push(b)}else w.done()}).next(()=>{St(0===u.length)})})}containsKey(e,r){return Vi(e,this.userId,r)}Nn(e){return Bc(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vi(a,e,r){const s=bo(e,r.path),u=s[1],d=IDBKeyRange.lowerBound(s);let g=!1;return uu(a).J({range:d,H:!0},(w,b,O)=>{const[j,K,se]=w;j===e&&K===u&&(g=!0),O.done()}).next(()=>g)}function ys(a){return sr(a,"mutations")}function uu(a){return sr(a,"documentMutations")}function Bc(a){return sr(a,"mutationQueues")}class Ys{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ys(0)}static kn(){return new Ys(-1)}}class vg{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next(r=>{const s=new Ys(r.highestTargetId);return r.highestTargetId=s.next(),this.Qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(r=>pt.fromTimestamp(new vt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.qn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(e,u)))}addTargetData(e,r){return this.Kn(e,r).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(r,s),this.Qn(e,s))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Qu(e).delete(r.targetId)).next(()=>this.qn(e)).next(s=>(St(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,r,s){let u=0;const d=[];return Qu(e).J((g,w)=>{const b=po(w);b.sequenceNumber<=r&&null===s.get(b.targetId)&&(u++,d.push(this.removeTargetData(e,b)))}).next(()=>me.waitFor(d)).next(()=>u)}forEachTarget(e,r){return Qu(e).J((s,u)=>{const d=po(u);r(d)})}qn(e){return Nf(e).get("targetGlobalKey").next(r=>(St(null!==r),r))}Qn(e,r){return Nf(e).put("targetGlobalKey",r)}Kn(e,r){return Qu(e).put(Hu(this.serializer,r))}$n(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Oo(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let d=null;return Qu(e).J({range:u,index:"queryTargetsIndex"},(g,w,b)=>{const O=po(w);ko(r,O.target)&&(d=O,b.done())}).next(()=>d)}addMatchingKeys(e,r,s){const u=[],d=cu(e);return r.forEach(g=>{const w=ar(g.path);u.push(d.put({targetId:s,path:w})),u.push(this.referenceDelegate.addReference(e,s,g))}),me.waitFor(u)}removeMatchingKeys(e,r,s){const u=cu(e);return me.forEach(r,d=>{const g=ar(d.path);return me.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,d)])})}removeMatchingKeysForTargetId(e,r){const s=cu(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=cu(e);let d=Lt();return u.J({range:s,H:!0},(g,w,b)=>{const O=Ki(g[1]),j=new It(O);d=d.add(j)}).next(()=>d)}containsKey(e,r){const s=ar(r.path),u=IDBKeyRange.bound([s],[jt(s)],!1,!0);let d=0;return cu(e).J({index:"documentTargetsIndex",H:!0,range:u},([g,w],b,O)=>{0!==g&&(d++,O.done())}).next(()=>d>0)}ot(e,r){return Qu(e).get(r).next(s=>s?po(s):null)}}function Qu(a){return sr(a,"targets")}function Nf(a){return sr(a,"targetGlobal")}function cu(a){return sr(a,"targetDocuments")}function es([a,e],[r,s]){const u=Re(a,r);return 0===u?Re(e,s):u}class ph{constructor(e){this.Un=e,this.buffer=new sn(es),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();es(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class lu{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var r=this;Ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){us(s)?Ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Cn(s)}yield r.Hn(3e5)}))}}class xf{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return me.resolve(zr.oe);const s=new ph(r);return this.Jn.forEachTarget(e,u=>s.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(e,u=>s.zn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Pf)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Xn(e,r))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let s,u,d,g,w,b,O;const j=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),u=this.params.maximumSequenceNumbersToCollect):u=K,g=Date.now(),this.nthSequenceNumber(e,u))).next(K=>(s=K,w=Date.now(),this.removeTargets(e,s,r))).next(K=>(d=K,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(K=>(O=Date.now(),yr()<=Ut.$b.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-j}ms\n\tDetermined least recently used ${u} in `+(w-g)+`ms\n\tRemoved ${d} targets in `+(b-w)+`ms\n\tRemoved ${K} documents in `+(O-b)+`ms\nTotal Duration: ${O-j}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:K})))}}class Ig{constructor(e,r){this.db=e,this.garbageCollector=function jc(a,e){return new xf(a,e)}(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}er(e){let r=0;return this.Zn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,(s,u)=>r(u))}addReference(e,r,s){return Yu(e,s)}removeReference(e,r,s){return Yu(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return Yu(e,r)}nr(e,r){return function(u,d){let g=!1;return Bc(u).Y(w=>Vi(u,w,d).next(b=>(b&&(g=!0),me.resolve(!b)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(e,(g,w)=>{if(w<=r){const b=this.nr(e,g).next(O=>{if(!O)return d++,s.getEntry(e,g).next(()=>(s.removeEntry(g,pt.min()),cu(e).delete([0,ar(g.path)])))});u.push(b)}}).next(()=>me.waitFor(u)).next(()=>s.apply(e)).next(()=>d)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return Yu(e,r)}tr(e,r){const s=cu(e);let u,d=zr.oe;return s.J({index:"documentTargetsIndex"},([g,w],{path:b,sequenceNumber:O})=>{0===g?(d!==zr.oe&&r(new It(Ki(u)),d),d=O,u=b):d=zr.oe}).next(()=>{d!==zr.oe&&r(new It(Ki(u)),d)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yu(a,e){return cu(a).put((u=a.currentSequenceNumber,{targetId:0,path:ar(e.path),sequenceNumber:u}));var u}class Of{constructor(){this.changes=new Kn(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?me.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return Wo(e).put(s)}removeEntry(e,r,s){return Wo(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Lc(g),w[w.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.rr(e,s)))}getEntry(e,r){let s=rr.newInvalidDocument(r);return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(r))},(u,d)=>{s=this.ir(r,d)}).next(()=>s)}sr(e,r){let s={size:0,document:rr.newInvalidDocument(r)};return Wo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(du(r))},(u,d)=>{s={document:this.ir(r,d),size:Sa(d)}}).next(()=>s)}getEntries(e,r){let s=Nn();return this._r(e,r,(u,d)=>{const g=this.ir(u,d);s=s.insert(u,g)}).next(()=>s)}ar(e,r){let s=Nn(),u=new mn(It.comparator);return this._r(e,r,(d,g)=>{const w=this.ir(d,g);s=s.insert(d,w),u=u.insert(d,Sa(g))}).next(()=>({documents:s,ur:u}))}_r(e,r,s){if(r.isEmpty())return me.resolve();let u=new sn($c);r.forEach(b=>u=u.add(b));const d=IDBKeyRange.bound(du(u.first()),du(u.last())),g=u.getIterator();let w=g.getNext();return Wo(e).J({index:"documentKeyIndex",range:d},(b,O,j)=>{const K=It.fromSegments([...O.prefixPath,O.collectionGroup,O.documentId]);for(;w&&$c(w,K)<0;)s(w,null),w=g.getNext();w&&w.isEqual(K)&&(s(w,O),w=g.hasNext()?g.getNext():null),w?j.$(du(w)):j.done()}).next(()=>{for(;w;)s(w,null),w=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,d){const g=r.path,w=[g.popLast().toArray(),g.lastSegment(),Lc(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],b=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wo(e).U(IDBKeyRange.bound(w,b,!0)).next(O=>{d?.incrementDocumentReadCount(O.length);let j=Nn();for(const K of O){const se=this.ir(It.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);se.isFoundDocument()&&(Ln(r,se)||u.has(se.key))&&(j=j.insert(se.key,se))}return j})}getAllFromCollectionGroup(e,r,s,u){let d=Nn();const g=Xu(r,s),w=Xu(r,ht.max());return Wo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,w,!0)},(b,O,j)=>{const K=this.ir(It.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);d=d.insert(K.key,K),d.size===u&&j.done()}).next(()=>d)}newChangeBuffer(e){return new mh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return zl(e).get("remoteDocumentGlobalKey").next(r=>(St(!!r),r))}rr(e,r){return zl(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const s=function Cf(a,e){let r;if(e.document)r=Nc(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=It.fromSegments(e.noDocument.path),u=bi(e.noDocument.readTime);r=rr.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const s=It.fromSegments(e.unknownDocument.path),u=bi(e.unknownDocument.version);r=rr.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const d=new vt(u[0],u[1]);return pt.fromTimestamp(d)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(pt.min()))return s}return rr.newInvalidDocument(e)}}function gh(a){return new kf(a)}class mh extends Of{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Kn(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new sn((d,g)=>Re(d.canonicalString(),g.canonicalString()));return this.changes.forEach((d,g)=>{const w=this.lr.get(d);if(r.push(this.cr.removeEntry(e,d,w.readTime)),g.isValidDocument()){const b=kc(this.cr.serializer,g);u=u.add(d.path.popLast());const O=Sa(b);s+=O-w.size,r.push(this.cr.addEntry(e,d,b))}else if(s-=w.size,this.trackRemovals){const b=kc(this.cr.serializer,g.convertToNoDocument(pt.min()));r.push(this.cr.addEntry(e,d,b))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,d))}),r.push(this.cr.updateMetadata(e,s)),me.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next(s=>(this.lr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.cr.ar(e,r).next(({documents:s,ur:u})=>(u.forEach((d,g)=>{this.lr.set(d,{size:g,readTime:s.get(d).readTime})}),s))}}function zl(a){return sr(a,"remoteDocumentGlobal")}function Wo(a){return sr(a,"remoteDocumentsV14")}function du(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xu(a,e){const r=e.documentKey.path.toArray();return[a,Lc(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function $c(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<s.length-2;++d)if(u=Re(r[d],s[d]),u)return u;return u=Re(r.length,s.length),u||(u=Re(r[r.length-2],s[s.length-2]),u||Re(r[r.length-1],s[s.length-1]))}class Hc{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class _h{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&_a(s.mutation,u,Zr.empty(),vt.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,Lt()).next(()=>s))}getLocalViewOfDocuments(e,r,s=Lt()){const u=vr();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(d=>{let g=ni();return d.forEach((w,b)=>{g=g.insert(w,b.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=vr();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,Lt()))}populateOverlays(e,r,s){const u=[];return s.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(e,u).next(d=>{d.forEach((g,w)=>{r.set(g,w)})})}computeViews(e,r,s,u){let d=Nn();const g=Pr(),w=Pr();return r.forEach((b,O)=>{const j=s.get(O.key);u.has(O.key)&&(void 0===j||j.mutation instanceof di)?d=d.insert(O.key,O):void 0!==j?(g.set(O.key,j.mutation.getFieldMask()),_a(j.mutation,O,j.mutation.getFieldMask(),vt.now())):g.set(O.key,Zr.empty())}),this.recalculateAndSaveOverlays(e,d).next(b=>(b.forEach((O,j)=>g.set(O,j)),r.forEach((O,j)=>{var K;return w.set(O,new Hc(j,null!==(K=g.get(O))&&void 0!==K?K:null))}),w))}recalculateAndSaveOverlays(e,r){const s=Pr();let u=new mn((g,w)=>g-w),d=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const w of g)w.keys().forEach(b=>{const O=r.get(b);if(null===O)return;let j=s.get(b)||Zr.empty();j=w.applyToLocalView(O,j),s.set(b,j);const K=(u.get(w.batchId)||Lt()).add(b);u=u.insert(w.batchId,K)})}).next(()=>{const g=[],w=u.getReverseIterator();for(;w.hasNext();){const b=w.getNext(),O=b.key,j=b.value,K=Cs();j.forEach(se=>{if(!d.has(se)){const Me=Sc(r.get(se),s.get(se));null!==Me&&K.set(se,Me),d=d.add(se)}}),g.push(this.documentOverlayCache.saveOverlays(e,O,K))}return me.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return It.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):fa(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var g}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(d=>{const g=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-d.size):me.resolve(vr());let w=-1,b=d;return g.next(O=>me.forEach(O,(j,K)=>(w<K.largestBatchId&&(w=K.largestBatchId),d.get(j)?me.resolve():this.remoteDocumentCache.getEntry(e,j).next(se=>{b=b.insert(j,se)}))).next(()=>this.populateOverlays(e,O,d)).next(()=>this.computeViews(e,b,O,Lt())).next(j=>({batchId:w,changes:Hs(j)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new It(r)).next(s=>{let u=ni();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const d=r.collectionGroup;let g=ni();return this.indexManager.getCollectionParents(e,d).next(w=>me.forEach(w,b=>{const O=(K=r,se=b.child(d),new Si(se,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,se;return this.getDocumentsMatchingCollectionQuery(e,O,s,u).next(j=>{j.forEach((K,se)=>{g=g.insert(K,se)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,d,u))).next(g=>{d.forEach((b,O)=>{const j=O.getKey();null===g.get(j)&&(g=g.insert(j,rr.newInvalidDocument(j)))});let w=ni();return g.forEach((b,O)=>{const j=d.get(b);void 0!==j&&_a(j.mutation,O,Zr.empty(),vt.now()),Ln(r,O)&&(w=w.insert(b,O))}),w})}}class Lf{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return me.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Jt(u.createTime)}),me.resolve();var u}getNamedQuery(e,r){return me.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,{name:(u=r).name,query:zu(u.bundledQuery),readTime:Jt(u.readTime)}),me.resolve();var u}}class yh{constructor(){this.overlays=new mn(It.comparator),this.Ir=new Map}getOverlay(e,r){return me.resolve(this.overlays.get(r))}getOverlays(e,r){const s=vr();return me.forEach(r,u=>this.getOverlay(e,u).next(d=>{null!==d&&s.set(u,d)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,d)=>{this.ht(e,r,d)}),me.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.Ir.get(s);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(s)),me.resolve()}getOverlaysForCollection(e,r,s){const u=vr(),d=r.length+1,g=new It(r.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const b=w.getNext().value,O=b.getKey();if(!r.isPrefixOf(O.path))break;O.path.length===d&&b.largestBatchId>s&&u.set(b.getKey(),b)}return me.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let d=new mn((O,j)=>O-j);const g=this.overlays.getIterator();for(;g.hasNext();){const O=g.getNext().value;if(O.getKey().getCollectionGroup()===r&&O.largestBatchId>s){let j=d.get(O.largestBatchId);null===j&&(j=vr(),d=d.insert(O.largestBatchId,j)),j.set(O.getKey(),O)}}const w=vr(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((O,j)=>w.set(O,j)),!(w.size()>=u)););return me.resolve(w)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.Ir.get(u.largestBatchId).delete(s.key);this.Ir.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new fs(r,s));let d=this.Ir.get(r);void 0===d&&(d=Lt(),this.Ir.set(r,d)),this.Ir.set(r,d.add(s.key))}}class Gl{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,me.resolve()}}class Wl{constructor(){this.Tr=new sn(hi.Er),this.dr=new sn(hi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const s=new hi(e,r);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Vr(new hi(e,r))}mr(e,r){e.forEach(s=>this.removeReference(s,r))}gr(e){const r=new It(new wt([])),s=new hi(r,e),u=new hi(r,e+1),d=[];return this.dr.forEachInRange([s,u],g=>{this.Vr(g),d.push(g.key)}),d}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new It(new wt([])),s=new hi(r,e),u=new hi(r,e+1);let d=Lt();return this.dr.forEachInRange([s,u],g=>{d=d.add(g.key)}),d}containsKey(e){const r=new hi(e,0),s=this.Tr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class hi{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return It.comparator(e.key,r.key)||Re(e.wr,r.wr)}static Ar(e,r){return Re(e.wr,r.wr)||It.comparator(e.key,r.key)}}class Vf{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new sn(hi.Er)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const d=this.Sr;this.Sr++;const g=new bc(d,r,s,u);this.mutationQueue.push(g);for(const w of u)this.br=this.br.add(new hi(w.key,d)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return me.resolve(g)}lookupMutationBatch(e,r){return me.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.vr(r+1),d=u<0?0:u;return me.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new hi(r,0),u=new hi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([s,u],g=>{const w=this.Dr(g.wr);d.push(w)}),me.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new sn(Re);return r.forEach(u=>{const d=new hi(u,0),g=new hi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,g],w=>{s=s.add(w.wr)})}),me.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let d=s;It.isDocumentKey(d)||(d=d.child(""));const g=new hi(new It(d),0);let w=new sn(Re);return this.br.forEachWhile(b=>{const O=b.key.path;return!!s.isPrefixOf(O)&&(O.length===u&&(w=w.add(b.wr)),!0)},g),me.resolve(this.Cr(w))}Cr(e){const r=[];return e.forEach(s=>{const u=this.Dr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){St(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.br;return me.forEach(r.mutations,u=>{const d=new hi(u.key,r.batchId);return s=s.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,r){const s=new hi(r,0),u=this.br.firstAfterOrEqual(s);return me.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return me.resolve()}Fr(e,r){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Ju{constructor(e){this.Mr=e,this.docs=new mn(It.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),d=u?u.size:0,g=this.Mr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-d,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return me.resolve(s?s.document.mutableCopy():rr.newInvalidDocument(r))}getEntries(e,r){let s=Nn();return r.forEach(u=>{const d=this.docs.get(u);s=s.insert(u,d?d.document.mutableCopy():rr.newInvalidDocument(u))}),me.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let d=Nn();const g=r.path,w=new It(g.child("")),b=this.docs.getIteratorFrom(w);for(;b.hasNext();){const{key:O,value:{document:j}}=b.getNext();if(!g.isPrefixOf(O.path))break;O.path.length>g.length+1||$t(We(j),s)<=0||(u.has(j.key)||Ln(r,j))&&(d=d.insert(j.key,j.mutableCopy()))}return me.resolve(d)}getAllFromCollectionGroup(e,r,s,u){rt()}Or(e,r){return me.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new Kl(this)}getSize(e){return me.resolve(this.size)}}class Kl extends Of{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(e,u)):this.cr.removeEntry(s)}),me.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}class Eg{constructor(e){this.persistence=e,this.Nr=new Kn(r=>Oo(r),ko),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wl,this.targetCount=0,this.kr=Ys.Bn()}forEachTarget(e,r){return this.Nr.forEach((s,u)=>r(u)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Lr&&(this.Lr=r),me.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ys(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,me.resolve()}updateTargetData(e,r){return this.Kn(r),me.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,r,s){let u=0;const d=[];return this.Nr.forEach((g,w)=>{w.sequenceNumber<=r&&null===s.get(w.targetId)&&(this.Nr.delete(g),d.push(this.removeMatchingKeysForTargetId(e,w.targetId)),u++)}),me.waitFor(d).next(()=>u)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,r){const s=this.Nr.get(r)||null;return me.resolve(s)}addMatchingKeys(e,r,s){return this.Br.Rr(r,s),me.resolve()}removeMatchingKeys(e,r,s){this.Br.mr(r,s);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(g=>{d.push(u.markPotentiallyOrphaned(e,g))}),me.waitFor(d)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),me.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Br.yr(r);return me.resolve(s)}containsKey(e,r){return me.resolve(this.Br.containsKey(r))}}class ba{constructor(e,r){this.qr={},this.overlays={},this.Qr=new zr(0),this.Kr=!1,this.Kr=!0,this.$r=new Gl,this.referenceDelegate=e(this),this.Ur=new Eg(this),this.indexManager=new hh,this.remoteDocumentCache=new Ju(s=>this.referenceDelegate.Wr(s)),this.serializer=new Oc(r),this.Gr=new Lf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new yh,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.qr[e.toKey()];return s||(s=new Vf(r,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ce("MemoryPersistence","Starting transaction:",e);const u=new Ff(this.Qr.next());return this.referenceDelegate.zr(),s(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(e,r){return me.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,r)))}}class Ff extends fn{constructor(e){super(),this.currentSequenceNumber=e}}class ql{constructor(e){this.persistence=e,this.Jr=new Wl,this.Yr=null}static Zr(e){return new ql(e)}get Xr(){if(this.Yr)return this.Yr;throw rt()}addReference(e,r,s){return this.Jr.addReference(s,r),this.Xr.delete(s.toString()),me.resolve()}removeReference(e,r,s){return this.Jr.removeReference(s,r),this.Xr.add(s.toString()),me.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),me.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>s.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xr,s=>{const u=It.fromPath(s);return this.ei(e,u).next(d=>{d||r.removeEntry(u,pt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(s=>{s?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return me.or([()=>me.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}class Tg{constructor(e){this.serializer=e}O(e,r,s,u){const d=new vn("createOrUpgrade",r);var b;s<1&&u>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0}),b.createObjectStore("documentMutations"),Ql(e),function(b){b.createObjectStore("remoteDocuments")}(e));let g=me.resolve();return s<3&&u>=3&&(0!==s&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),Ql(e)),g=g.next(()=>function(b){const O=b.store("targetGlobal"),j={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",j)}(d))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(b,O){return O.store("mutations").U().next(j=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",za,{unique:!0});const K=O.store("mutations"),se=j.map(Me=>K.put(Me));return me.waitFor(se)})}(e,d))),g=g.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.ni(d))),s<6&&u>=6&&(g=g.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.ri(d)))),s<7&&u>=7&&(g=g.next(()=>this.ii(d))),s<8&&u>=8&&(g=g.next(()=>this.si(e,d))),s<9&&u>=9&&(g=g.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.oi(d))),s<11&&u>=11&&(g=g.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(b){const O=b.createObjectStore("documentOverlays",{keyPath:Mi});O.createIndex("collectionPathOverlayIndex",qi,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",dr,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(b){const O=b.createObjectStore("remoteDocumentsV14",{keyPath:Mu});O.createIndex("documentKeyIndex",xs),O.createIndex("collectionGroupIndex",aa)}(e)).next(()=>this._i(e,d)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.ai(e,d))),s<15&&u>=15&&(g=g.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:kr}).createIndex("sequenceNumberIndex",Ga,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:no}).createIndex("documentKeyIndex",ro,{unique:!1})}(e))),s<16&&u>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&u>=17&&(g=g.next(()=>{!function(b){b.createObjectStore("globals",{keyPath:"name"})}(e)})),g}ri(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=Sa(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>me.forEach(u,d=>{const g=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(w=>me.forEach(w,b=>{St(b.userId===d.userId);const O=su(this.serializer,b);return Mf(e,d.userId,O).next(()=>{})}))}))}ii(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return s.J((g,w)=>{const b=new wt(g),O=[0,ar(b)];d.push(r.get(O).next(j=>j?me.resolve():r.put({targetId:0,path:ar(b),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>me.waitFor(d))})}si(e,r){e.createObjectStore("collectionParents",{keyPath:to});const s=r.store("collectionParents"),u=new bf,d=g=>{if(u.add(g)){const w=g.lastSegment(),b=g.popLast();return s.put({collectionId:w,parent:ar(b)})}};return r.store("remoteDocuments").J({H:!0},(g,w)=>{const b=new wt(g);return d(b.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,w,b],O)=>{const j=Ki(w);return d(j.popLast())}))}oi(e){const r=e.store("targets");return r.J((s,u)=>{const d=po(u),g=Hu(this.serializer,d);return r.put(g)})}_i(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((d,g)=>{const w=r.store("remoteDocumentsV14"),b=(K=g,K.document?new It(wt.fromString(K.document.name).popFirst(5)):K.noDocument?It.fromSegments(K.noDocument.path):K.unknownDocument?It.fromSegments(K.unknownDocument.path):rt()).path.toArray(),O={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var K;u.push(w.put(O))}).next(()=>me.waitFor(u))}ai(e,r){const s=r.store("mutations"),u=gh(this.serializer),d=new ba(ql.Zr,this.serializer.ct);return s.U().next(g=>{const w=new Map;return g.forEach(b=>{var O;let j=null!==(O=w.get(b.userId))&&void 0!==O?O:Lt();su(this.serializer,b).keys().forEach(K=>j=j.add(K)),w.set(b.userId,j)}),me.forEach(w,(b,O)=>{const j=new Sn(O),K=ou.lt(this.serializer,j),se=d.getIndexManager(j),Me=Hl.lt(j,this.serializer,se,d.referenceDelegate);return new _h(u,Me,K,se).recalculateAndSaveOverlaysForDocumentKeys(new tr(r,zr.oe),b).next()})})}}function Ql(a){a.createObjectStore("targetDocuments",{keyPath:Or}).createIndex("documentTargetsIndex",Jr,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wn,{unique:!0}),a.createObjectStore("targetGlobal")}const vh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zu{constructor(e,r,s,u,d,g,w,b,O,j,K=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ui=d,this.window=g,this.document=w,this.ci=O,this.li=j,this.hi=K,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=se=>Promise.resolve(),!Zu.D())throw new Xe(xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ig(this,u),this.Ai=r+"main",this.serializer=new Oc(b),this.Ri=new Xr(this.Ai,this.hi,new Tg(this.serializer)),this.$r=new Fl,this.Ur=new vg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gh(this.serializer),this.Gr=new oh,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===j&&zn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(xe.FAILED_PRECONDITION,vh);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zr(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var r=this;return this.di=function(){var s=(0,ae.A)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var r=(0,ae.A)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ae.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(r=>this.isPrimary&&!r?this.bi(e).next(()=>!1):!!r&&this.Di(e).next(()=>!0))).catch(e=>{if(us(e))return Ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ra(e).get("owner").next(r=>me.resolve(this.vi(r)))}Ci(e){return Yl(e).delete(this.clientId)}Fi(){var e=this;return(0,ae.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=sr(s,"clientMetadata");return u.U().next(d=>{const g=e.xi(d,18e5),w=d.filter(b=>-1===g.indexOf(b));return me.forEach(w,b=>u.delete(b.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Vi)for(const s of r)e.Vi.removeItem(e.Oi(s.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?me.resolve(!0):Ra(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Xe(xe.FAILED_PRECONDITION,vh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yl(e).U().next(s=>void 0===this.xi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&Ce("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ae.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new tr(r,zr.oe);return e.bi(s).next(()=>e.Ci(s))}),e.Ri.close(),e.qi()})()}xi(e,r){return e.filter(s=>this.Mi(s.updateTimeMs,r)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Yl(e).U().next(r=>this.xi(r,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Hl.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _g(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ou.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,s){Ce("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",d=17===(b=this.hi)?Os:16===b?br:15===b?io:14===b?Gr:13===b?Bn:12===b?cn:11===b?At:void rt();var b;let g;return this.Ri.runTransaction(e,u,d,w=>(g=new tr(w,this.Qr?this.Qr.next():zr.oe),"readwrite-primary"===r?this.wi(g).next(b=>!!b||this.Si(g)).next(b=>{if(!b)throw zn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(xe.FAILED_PRECONDITION,nn);return s(g)}).next(b=>this.Di(g).next(()=>b)):this.Ki(g).next(()=>s(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Ki(e){return Ra(e).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Xe(xe.FAILED_PRECONDITION,vh)})}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ra(e).put("owner",r)}static D(){return Xr.D()}bi(e){const r=Ra(e);return r.get("owner").next(s=>this.vi(s)?(Ce("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):me.resolve())}Mi(e,r){const s=Date.now();return!(e<s-r||e>s&&(zn(`Detected an update time that is in the future: ${e} > ${s}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,Mt.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const s=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(e)));return Ce("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return zn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){zn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ra(a){return sr(a,"owner")}function Yl(a){return sr(a,"clientMetadata")}function Xl(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class Jl{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.$i=s,this.Ui=u}static Wi(e,r){let s=Lt(),u=Lt();for(const d of r.docChanges)switch(d.type){case 0:s=s.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Jl(e,r.fromCache,s,u)}}class Uf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wg{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Mt.nr)()?8:zi((0,Mt.ZQ)())>0?6:4}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,s,u){const d={result:null};return this.Yi(e,r).next(g=>{d.result=g}).next(()=>{if(!d.result)return this.Zi(e,r,u,s).next(g=>{d.result=g})}).next(()=>{if(d.result)return;const g=new Uf;return this.Xi(e,r,g).next(w=>{if(d.result=w,this.zi)return this.es(e,r,g,w.size)})}).next(()=>d.result)}es(e,r,s,u){return s.documentReadCount<this.ji?(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",bt(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),me.resolve()):(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Query:",bt(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Hi*u?(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",bt(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,A(r))):me.resolve())}Yi(e,r){if(Ja(r))return me.resolve(null);let s=A(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=ee(r,null,"F"),s=A(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(d=>{const g=Lt(...d);return this.Ji.getDocuments(e,g).next(w=>this.indexManager.getMinOffset(e,s).next(b=>{const O=this.ts(r,w);return this.ns(r,O,g,b.readTime)?this.Yi(e,ee(r,null,"F")):this.rs(e,O,r,b)}))})))}Zi(e,r,s,u){return Ja(r)||u.isEqual(pt.min())?me.resolve(null):this.Ji.getDocuments(e,s).next(d=>{const g=this.ts(r,d);return this.ns(r,g,s,u)?me.resolve(null):(yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),bt(r)),this.rs(e,g,r,Ie(u,-1)).next(w=>w))})}ts(e,r){let s=new sn(Vn(e));return r.forEach((u,d)=>{Ln(e,d)&&(s=s.add(d))}),s}ns(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const d="F"===e.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(e,r,s){return yr()<=Ut.$b.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",bt(r)),this.Ji.getDocumentsMatchingQuery(e,r,ht.min(),s)}rs(e,r,s,u){return this.Ji.getDocumentsMatchingQuery(e,s,u).next(d=>(r.forEach(g=>{d=d.insert(g.key,g)}),d))}}class Ag{constructor(e,r,s,u){this.persistence=e,this.ss=r,this.serializer=u,this.os=new mn(Re),this._s=new Kn(d=>Oo(d),ko),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _h(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function Bf(a,e,r,s){return new Ag(a,e,r,s)}function Zl(a,e){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,ae.A)(function*(a,e){const r=at(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(d=>(u=d,r.ls(e),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const g=[],w=[];let b=Lt();for(const O of u){g.push(O.batchId);for(const j of O.mutations)b=b.add(j.key)}for(const O of d){w.push(O.batchId);for(const j of O.mutations)b=b.add(j.key)}return r.localDocuments.getDocuments(s,b).next(O=>({hs:O,removedBatchIds:g,addedBatchIds:w}))})})})).apply(this,arguments)}function ed(a){const e=at(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function Eh(a,e,r){let s=Lt(),u=Lt();return r.forEach(d=>s=s.add(d)),e.getEntries(a,s).next(d=>{let g=Nn();return r.forEach((w,b)=>{const O=d.get(w);b.isFoundDocument()!==O.isFoundDocument()&&(u=u.add(w)),b.isNoDocument()&&b.version.isEqual(pt.min())?(e.removeEntry(w,b.readTime),g=g.insert(w,b)):!O.isValidDocument()||b.version.compareTo(O.version)>0||0===b.version.compareTo(O.version)&&O.hasPendingWrites?(e.addEntry(b),g=g.insert(w,b)):Ce("LocalStore","Ignoring outdated watch update for ",w,". Current version:",O.version," Watch version:",b.version)}),{Ps:g,Is:u}})}function $f(a,e){const r=at(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Gc(a,e){const r=at(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Ur.getTargetData(s,e).next(d=>d?(u=d,me.resolve(u)):r.Ur.allocateTargetId(s).next(g=>(u=new _s(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.Ur.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.os.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(s.targetId,s),r._s.set(e,s.targetId)),s})}function Wc(a,e,r){return ec.apply(this,arguments)}function ec(){return(ec=(0,ae.A)(function*(a,e,r){const s=at(a),u=s.os.get(e),d=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",d,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!us(g))throw g;Ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.os=s.os.remove(e),s._s.delete(u.target)})).apply(this,arguments)}function hu(a,e,r){const s=at(a);let u=pt.min(),d=Lt();return s.persistence.runTransaction("Execute query","readwrite",g=>function(b,O,j){const K=at(b),se=K._s.get(j);return void 0!==se?me.resolve(K.os.get(se)):K.Ur.getTargetData(O,j)}(s,g,A(e)).next(w=>{if(w)return u=w.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(g,w.targetId).next(b=>{d=b})}).next(()=>s.ss.getDocumentsMatchingQuery(g,e,r?u:pt.min(),r?d:Lt())).next(w=>(td(s,Mn(e),w),{documents:w,Ts:d})))}function Kc(a,e){const r=at(a),s=at(r.Ur),u=r.os.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>s.ot(d,e).next(g=>g?g.target:null))}function Th(a,e){const r=at(a),s=r.us.get(e)||pt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,e,Ie(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(td(r,e,u),u))}function td(a,e,r){let s=a.us.get(e)||pt.min();r.forEach((u,d)=>{d.readTime.compareTo(s)>0&&(s=d.readTime)}),a.us.set(e,s)}function Pa(){return(Pa=(0,ae.A)(function*(a,e,r,s){const u=at(a);let d=Lt(),g=Nn();for(const O of r){const j=e.Es(O.metadata.name);O.document&&(d=d.add(j));const K=e.ds(O);K.setReadTime(e.As(O.metadata.readTime)),g=g.insert(j,K)}const w=u.cs.newChangeBuffer({trackRemovals:!0}),b=yield Gc(u,(j=s,A($s(wt.fromString(`__bundle__/docs/${j}`)))));var j;return u.persistence.runTransaction("Apply bundle documents","readwrite",O=>Eh(O,w,g).next(j=>(w.apply(O),j)).next(j=>u.Ur.removeMatchingKeysForTargetId(O,b.targetId).next(()=>u.Ur.addMatchingKeys(O,d,b.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(O,j.Ps,j.Is)).next(()=>j.Ps)))})).apply(this,arguments)}function zf(a,e){return nd.apply(this,arguments)}function nd(){return(nd=(0,ae.A)(function*(a,e,r=Lt()){const s=yield Gc(a,A(zu(e.bundledQuery))),u=at(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const g=Jt(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.Gr.saveNamedQuery(d,e);const w=s.withResumeToken(qn.EMPTY_BYTE_STRING,g);return u.os=u.os.insert(w.targetId,w),u.Ur.updateTargetData(d,w).next(()=>u.Ur.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,s.targetId)).next(()=>u.Gr.saveNamedQuery(d,e))})})).apply(this,arguments)}function Ko(a,e){return`firestore_clients_${a}_${e}`}function qc(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function fu(a,e){return`firestore_targets_${a}_${e}`}class rd{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Rs(e,r,s){const u=JSON.parse(s);let d,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(d=new Xe(u.error.code,u.error.message))),g?new rd(e,r,u.state,d):(zn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qc{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Rs(e,r){const s=JSON.parse(r);let u,d="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return d&&s.error&&(d="string"==typeof s.error.message&&"string"==typeof s.error.code,d&&(u=new Xe(s.error.code,s.error.message))),d?new Qc(e,s.state,u):(zn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class id{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,d=zs();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=sa(s.activeTargetIds[g]),d=d.add(s.activeTargetIds[g]);return u?new id(e,d):(zn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class sd{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new sd(r.clientId,r.onlineState):(zn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tc{constructor(){this.activeTargetIds=zs()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yc{constructor(e,r,s,u,d){this.window=e,this.ui=r,this.persistenceKey=s,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new mn(Re),this.started=!1,this.bs=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=Ko(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new tc),this.Cs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.A)(function*(){const r=yield e.syncEngine.Qi();for(const u of r){if(u===e.ps)continue;const d=e.getItem(Ko(e.persistenceKey,u));if(d){const g=id.Rs(u,d);g&&(e.Ss=e.Ss.insert(g.clientId,g))}}e.Ns();const s=e.storage.getItem(e.xs);if(s){const u=e.Ls(s);u&&e.Bs(u)}for(const u of e.bs)e.ws(u);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,s){this.qs(e,r,s),this.Qs(e)}addLocalQueryTarget(e,r=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const u=this.storage.getItem(fu(this.persistenceKey,e));if(u){const d=Qc.Rs(e,u);d&&(s=d.state)}}return r&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fu(this.persistenceKey,e))}updateQueryState(e,r,s){this.$s(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Qs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ce("SharedClientState","READ",e,r),r}setItem(e,r){Ce("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var r=this;const s=e;if(s.storageArea===this.storage){if(Ce("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ds)return void zn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ae.A)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const u=r.Gs(s.key);return r.zs(u,null)}{const u=r.js(s.key,s.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const u=r.Hs(s.key,s.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(s.key)){if(null!==s.newValue){const u=r.Ys(s.key,s.newValue);if(u)return r.Zs(u)}}else if(s.key===r.xs){if(null!==s.newValue){const u=r.Ls(s.newValue);if(u)return r.Bs(u)}}else if(s.key===r.vs){const u=function(g){let w=zr.oe;if(null!=g)try{const b=JSON.parse(g);St("number"==typeof b),w=b}catch(b){zn("SharedClientState","Failed to read sequence number from WebStorage",b)}return w}(s.newValue);u!==zr.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Os){const u=r.Xs(s.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(s)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,s){const u=new rd(this.currentUser,e,r,s),d=qc(this.persistenceKey,this.currentUser,e);this.setItem(d,u.Vs())}Qs(e){const r=qc(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,r,s){const u=fu(this.persistenceKey,e),d=new Qc(e,r,s);this.setItem(u,d.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const s=this.Gs(e);return id.Rs(s,r)}Hs(e,r){const s=this.Fs.exec(e),u=Number(s[1]);return rd.Rs(new Sn(void 0!==s[2]?s[2]:null),u,r)}Ys(e,r){const s=this.Ms.exec(e),u=Number(s[1]);return Qc.Rs(u,r)}Ls(e){return sd.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var r=this;return(0,ae.A)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.no(e.batchId,e.state,e.error);Ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const s=r?this.Ss.insert(e,r):this.Ss.remove(e),u=this.ks(this.Ss),d=this.ks(s),g=[],w=[];return d.forEach(b=>{u.has(b)||g.push(b)}),u.forEach(b=>{d.has(b)||w.push(b)}),this.syncEngine.io(g,w).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=zs();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class od{constructor(){this.so=new tc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,s){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tc,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Gf{_o(e){}shutdown(){}}class wh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let nc=null;function Ah(){return null===nc?nc=268435456+Math.round(2147483648*Math.random()):nc++,"0x"+nc.toString(16)}const Ir={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pu{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const fi="WebChannelConnection";class Dh extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,s,u,d,g){const w=Ah(),b=this.xo(r,s.toUriEncodedString());Ce("RestConnection",`Sending RPC '${r}' ${w}:`,b,u);const O={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(O,d,g),this.No(r,b,O,u).then(j=>(Ce("RestConnection",`Received RPC '${r}' ${w}: `,j),j),j=>{throw Wt("RestConnection",`RPC '${r}' ${w} failed with error: `,j,"url: ",b,"request:",u),j})}Lo(r,s,u,d,g,w){return this.Mo(r,s,u,d,g)}Oo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+or,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((d,g)=>r[g]=d),u&&u.headers.forEach((d,g)=>r[g]=d)}xo(r,s){return`${this.Do}/v1/${s}:${Ir[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,s,u){const d=Ah();return new Promise((g,w)=>{const b=new Er;b.setWithCredentials(!0),b.listenOnce(Ei.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Vr.NO_ERROR:const j=b.getResponseJson();Ce(fi,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(j)),g(j);break;case Vr.TIMEOUT:Ce(fi,`RPC '${e}' ${d} timed out`),w(new Xe(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Vr.HTTP_ERROR:const K=b.getStatus();if(Ce(fi,`RPC '${e}' ${d} failed with status:`,K,"response text:",b.getResponseText()),K>0){let se=b.getResponseJson();Array.isArray(se)&&(se=se[0]);const Me=se?.error;if(Me&&Me.status&&Me.message){const Je=function(st){const kt=st.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(kt)>=0?kt:xe.UNKNOWN}(Me.status);w(new Xe(Je,Me.message))}else w(new Xe(xe.UNKNOWN,"Server responded with status "+b.getStatus()))}else w(new Xe(xe.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ce(fi,`RPC '${e}' ${d} completed.`)}});const O=JSON.stringify(u);Ce(fi,`RPC '${e}' ${d} sending request:`,u),b.send(r,"POST",O,s,15)})}Bo(e,r,s){const u=Ah(),d=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Kt(),w=hn(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},O=this.longPollingOptions.timeoutSeconds;void 0!==O&&(b.longPollingTimeout=Math.round(1e3*O)),this.useFetchStreams&&(b.useFetchStreams=!0),this.Oo(b.initMessageHeaders,r,s),b.encodeInitMessageHeaders=!0;const j=d.join("");Ce(fi,`Creating RPC '${e}' stream ${u}: ${j}`,b);const K=g.createWebChannel(j,b);let se=!1,Me=!1;const Je=new pu({Io:st=>{Me?Ce(fi,`Not sending because RPC '${e}' stream ${u} is closed:`,st):(se||(Ce(fi,`Opening RPC '${e}' stream ${u} transport.`),K.open(),se=!0),Ce(fi,`RPC '${e}' stream ${u} sending:`,st),K.send(st))},To:()=>K.close()}),dt=(st,kt,Ht)=>{st.listen(kt,Tt=>{try{Ht(Tt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return dt(K,Nr.EventType.OPEN,()=>{Me||(Ce(fi,`RPC '${e}' stream ${u} transport opened.`),Je.yo())}),dt(K,Nr.EventType.CLOSE,()=>{Me||(Me=!0,Ce(fi,`RPC '${e}' stream ${u} transport closed`),Je.So())}),dt(K,Nr.EventType.ERROR,st=>{Me||(Me=!0,Wt(fi,`RPC '${e}' stream ${u} transport errored:`,st),Je.So(new Xe(xe.UNAVAILABLE,"The operation could not be completed")))}),dt(K,Nr.EventType.MESSAGE,st=>{var kt;if(!Me){const Ht=st.data[0];St(!!Ht);const zt=Ht.error||(null===(kt=Ht[0])||void 0===kt?void 0:kt.error);if(zt){Ce(fi,`RPC '${e}' stream ${u} received error:`,zt);const yn=zt.status;let ln=function(ce){const ye=Ur[ce];if(void 0!==ye)return Qr(ye)}(yn),ge=zt.message;void 0===ln&&(ln=xe.INTERNAL,ge="Unknown error status: "+yn+" with message "+zt.message),Me=!0,Je.So(new Xe(ln,ge)),K.close()}else Ce(fi,`RPC '${e}' stream ${u} received:`,Ht),Je.bo(Ht)}}),dt(w,qt.STAT_EVENT,st=>{st.stat===Zn.PROXY?Ce(fi,`RPC '${e}' stream ${u} detected buffering proxy`):st.stat===Zn.NOPROXY&&Ce(fi,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Je.wo()},0),Je}}function ai(){return typeof window<"u"?window:null}function mo(){return typeof document<"u"?document:null}function rc(a){return new Pe(a,!0)}class Xc{constructor(e,r,s=1e3,u=1.5,d=6e4){this.ui=e,this.timerId=r,this.ko=s,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-s);u>0&&Ce("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Wf{constructor(e,r,s,u,d,g,w,b){this.ui=e,this.Ho=s,this.Jo=u,this.connection=d,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=b,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xc(e,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ae.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ae.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,r){var s=this;return(0,ae.A)(function*(){s.u_(),s.c_(),s.t_.cancel(),s.Yo++,4!==e?s.t_.reset():r&&r.code===xe.RESOURCE_EXHAUSTED?(zn(r.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),s.t_.Wo()):r&&r.code===xe.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.l_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.mo(r)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Yo===r&&this.P_(s,u)},s=>{e(()=>{const u=new Xe(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(u)})})}P_(e,r){const s=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{s(()=>this.I_(u))}),this.stream.onMessage(u=>{s(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var e=this;this.state=5,this.t_.Go((0,ae.A)(function*(){e.state=0,e.start()}))}I_(e){return Ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qo extends Wf{constructor(e,r,s,u,d,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=function nh(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:rt(),u=e.targetChange.targetIds||[],d=function(O,j){return O.useProto3Json?(St(void 0===j||"string"==typeof j),qn.fromBase64String(j||"")):(St(void 0===j||j instanceof Buffer||j instanceof Uint8Array),qn.fromUint8Array(j||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,w=g&&function(O){const j=void 0===O.code?xe.UNKNOWN:Qr(O.code);return new Xe(j,O.message||"")}(g);r=new E(s,u,d,w||null)}else if("documentChange"in e){const s=e.documentChange,u=ms(a,s.document.name),d=Jt(s.document.updateTime),g=s.document.createTime?Jt(s.document.createTime):pt.min(),w=new Kr({mapValue:{fields:s.document.fields}}),b=rr.newFoundDocument(u,d,g,w);r=new Ia(s.targetIds||[],s.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const s=e.documentDelete,u=ms(a,s.document),d=s.readTime?Jt(s.readTime):pt.min(),g=rr.newNoDocument(u,d);r=new Ia([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=ms(a,s.document);r=new Ia([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return rt();{const s=e.filter,{count:u=0,unchangedNames:d}=s,g=new Rc(u,d);r=new Vl(s.targetId,g)}}var O;return r}(this.serializer,e),s=function(d){if(!("targetChange"in d))return pt.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?pt.min():g.readTime?Jt(g.readTime):pt.min()}(e);return this.listener.d_(r,s)}A_(e){const r={};r.database=bs(this.serializer),r.addTarget=function(d,g){let w;const b=g.target;if(w=co(b)?{documents:ru(d,b)}:{query:fo(d,b)._t},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=In(d,g.resumeToken);const O=Dt(d,g.expectedCount);null!==O&&(w.expectedCount=O)}else if(g.snapshotVersion.compareTo(pt.min())>0){w.readTime=un(d,g.snapshotVersion.toTimestamp());const O=Dt(d,g.expectedCount);null!==O&&(w.expectedCount=O)}return w}(this.serializer,e);const s=function xc(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.a_(r)}R_(e){const r={};r.database=bs(this.serializer),r.removeTarget=e,this.a_(r)}}class Kf extends Wf{constructor(e,r,s,u,d,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,g),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return St(!!e.streamToken),this.lastStreamToken=e.streamToken,St(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=function rh(a,e){return a&&a.length>0?(St(void 0!==e),a.map(r=>function(u,d){let g=Jt(u.updateTime?u.updateTime:d);return g.isEqual(pt.min())&&(g=Jt(d)),new Cc(g,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=Jt(e.commitTime);return this.listener.g_(s,r)}p_(){const e={};e.database=bs(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Ea(this.serializer,s))};this.a_(r)}}class qf extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Xe(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,s,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Mo(e,Ho(r,s),u,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Xe(xe.UNKNOWN,d.toString())})}Lo(e,r,s,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.Lo(e,Ho(r,s),u,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Xe(xe.UNKNOWN,g.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Dg{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zn(r),this.D_=!1):Ce("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Qf{constructor(e,r,s,u,d){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(w=>{s.enqueueAndForget((0,ae.A)(function*(){var b;Xs(g)&&(Ce("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,ae.A)(function*(j){const K=at(j);K.L_.add(4),yield _o(K),K.q_.set("Unknown"),K.L_.delete(4),yield ic(K)}),function O(j){return b.apply(this,arguments)})(g))}))}),this.q_=new Dg(s,u)}}function ic(a){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,ae.A)(function*(a){if(Xs(a))for(const e of a.B_)yield e(!0)})).apply(this,arguments)}function _o(a){return gu.apply(this,arguments)}function gu(){return(gu=(0,ae.A)(function*(a){for(const e of a.B_)yield e(!1)})).apply(this,arguments)}function ad(a,e){const r=at(a);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),ud(r)?Jc(r):vu(r).r_()&&mu(r,e))}function pi(a,e){const r=at(a),s=vu(r);r.N_.delete(e),s.r_()&&Ch(r,e),0===r.N_.size&&(s.r_()?s.o_():Xs(r)&&r.q_.set("Unknown"))}function mu(a,e){if(a.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}vu(a).A_(e)}function Ch(a,e){a.Q_.xe(e),vu(a).R_(e)}function Jc(a){a.Q_=new v({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.N_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),vu(a).start(),a.q_.v_()}function ud(a){return Xs(a)&&!vu(a).n_()&&a.N_.size>0}function Xs(a){return 0===at(a).L_.size}function _u(a){a.Q_=void 0}function cd(a){return ld.apply(this,arguments)}function ld(){return(ld=(0,ae.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function Sh(a){return m.apply(this,arguments)}function m(){return(m=(0,ae.A)(function*(a){a.N_.forEach((e,r)=>{mu(a,e)})})).apply(this,arguments)}function l(a,e){return h.apply(this,arguments)}function h(){return(h=(0,ae.A)(function*(a,e){_u(a),ud(a)?(a.q_.M_(e),Jc(a)):a.q_.set("Unknown")})).apply(this,arguments)}function y(a,e,r){return M.apply(this,arguments)}function M(){return M=(0,ae.A)(function*(a,e,r){if(a.q_.set("Online"),e instanceof E&&2===e.state&&e.cause)try{yield(s=(0,ae.A)(function*(d,g){const w=g.cause;for(const b of g.targetIds)d.N_.has(b)&&(yield d.remoteSyncer.rejectListen(b,w),d.N_.delete(b),d.Q_.removeTarget(b))}),function u(d,g){return s.apply(this,arguments)})(a,e)}catch(s){Ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield B(a,s)}else if(e instanceof Ia?a.Q_.Ke(e):e instanceof Vl?a.Q_.He(e):a.Q_.We(e),!r.isEqual(pt.min()))try{const s=yield ed(a.localStore);r.compareTo(s)>=0&&(yield function(d,g){const w=d.Q_.rt(g);return w.targetChanges.forEach((b,O)=>{if(b.resumeToken.approximateByteSize()>0){const j=d.N_.get(O);j&&d.N_.set(O,j.withResumeToken(b.resumeToken,g))}}),w.targetMismatches.forEach((b,O)=>{const j=d.N_.get(b);if(!j)return;d.N_.set(b,j.withResumeToken(qn.EMPTY_BYTE_STRING,j.snapshotVersion)),Ch(d,b);const K=new _s(j.target,b,O,j.sequenceNumber);mu(d,K)}),d.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(s){Ce("RemoteStore","Failed to raise snapshot:",s),yield B(a,s)}var s}),M.apply(this,arguments)}function B(a,e,r){return re.apply(this,arguments)}function re(){return(re=(0,ae.A)(function*(a,e,r){if(!us(e))throw e;a.L_.add(1),yield _o(a),a.q_.set("Offline"),r||(r=()=>ed(a.localStore)),a.asyncQueue.enqueueRetryable((0,ae.A)(function*(){Ce("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield ic(a)}))})).apply(this,arguments)}function Ee(a,e){return e().catch(r=>B(a,r,e))}function He(a){return Et.apply(this,arguments)}function Et(){return(Et=(0,ae.A)(function*(a){const e=at(a),r=Qo(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ot(e);)try{const u=yield $f(e.localStore,s);if(null===u){0===e.O_.length&&r.o_();break}s=u.batchId,Vt(e,u)}catch(u){yield B(e,u)}Mr(e)&&ts(e)})).apply(this,arguments)}function Ot(a){return Xs(a)&&a.O_.length<10}function Vt(a,e){a.O_.push(e);const r=Qo(a);r.r_()&&r.V_&&r.m_(e.mutations)}function Mr(a){return Xs(a)&&!Qo(a).n_()&&a.O_.length>0}function ts(a){Qo(a).start()}function Zc(a){return yo.apply(this,arguments)}function yo(){return(yo=(0,ae.A)(function*(a){Qo(a).p_()})).apply(this,arguments)}function dd(a){return el.apply(this,arguments)}function el(){return(el=(0,ae.A)(function*(a){const e=Qo(a);for(const r of a.O_)e.m_(r.mutations)})).apply(this,arguments)}function Yf(a,e,r){return hd.apply(this,arguments)}function hd(){return(hd=(0,ae.A)(function*(a,e,r){const s=a.O_.shift(),u=Ws.from(s,e,r);yield Ee(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield He(a)})).apply(this,arguments)}function tl(a,e){return fd.apply(this,arguments)}function fd(){return fd=(0,ae.A)(function*(a,e){var r;e&&Qo(a).V_&&(yield(r=(0,ae.A)(function*(u,d){if(Pc(w=d.code)&&w!==xe.ABORTED){const g=u.O_.shift();Qo(u).s_(),yield Ee(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,d)),yield He(u)}var w}),function s(u,d){return r.apply(this,arguments)})(a,e)),Mr(a)&&ts(a)}),fd.apply(this,arguments)}function nl(a,e){return rl.apply(this,arguments)}function rl(){return(rl=(0,ae.A)(function*(a,e){const r=at(a);r.asyncQueue.verifyOperationInProgress(),Ce("RemoteStore","RemoteStore received new credentials");const s=Xs(r);r.L_.add(3),yield _o(r),s&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),yield ic(r)})).apply(this,arguments)}function pd(a,e){return yu.apply(this,arguments)}function yu(){return(yu=(0,ae.A)(function*(a,e){const r=at(a);e?(r.L_.delete(2),yield ic(r)):e||(r.L_.add(2),yield _o(r),r.q_.set("Unknown"))})).apply(this,arguments)}function vu(a){return a.K_||(a.K_=function(r,s,u){const d=at(r);return d.w_(),new qo(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:cd.bind(null,a),Ro:Sh.bind(null,a),mo:l.bind(null,a),d_:y.bind(null,a)}),a.B_.push(function(){var e=(0,ae.A)(function*(r){r?(a.K_.s_(),ud(a)?Jc(a):a.q_.set("Unknown")):(yield a.K_.stop(),_u(a))});return function(r){return e.apply(this,arguments)}}())),a.K_}function Qo(a){return a.U_||(a.U_=function(r,s,u){const d=at(r);return d.w_(),new Kf(s,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zc.bind(null,a),mo:tl.bind(null,a),f_:dd.bind(null,a),g_:Yf.bind(null,a)}),a.B_.push(function(){var e=(0,ae.A)(function*(r){r?(a.U_.s_(),yield He(a)):(yield a.U_.stop(),a.O_.length>0&&(Ce("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return e.apply(this,arguments)}}())),a.U_}class il{constructor(e,r,s,u,d){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=d,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,d){const g=Date.now()+s,w=new il(e,r,g,u,d);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xe(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sl(a,e){if(zn("AsyncQueue",`${e}: ${a}`),us(a))return new Xe(xe.UNAVAILABLE,`${e}: ${a}`);throw a}class sc{constructor(e){this.comparator=e?(r,s)=>e(r,s)||It.comparator(r.key,s.key):(r,s)=>It.comparator(r.key,s.key),this.keyedMap=ni(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new sc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=s.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new sc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class bh{constructor(){this.W_=new mn(It.comparator)}track(e){const r=e.doc.key,s=this.W_.get(r);s?0!==e.type&&3===s.type?this.W_=this.W_.insert(r,e):3===e.type&&1!==s.type?this.W_=this.W_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.W_=this.W_.remove(r):1===e.type&&2===s.type?this.W_=this.W_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):rt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,s)=>{e.push(s)}),e}}class ol{constructor(e,r,s,u,d,g,w,b,O){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=d,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=b,this.hasCachedResults=O}static fromInitialDocuments(e,r,s,u,d){const g=[];return r.forEach(w=>{g.push({type:0,doc:w})}),new ol(e,r,sc.emptySet(r),g,s,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Cg{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Rh{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,s){const u=at(r),d=u.queries;u.queries=l_(),d.forEach((g,w)=>{for(const b of w.j_)b.onError(s)})}(this,new Xe(xe.ABORTED,"Firestore shutting down"))}}function l_(){return new Kn(a=>nt(a),Oe)}function Xf(a,e){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ae.A)(function*(a,e){const r=at(a);let s=3;const u=e.query;let d=r.queries.get(u);d?!d.H_()&&e.J_()&&(s=2):(d=new Cg,s=e.J_()?0:1);try{switch(s){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(g){const w=sl(g,`Initialization of query '${bt(e.query)}' failed`);return void e.onError(w)}r.queries.set(u,d),d.j_.push(e),e.Z_(r.onlineState),d.z_&&e.X_(d.z_)&&gd(r)})).apply(this,arguments)}function bg(a,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,ae.A)(function*(a,e){const r=at(a),s=e.query;let u=3;const d=r.queries.get(s);if(d){const g=d.j_.indexOf(e);g>=0&&(d.j_.splice(g,1),0===d.j_.length?u=e.J_()?0:1:!d.H_()&&e.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function d_(a,e){const r=at(a);let s=!1;for(const u of e){const g=r.queries.get(u.query);if(g){for(const w of g.j_)w.X_(u)&&(s=!0);g.z_=u}}s&&gd(r)}function h_(a,e,r){const s=at(a),u=s.queries.get(e);if(u)for(const d of u.j_)d.onError(r);s.queries.delete(e)}function gd(a){a.Y_.forEach(e=>{e.next()})}var Ph,al;(al=Ph||(Ph={})).ea="default",al.Cache="cache";class Pg{constructor(e,r,s){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ph.Cache}}class Cv{constructor(e,r){this.aa=e,this.byteLength=r}ua(){return"metadata"in this.aa}}class Sv{constructor(e){this.serializer=e}Es(e){return ms(this.serializer,e)}ds(e){return e.metadata.exists?Nc(this.serializer,e.document,!1):rr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Jt(e)}}class bv{constructor(e,r,s){this.ca=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jf(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++r;const s=wt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(e){const r=new Map,s=new Sv(this.serializer);for(const u of e)if(u.metadata.queries){const d=s.Es(u.metadata.name);for(const g of u.metadata.queries){const w=(r.get(g)||Lt()).add(d);r.set(g,w)}}return r}complete(){var e=this;return(0,ae.A)(function*(){const r=yield function Hf(a,e,r,s){return Pa.apply(this,arguments)}(e.localStore,new Sv(e.serializer),e.documents,e.ca.id),s=e.ha(e.documents);for(const u of e.queries)yield zf(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:r}})()}}function Jf(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class f_{constructor(e){this.key=e}}class ul{constructor(e){this.key=e}}class Mh{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Lt(),this.mutatedKeys=Lt(),this.Aa=Vn(e),this.Ra=new sc(this.Aa)}get Va(){return this.Ta}ma(e,r){const s=r?r.fa:new bh,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,g=u,w=!1;const b="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,O="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((j,K)=>{const se=u.get(j),Me=Ln(this.query,K)?K:null,Je=!!se&&this.mutatedKeys.has(se.key),dt=!!Me&&(Me.hasLocalMutations||this.mutatedKeys.has(Me.key)&&Me.hasCommittedMutations);let st=!1;se&&Me?se.data.isEqual(Me.data)?Je!==dt&&(s.track({type:3,doc:Me}),st=!0):this.ga(se,Me)||(s.track({type:2,doc:Me}),st=!0,(b&&this.Aa(Me,b)>0||O&&this.Aa(Me,O)<0)&&(w=!0)):!se&&Me?(s.track({type:0,doc:Me}),st=!0):se&&!Me&&(s.track({type:1,doc:se}),st=!0,(b||O)&&(w=!0)),st&&(Me?(g=g.add(Me),d=dt?d.add(j):d.delete(j)):(g=g.delete(j),d=d.delete(j)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const j="F"===this.query.limitType?g.last():g.first();g=g.delete(j.key),d=d.delete(j.key),s.track({type:1,doc:j})}return{Ra:g,fa:s,ns:w,mutatedKeys:d}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const d=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const g=e.fa.G_();g.sort((j,K)=>function(Me,Je){const dt=st=>{switch(st){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return dt(Me)-dt(Je)}(j.type,K.type)||this.Aa(j.doc,K.doc)),this.pa(s),u=null!=u&&u;const w=r&&!u?this.ya():[],b=0===this.da.size&&this.current&&!u?1:0,O=b!==this.Ea;return this.Ea=b,0!==g.length||O?{snapshot:new ol(this.query,e.Ra,d,g,e.mutatedKeys,0===b,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:w}:{wa:w}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Lt(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const r=[];return e.forEach(s=>{this.da.has(s)||r.push(new ul(s))}),this.da.forEach(s=>{e.has(s)||r.push(new f_(s))}),r}ba(e){this.Ta=e.Ts,this.da=Lt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ol.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Mg{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class p_{constructor(e){this.key=e,this.va=!1}}class g_{constructor(e,r,s,u,d,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=g,this.Ca={},this.Fa=new Kn(w=>nt(w),Oe),this.Ma=new Map,this.xa=new Set,this.Oa=new mn(It.comparator),this.Na=new Map,this.La=new Wl,this.Ba={},this.ka=new Map,this.qa=Ys.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function m_(a,e){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,ae.A)(function*(a,e,r=!0){const s=Gg(a);let u;const d=s.Fa.get(e);return d?(s.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield __(s,e,r,!0),u})).apply(this,arguments)}function Rv(a,e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ae.A)(function*(a,e){const r=Gg(a);yield __(r,e,!0,!1)})).apply(this,arguments)}function __(a,e,r,s){return xg.apply(this,arguments)}function xg(){return(xg=(0,ae.A)(function*(a,e,r,s){const u=yield Gc(a.localStore,A(e)),d=u.targetId,g=a.sharedClientState.addLocalQueryTarget(d,r);let w;return s&&(w=yield Og(a,e,d,"current"===g,u.resumeToken)),a.isPrimaryClient&&r&&ad(a.remoteStore,u),w})).apply(this,arguments)}function Og(a,e,r,s,u){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,ae.A)(function*(a,e,r,s,u){a.Ka=(K,se,Me)=>{return(Je=(0,ae.A)(function*(st,kt,Ht,Tt){let zt=kt.view.ma(Ht);zt.ns&&(zt=yield hu(st.localStore,kt.query,!1).then(({documents:te})=>kt.view.ma(te,zt)));const yn=Tt&&Tt.targetChanges.get(kt.targetId),ln=Tt&&null!=Tt.targetMismatches.get(kt.targetId),ge=kt.view.applyChanges(zt,st.isPrimaryClient,yn,ln);return kh(st,kt.targetId,ge.wa),ge.snapshot}),function dt(st,kt,Ht,Tt){return Je.apply(this,arguments)})(a,K,se,Me);var Je};const d=yield hu(a.localStore,e,!0),g=new Mh(e,d.Ts),w=g.ma(d.documents),b=ho.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),O=g.applyChanges(w,a.isPrimaryClient,b);kh(a,r,O.wa);const j=new Mg(e,r,g);return a.Fa.set(e,j),a.Ma.has(r)?a.Ma.get(r).push(e):a.Ma.set(r,[e]),O.snapshot}),Ma.apply(this,arguments)}function Nh(a,e,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ae.A)(function*(a,e,r){const s=at(a),u=s.Fa.get(e),d=s.Ma.get(u.targetId);if(d.length>1)return s.Ma.set(u.targetId,d.filter(g=>!Oe(g,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Wc(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&pi(s.remoteStore,u.targetId),Oh(s,u.targetId)}).catch(Cn))):(Oh(s,u.targetId),yield Wc(s.localStore,u.targetId,!0))})).apply(this,arguments)}function wE(a,e){return y_.apply(this,arguments)}function y_(){return(y_=(0,ae.A)(function*(a,e){const r=at(a),s=r.Fa.get(e),u=r.Ma.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),pi(r.remoteStore,s.targetId))})).apply(this,arguments)}function v_(){return(v_=(0,ae.A)(function*(a,e,r){const s=D_(a);try{const u=yield function(g,w){const b=at(g),O=vt.now(),j=w.reduce((Me,Je)=>Me.add(Je.key),Lt());let K,se;return b.persistence.runTransaction("Locally write mutations","readwrite",Me=>{let Je=Nn(),dt=Lt();return b.cs.getEntries(Me,j).next(st=>{Je=st,Je.forEach((kt,Ht)=>{Ht.isValidDocument()||(dt=dt.add(kt))})}).next(()=>b.localDocuments.getOverlayedDocuments(Me,Je)).next(st=>{K=st;const kt=[];for(const Ht of w){const Tt=eh(Ht,K.get(Ht.key).overlayedDocument);null!=Tt&&kt.push(new di(Ht.key,Tt,qa(Tt.value.mapValue),jn.exists(!0)))}return b.mutationQueue.addMutationBatch(Me,O,kt,w)}).next(st=>{se=st;const kt=st.applyToLocalDocumentSet(K,dt);return b.documentOverlayCache.saveOverlays(Me,st.batchId,kt)})}).then(()=>({batchId:se.batchId,changes:Hs(K)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(g,w,b){let O=g.Ba[g.currentUser.toKey()];O||(O=new mn(Re)),O=O.insert(w,b),g.Ba[g.currentUser.toKey()]=O}(s,u.batchId,r),yield oc(s,u.changes),yield He(s.remoteStore)}catch(u){const d=sl(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function Pv(a,e){return ep.apply(this,arguments)}function ep(){return(ep=(0,ae.A)(function*(a,e){const r=at(a);try{const s=yield function c_(a,e){const r=at(a),s=e.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const g=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const w=[];e.targetChanges.forEach((j,K)=>{const se=u.get(K);if(!se)return;w.push(r.Ur.removeMatchingKeys(d,j.removedDocuments,K).next(()=>r.Ur.addMatchingKeys(d,j.addedDocuments,K)));let Me=se.withSequenceNumber(d.currentSequenceNumber);var dt,st,kt;null!==e.targetMismatches.get(K)?Me=Me.withResumeToken(qn.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):j.resumeToken.approximateByteSize()>0&&(Me=Me.withResumeToken(j.resumeToken,s)),u=u.insert(K,Me),st=Me,kt=j,(0===(dt=se).resumeToken.approximateByteSize()||st.snapshotVersion.toMicroseconds()-dt.snapshotVersion.toMicroseconds()>=3e8||kt.addedDocuments.size+kt.modifiedDocuments.size+kt.removedDocuments.size>0)&&w.push(r.Ur.updateTargetData(d,Me))});let b=Nn(),O=Lt();if(e.documentUpdates.forEach(j=>{e.resolvedLimboDocuments.has(j)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(d,j))}),w.push(Eh(d,g,e.documentUpdates).next(j=>{b=j.Ps,O=j.Is})),!s.isEqual(pt.min())){const j=r.Ur.getLastRemoteSnapshotVersion(d).next(K=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,s));w.push(j)}return me.waitFor(w).next(()=>g.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,b,O)).next(()=>b)}).then(d=>(r.os=u,d))}(r.localStore,e);e.targetChanges.forEach((u,d)=>{const g=r.Na.get(d);g&&(St(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.va=!0:u.modifiedDocuments.size>0?St(g.va):u.removedDocuments.size>0&&(St(g.va),g.va=!1))}),yield oc(r,s,e)}catch(s){yield Cn(s)}})).apply(this,arguments)}function I_(a,e,r){const s=at(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.Fa.forEach((d,g)=>{const w=g.view.Z_(e);w.snapshot&&u.push(w.snapshot)}),function(g,w){const b=at(g);b.onlineState=w;let O=!1;b.queries.forEach((j,K)=>{for(const se of K.j_)se.Z_(w)&&(O=!0)}),O&&gd(b)}(s.eventManager,e),u.length&&s.Ca.d_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Mv(a,e,r){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,ae.A)(function*(a,e,r){const s=at(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Na.get(e),d=u&&u.key;if(d){let g=new mn(It.comparator);g=g.insert(d,rr.newNoDocument(d,pt.min()));const w=Lt().add(d),b=new Vu(pt.min(),new Map,new mn(Re),g,w);yield Pv(s,b),s.Oa=s.Oa.remove(d),s.Na.delete(e),w_(s)}else yield Wc(s.localStore,e,!1).then(()=>Oh(s,e,r)).catch(Cn)})).apply(this,arguments)}function Nv(a,e){return xh.apply(this,arguments)}function xh(){return(xh=(0,ae.A)(function*(a,e){const r=at(a),s=e.batch.batchId;try{const u=yield function jf(a,e){const r=at(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(w,b,O,j){const K=O.batch,se=K.keys();let Me=me.resolve();return se.forEach(Je=>{Me=Me.next(()=>j.getEntry(b,Je)).next(dt=>{const st=O.docVersions.get(Je);St(null!==st),dt.version.compareTo(st)<0&&(K.applyToRemoteDocument(dt,O),dt.isValidDocument()&&(dt.setReadTime(O.commitVersion),j.addEntry(dt)))})}),Me.next(()=>w.mutationQueue.removeMutationBatch(b,K))}(r,s,e,d).next(()=>d.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let b=Lt();for(let O=0;O<w.mutationResults.length;++O)w.mutationResults[O].transformResults.length>0&&(b=b.add(w.batch.mutations[O].key));return b}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);T_(r,s,null),np(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield oc(r,u)}catch(u){yield Cn(u)}})).apply(this,arguments)}function Iu(a,e,r){return cl.apply(this,arguments)}function cl(){return(cl=(0,ae.A)(function*(a,e,r){const s=at(a);try{const u=yield function(g,w){const b=at(g);return b.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let j;return b.mutationQueue.lookupMutationBatch(O,w).next(K=>(St(null!==K),j=K.keys(),b.mutationQueue.removeMutationBatch(O,K))).next(()=>b.mutationQueue.performConsistencyCheck(O)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(O,j,w)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,j)).next(()=>b.localDocuments.getDocuments(O,j))})}(s.localStore,e);T_(s,e,r),np(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield oc(s,u)}catch(u){yield Cn(u)}})).apply(this,arguments)}function tp(){return(tp=(0,ae.A)(function*(a,e){const r=at(a);Xs(r.remoteStore)||Ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=at(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>w.mutationQueue.getHighestUnacknowledgedBatchId(b))}(r.localStore);if(-1===s)return void e.resolve();const u=r.ka.get(s)||[];u.push(e),r.ka.set(s,u)}catch(s){const u=sl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function np(a,e){(a.ka.get(e)||[]).forEach(r=>{r.resolve()}),a.ka.delete(e)}function T_(a,e,r){const s=at(a);let u=s.Ba[s.currentUser.toKey()];if(u){const d=u.get(e);d&&(r?d.reject(r):d.resolve(),u=u.remove(e)),s.Ba[s.currentUser.toKey()]=u}}function Oh(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Ma.get(e))a.Fa.delete(s),r&&a.Ca.$a(s,r);a.Ma.delete(e),a.isPrimaryClient&&a.La.gr(e).forEach(s=>{a.La.containsKey(s)||xv(a,s)})}function xv(a,e){a.xa.delete(e.path.canonicalString());const r=a.Oa.get(e);null!==r&&(pi(a.remoteStore,r),a.Oa=a.Oa.remove(e),a.Na.delete(r),w_(a))}function kh(a,e,r){for(const s of r)s instanceof f_?(a.La.addReference(s.key,e),Vg(a,s)):s instanceof ul?(Ce("SyncEngine","Document no longer in limbo: "+s.key),a.La.removeReference(s.key,e),a.La.containsKey(s.key)||xv(a,s.key)):rt()}function Vg(a,e){const r=e.key,s=r.path.canonicalString();a.Oa.get(r)||a.xa.has(s)||(Ce("SyncEngine","New document in limbo: "+r),a.xa.add(s),w_(a))}function w_(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const e=a.xa.values().next().value;a.xa.delete(e);const r=new It(wt.fromString(e)),s=a.qa.next();a.Na.set(s,new p_(r)),a.Oa=a.Oa.insert(r,s),ad(a.remoteStore,new _s(A($s(r.path)),s,"TargetPurposeLimboResolution",zr.oe))}}function oc(a,e,r){return rp.apply(this,arguments)}function rp(){return rp=(0,ae.A)(function*(a,e,r){const s=at(a),u=[],d=[],g=[];var w;s.Fa.isEmpty()||(s.Fa.forEach((w,b)=>{g.push(s.Ka(b,e,r).then(O=>{var j;if((O||r)&&s.isPrimaryClient){const K=O?!O.fromCache:null===(j=r?.targetChanges.get(b.targetId))||void 0===j?void 0:j.current;s.sharedClientState.updateQueryState(b.targetId,K?"current":"not-current")}if(O){u.push(O);const K=Jl.Wi(b.targetId,O);d.push(K)}}))}),yield Promise.all(g),s.Ca.d_(u),yield(w=(0,ae.A)(function*(O,j){const K=at(O);try{yield K.persistence.runTransaction("notifyLocalViewChanges","readwrite",se=>me.forEach(j,Me=>me.forEach(Me.$i,Je=>K.persistence.referenceDelegate.addReference(se,Me.targetId,Je)).next(()=>me.forEach(Me.Ui,Je=>K.persistence.referenceDelegate.removeReference(se,Me.targetId,Je)))))}catch(se){if(!us(se))throw se;Ce("LocalStore","Failed to update sequence numbers: "+se)}for(const se of j){const Me=se.targetId;if(!se.fromCache){const Je=K.os.get(Me),st=Je.withLastLimboFreeSnapshotVersion(Je.snapshotVersion);K.os=K.os.insert(Me,st)}}}),function b(O,j){return w.apply(this,arguments)})(s.localStore,d))}),rp.apply(this,arguments)}function Ov(a,e){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,ae.A)(function*(a,e){const r=at(a);if(!r.currentUser.isEqual(e)){Ce("SyncEngine","User change. New user:",e.toKey());const s=yield Zl(r.localStore,e);r.currentUser=e,(d=r).ka.forEach(w=>{w.forEach(b=>{b.reject(new Xe(xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield oc(r,s.hs)}var d})).apply(this,arguments)}function kv(a,e){const r=at(a),s=r.Na.get(e);if(s&&s.va)return Lt().add(s.key);{let u=Lt();const d=r.Ma.get(e);if(!d)return u;for(const g of d){const w=r.Fa.get(g);u=u.unionWith(w.view.Va)}return u}}function Lv(a,e){return ip.apply(this,arguments)}function ip(){return(ip=(0,ae.A)(function*(a,e){const r=at(a),s=yield hu(r.localStore,e.query,!0),u=e.view.ba(s);return r.isPrimaryClient&&kh(r,e.targetId,u.wa),u})).apply(this,arguments)}function sp(a,e){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,ae.A)(function*(a,e){const r=at(a);return Th(r.localStore,e).then(s=>oc(r,s))})).apply(this,arguments)}function Bg(a,e,r,s){return jg.apply(this,arguments)}function jg(){return(jg=(0,ae.A)(function*(a,e,r,s){const u=at(a),d=yield function(w,b){const O=at(w),j=at(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",K=>j.Mn(K,b).next(se=>se?O.localDocuments.getDocuments(K,se):me.resolve(null)))}(u.localStore,e);var b;null!==d?("pending"===r?yield He(u.remoteStore):"acknowledged"===r||"rejected"===r?(T_(u,e,s||null),np(u,e),b=e,at(at(u.localStore).mutationQueue).On(b)):rt(),yield oc(u,d)):Ce("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function $g(){return($g=(0,ae.A)(function*(a,e){const r=at(a);if(Gg(r),D_(r),!0===e&&!0!==r.Qa){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield A_(r,s.toArray());r.Qa=!0,yield pd(r.remoteStore,!0);for(const d of u)ad(r.remoteStore,d)}else if(!1===e&&!1!==r.Qa){const s=[];let u=Promise.resolve();r.Ma.forEach((d,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(Oh(r,g),Wc(r.localStore,g,!0))),pi(r.remoteStore,g)}),yield u,yield A_(r,s),function(g){const w=at(g);w.Na.forEach((b,O)=>{pi(w.remoteStore,O)}),w.La.pr(),w.Na=new Map,w.Oa=new mn(It.comparator)}(r),r.Qa=!1,yield pd(r.remoteStore,!1)}})).apply(this,arguments)}function A_(a,e,r){return op.apply(this,arguments)}function op(){return(op=(0,ae.A)(function*(a,e,r){const s=at(a),u=[],d=[];for(const g of e){let w;const b=s.Ma.get(g);if(b&&0!==b.length){w=yield Gc(s.localStore,A(b[0]));for(const O of b){const j=s.Fa.get(O),K=yield Lv(s,j);K.snapshot&&d.push(K.snapshot)}}else{const O=yield Kc(s.localStore,g);w=yield Gc(s.localStore,O),yield Og(s,Hg(O),g,!1,w.resumeToken)}u.push(w)}return s.Ca.d_(d),u})).apply(this,arguments)}function Hg(a){return wc(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Vv(a){return r=at(a).localStore,at(at(r).persistence).Qi();var r}function Fv(a,e,r,s){return zg.apply(this,arguments)}function zg(){return(zg=(0,ae.A)(function*(a,e,r,s){const u=at(a);if(u.Qa)return void Ce("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(e);if(d&&d.length>0)switch(r){case"current":case"not-current":{const g=yield Th(u.localStore,Mn(d[0])),w=Vu.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,qn.EMPTY_BYTE_STRING);yield oc(u,g,w);break}case"rejected":yield Wc(u.localStore,e,!0),Oh(u,e,s);break;default:rt()}})).apply(this,arguments)}function Uv(a,e,r){return ap.apply(this,arguments)}function ap(){return(ap=(0,ae.A)(function*(a,e,r){const s=Gg(a);if(s.Qa){for(const u of e){if(s.Ma.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){Ce("SyncEngine","Adding an already active target "+u);continue}const d=yield Kc(s.localStore,u),g=yield Gc(s.localStore,d);yield Og(s,Hg(d),g.targetId,!1,g.resumeToken),ad(s.remoteStore,g)}for(const u of r)s.Ma.has(u)&&(yield Wc(s.localStore,u,!1).then(()=>{pi(s.remoteStore,u),Oh(s,u)}).catch(Cn))}})).apply(this,arguments)}function Gg(a){const e=at(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mv.bind(null,e),e.Ca.d_=d_.bind(null,e.eventManager),e.Ca.$a=h_.bind(null,e.eventManager),e}function D_(a){const e=at(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iu.bind(null,e),e}let Na=(()=>{class a{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(r){var s=this;return(0,ae.A)(function*(){s.serializer=rc(r.databaseInfo.databaseId),s.sharedClientState=s.Wa(r),s.persistence=s.Ga(r),yield s.persistence.start(),s.localStore=s.za(r),s.gcScheduler=s.ja(r,s.localStore),s.indexBackfillerScheduler=s.Ha(r,s.localStore)})()}ja(r,s){return null}Ha(r,s){return null}za(r){return Bf(this.persistence,new wg,r.initialUser,this.serializer)}Ga(r){return new ba(ql.Zr,this.serializer)}Wa(r){return new od}terminate(){var r=this;return(0,ae.A)(function*(){var s,u;null===(s=r.gcScheduler)||void 0===s||s.stop(),null===(u=r.indexBackfillerScheduler)||void 0===u||u.stop(),r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}return a.provider={build:()=>new a},a})();class up extends Na{constructor(e,r,s){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,ae.A)(function*(){yield r().call(s,e),yield s.Ja.initialize(s,e),yield D_(s.Ja.syncEngine),yield He(s.Ja.remoteStore),yield s.persistence.yi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return Bf(this.persistence,new wg,e.initialUser,this.serializer)}ja(e,r){return new lu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ha(e,r){const s=new Wi(r,this.persistence);return new ja(e.asyncQueue,s)}Ga(e){const r=Xl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new Zu(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,ai(),mo(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new od}}class cp extends up{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,ae.A)(function*(){yield r().call(s,e);const u=s.Ja.syncEngine;s.sharedClientState instanceof Yc&&(s.sharedClientState.syncEngine={no:Bg.bind(null,u),ro:Fv.bind(null,u),io:Uv.bind(null,u),Qi:Vv.bind(null,u),eo:sp.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.yi(function(){var d=(0,ae.A)(function*(g){yield function md(a,e){return $g.apply(this,arguments)}(s.Ja.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return d.apply(this,arguments)}}())})()}Wa(e){const r=ai();if(!Yc.D(r))throw new Xe(xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Xl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yc(r,e.asyncQueue,s,e.clientId,e.initialUser)}}let ll=(()=>{class a{initialize(r,s){var u=this;return(0,ae.A)(function*(){u.localStore||(u.localStore=r.localStore,u.sharedClientState=r.sharedClientState,u.datastore=u.createDatastore(s),u.remoteStore=u.createRemoteStore(s),u.eventManager=u.createEventManager(s),u.syncEngine=u.createSyncEngine(s,!r.synchronizeTabs),u.sharedClientState.onlineStateHandler=d=>I_(u.syncEngine,d,1),u.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,u.syncEngine),yield pd(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Rh}createDatastore(r){const s=rc(r.databaseInfo.databaseId),u=new Dh(r.databaseInfo);return new qf(r.authCredentials,r.appCheckCredentials,u,s)}createRemoteStore(r){return u=this.localStore,d=this.datastore,g=r.asyncQueue,w=s=>I_(this.syncEngine,s,0),b=wh.D()?new wh:new Gf,new Qf(u,d,g,w,b);var u,d,g,w,b}createSyncEngine(r,s){return function(d,g,w,b,O,j,K){const se=new g_(d,g,w,b,O,j);return K&&(se.Qa=!0),se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){var r=this;return(0,ae.A)(function*(){var s,u,d;yield(d=(0,ae.A)(function*(w){const b=at(w);Ce("RemoteStore","RemoteStore shutting down."),b.L_.add(5),yield _o(b),b.k_.shutdown(),b.q_.set("Unknown")}),function g(w){return d.apply(this,arguments)})(r.remoteStore),null===(s=r.datastore)||void 0===s||s.terminate(),null===(u=r.eventManager)||void 0===u||u.terminate()})()}}return a.provider={build:()=>new a},a})();function S_(a,e=10240){let r=0;return{read:()=>(0,ae.A)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,ae.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Vh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}class b_{constructor(e,r){this.Xa=e,this.serializer=r,this.metadata=new Yn,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ae.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ae.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ae.A)(function*(){const r=yield e.nu();if(null===r)return null;const s=e.eu.decode(r),u=Number(s);isNaN(u)&&e.ru(`length string (${s}) is not valid number`);const d=yield e.iu(u);return new Cv(JSON.parse(d),r.length+u)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ae.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const r=e.su();r<0&&e.ru("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}iu(e){var r=this;return(0,ae.A)(function*(){for(;r.buffer.length<e;)(yield r.ou())&&r.ru("Reached the end of bundle when more is expected.");const s=r.eu.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ae.A)(function*(){const r=yield e.Xa.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class lp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ae.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Xe(xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,ae.A)(function*(g,w){const b=at(g),O={documents:w.map(Me=>gs(b.serializer,Me))},j=yield b.Lo("BatchGetDocuments",b.serializer.databaseId,wt.emptyPath(),O,w.length),K=new Map;j.forEach(Me=>{const Je=function Uu(a,e){return"found"in e?function(s,u){St(!!u.found);const d=ms(s,u.found.name),g=Jt(u.found.updateTime),w=u.found.createTime?Jt(u.found.createTime):pt.min(),b=new Kr({mapValue:{fields:u.found.fields}});return rr.newFoundDocument(d,g,w,b)}(a,e):"missing"in e?function(s,u){St(!!u.missing),St(!!u.readTime);const d=ms(s,u.missing),g=Jt(u.readTime);return rr.newNoDocument(d,g)}(a,e):rt()}(b.serializer,Me);K.set(Je.key.toString(),Je)});const se=[];return w.forEach(Me=>{const Je=K.get(Me.toString());St(!!Je),se.push(Je)}),se}),function d(g,w){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ya(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const d=It.fromPath(u);e.mutations.push(new Pn(d,e.precondition(d)))}),yield(s=(0,ae.A)(function*(d,g){const w=at(d),b={writes:g.map(O=>Ea(w.serializer,O))};yield w.Mo("Commit",w.serializer.databaseId,wt.emptyPath(),b)}),function u(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw rt();r=pt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new Xe(xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(pt.min())?jn.exists(!1):jn.updateTime(r):jn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(pt.min()))throw new Xe(xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jn.updateTime(r)}return jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DE{constructor(e,r,s,u,d){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=d,this._u=s.maxAttempts,this.t_=new Xc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ae.A)(function*(){const r=new lp(e.datastore),s=e.cu(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(d=>{e.lu(d)}))}).catch(u=>{e.lu(u)})}))}cu(e){try{const r=this.updateFunction(e);return!Pi(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Pc(r)}return!1}}class Wg{constructor(e,r,s,u,d){var g=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=Sn.UNAUTHENTICATED,this.clientId=ie.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(s,function(){var w=(0,ae.A)(function*(b){Ce("FirestoreClient","Received user=",b.uid),yield g.authCredentialListener(b),g.user=b});return function(b){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(Ce("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=sl(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function Kg(a,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,ae.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),Ce("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ae.A)(function*(d){s.isEqual(d)||(yield Zl(e.localStore,d),s=d)});return function(d){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),Fh.apply(this,arguments)}function qg(a,e){return dp.apply(this,arguments)}function dp(){return(dp=(0,ae.A)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield Eu(a);Ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>nl(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>nl(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function Eu(a){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,ae.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kg(a,a._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(u=e).name?u.code===xe.FAILED_PRECONDITION||u.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw e;Wt("Error using user provided cache. Falling back to memory cache: "+e),yield Kg(a,new Na)}}else Ce("FirestoreClient","Using default OfflineComponentProvider"),yield Kg(a,new Na);var u;return a._offlineComponents})).apply(this,arguments)}function _d(a){return yd.apply(this,arguments)}function yd(){return(yd=(0,ae.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield qg(a,a._uninitializedComponentsProvider._online)):(Ce("FirestoreClient","Using default OnlineComponentProvider"),yield qg(a,new ll))),a._onlineComponents})).apply(this,arguments)}function R_(a){return Eu(a).then(e=>e.persistence)}function ac(a){return Eu(a).then(e=>e.localStore)}function Uh(a){return _d(a).then(e=>e.remoteStore)}function vo(a){return _d(a).then(e=>e.syncEngine)}function uc(a){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,ae.A)(function*(a){const e=yield _d(a),r=e.eventManager;return r.onListen=m_.bind(null,e.syncEngine),r.onUnlisten=Nh.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Rv.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=wE.bind(null,e.syncEngine),r})).apply(this,arguments)}function M_(a,e,r={}){const s=new Yn;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(d,g,w,b,O){const j=new Vh({next:se=>{j.Za(),g.enqueueAndForget(()=>bg(d,K));const Me=se.docs.has(w);!Me&&se.fromCache?O.reject(new Xe(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):Me&&se.fromCache&&b&&"server"===b.source?O.reject(new Xe(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(se)},error:se=>O.reject(se)}),K=new Pg($s(w.path),j,{includeMetadataChanges:!0,_a:!0});return Xf(d,K)}(yield uc(a),a.asyncQueue,e,r,s)})),s.promise}function N_(a,e,r={}){const s=new Yn;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(d,g,w,b,O){const j=new Vh({next:se=>{j.Za(),g.enqueueAndForget(()=>bg(d,K)),se.fromCache&&"server"===b.source?O.reject(new Xe(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(se)},error:se=>O.reject(se)}),K=new Pg(w,j,{includeMetadataChanges:!0,_a:!0});return Xf(d,K)}(yield uc(a),a.asyncQueue,e,r,s)})),s.promise}function k_(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const L_=new Map;function V_(a,e,r){if(!r)throw new Xe(xe.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Hv(a,e,r,s){if(!0===e&&!0===s)throw new Xe(xe.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Bh(a){if(!It.isDocumentKey(a))throw new Xe(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function F_(a){if(It.isDocumentKey(a))throw new Xe(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Id(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":rt()}function On(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Xe(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Id(a);throw new Xe(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function hl(a,e){if(e<=0)throw new Xe(xe.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class hp{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Xe(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xe(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=k_(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Xe(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fl{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xe(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hp(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new si;switch(s.type){case"firstParty":return new Ge(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Xe(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ae.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=L_.get(r);s&&(Ce("ComponentProvider","Removing Datastore"),L_.delete(r),s.terminate())}(this),Promise.resolve()}}class gi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class gr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class Io extends gi{constructor(e,r,s){super(e,r,$s(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new It(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function fp(a,e,...r){if(a=(0,Mt.Ku)(a),V_("collection","path",e),a instanceof fl){const s=wt.fromString(e,...r);return F_(s),new Io(a,null,s)}{if(!(a instanceof gr||a instanceof Io))throw new Xe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(wt.fromString(e,...r));return F_(s),new Io(a.firestore,null,s)}}function Zg(a,e,...r){if(a=(0,Mt.Ku)(a),1===arguments.length&&(e=ie.newId()),V_("doc","path",e),a instanceof fl){const s=wt.fromString(e,...r);return Bh(s),new gr(a,null,new It(s))}{if(!(a instanceof gr||a instanceof Io))throw new Xe(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(wt.fromString(e,...r));return Bh(s),new gr(a.firestore,a instanceof Io?a.converter:null,new It(s))}}function gp(a,e){return a=(0,Mt.Ku)(a),e=(0,Mt.Ku)(e),(a instanceof gr||a instanceof Io)&&(e instanceof gr||e instanceof Io)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function pl(a,e){return a=(0,Mt.Ku)(a),e=(0,Mt.Ku)(e),a instanceof gi&&e instanceof gi&&a.firestore===e.firestore&&Oe(a._query,e._query)&&a.converter===e.converter}class U_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xc(this,"async_queue_retry"),this.Vu=()=>{const s=mo();s&&Ce("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const r=mo();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=mo();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Yn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ae.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(r){if(!us(r))throw r;Ce("AsyncQueue","Operation failed with retryable error: "+r)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(s=>{throw this.Eu=s,this.du=!1,zn("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.du=!1,s))));return this.mu=r,r}enqueueAfterDelay(e,r,s){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const u=il.createAndSchedule(this,e,r,s,d=>this.yu(d));return this.Tu.push(u),u}fu(){this.Eu&&rt()}verifyOperationInProgress(){}wu(){var e=this;return(0,ae.A)(function*(){let r;do{r=e.mu,yield r}while(r!==e.mu)})()}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function mp(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class zv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends fl{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new U_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ae.A)(function*(){if(e._firestoreClient){const r=e._firestoreClient.terminate();e._queue=new U_(r),e._firestoreClient=void 0,yield r}})()}}function jr(a){if(a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||Kv(a),a._firestoreClient}function Kv(a){var e,r,s;const u=a._freezeSettings(),d=(b=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new Po(a._databaseId,b,a._persistenceKey,(j=u).host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,k_(j.experimentalLongPollingOptions),j.useFetchStreams));var b,j;a._componentsProvider||!(null===(r=u.localCache)||void 0===r)&&r._offlineComponentProvider&&!(null===(s=u.localCache)||void 0===s)&&s._onlineComponentProvider&&(a._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),a._firestoreClient=new Wg(a._authCredentials,a._appCheckCredentials,a._queue,d,a._componentsProvider&&function(w){const b=w?._online.build();return{_offline:w?._offline.build(b),_online:b}}(a._componentsProvider))}function jh(){return(jh=(0,ae.A)(function*(a){Wt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=a._freezeSettings();B_(a,ll.provider,{build:r=>new cp(r,e.cacheSizeBytes)})})).apply(this,arguments)}function B_(a,e,r){if((a=On(a,_r))._firestoreClient||a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(a._componentsProvider||a._getSettings().localCache)throw new Xe(xe.FAILED_PRECONDITION,"SDK cache is already specified.");a._componentsProvider={_online:e,_offline:r},Kv(a)}class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(qn.fromBase64String(e))}catch(r){throw new Xe(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Js(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Xe(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yo{constructor(e){this._methodName=e}}class Ip{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Xe(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Xe(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}class Hh{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,u){if(s.length!==u.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==u[d])return!1;return!0}(this._values,e._values)}}const Zv=/^__.*__$/;class eI{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new di(e,this.data,this.fieldMask,r,this.fieldTransforms):new eu(e,this.data,r,this.fieldTransforms)}}class H_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new di(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function tm(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class zh{constructor(e,r,s,u,d,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===d&&this.vu(),this.fieldTransforms=d||[],this.fieldMask=g||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new zh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.Ou(e),u}Nu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.Fu({path:s,xu:!1});return u.vu(),u}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(tm(this.Cu)&&Zv.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nm{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||rc(e)}Qu(e,r,s,u=!1){return new zh({Cu:e,methodName:r,qu:s,path:kn.emptyPath(),xu:!1,ku:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(a){const e=a._freezeSettings(),r=rc(a._databaseId);return new nm(a._databaseId,!!e.ignoreUndefinedProperties,r)}function wd(a,e,r,s,u,d={}){const g=a.Qu(d.merge||d.mergeFields?2:0,e,r,u);wp("Data must be an object, but it was:",g,s);const w=am(s,g);let b,O;if(d.merge)b=new Zr(g.fieldMask),O=g.fieldTransforms;else if(d.mergeFields){const j=[];for(const K of d.mergeFields){const se=Ap(e,K,r);if(!g.contains(se))throw new Xe(xe.INVALID_ARGUMENT,`Field '${se}' is specified in your field mask but missing from your input data.`);G_(j,se)||j.push(se)}b=new Zr(j),O=g.fieldTransforms.filter(K=>b.covers(K.field))}else b=null,O=g.fieldTransforms;return new eI(new Kr(w),b,O)}class Ad extends Yo{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function z_(a,e,r){return new zh({Cu:3,qu:e.settings.qu,methodName:a._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rm extends Yo{_toFieldTransform(e){return new Qt(e.path,new Vo)}isEqual(e){return e instanceof rm}}class Ep extends Yo{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Ku.map(d=>cc(d,r)),u=new li(s);return new Qt(e.path,u)}isEqual(e){return e instanceof Ep&&(0,Mt.bD)(this.Ku,e.Ku)}}class im extends Yo{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Ku.map(d=>cc(d,r)),u=new Ss(s);return new Qt(e.path,u)}isEqual(e){return e instanceof im&&(0,Mt.bD)(this.Ku,e.Ku)}}class Tp extends Yo{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new ga(e.serializer,Ol(e.serializer,this.$u));return new Qt(e.path,r)}isEqual(e){return e instanceof Tp&&this.$u===e.$u}}function sm(a,e,r,s){const u=a.Qu(1,e,r);wp("Data must be an object, but it was:",u,s);const d=[],g=Kr.empty();Gt(s,(b,O)=>{const j=Xo(e,b,r);O=(0,Mt.Ku)(O);const K=u.Nu(j);if(O instanceof Ad)d.push(j);else{const se=cc(O,K);null!=se&&(d.push(j),g.set(j,se))}});const w=new Zr(d);return new H_(g,w,u.fieldTransforms)}function om(a,e,r,s,u,d){const g=a.Qu(1,e,r),w=[Ap(e,s,r)],b=[u];if(d.length%2!=0)throw new Xe(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let se=0;se<d.length;se+=2)w.push(Ap(e,d[se])),b.push(d[se+1]);const O=[],j=Kr.empty();for(let se=w.length-1;se>=0;--se)if(!G_(O,w[se])){const Me=w[se];let Je=b[se];Je=(0,Mt.Ku)(Je);const dt=g.Nu(Me);if(Je instanceof Ad)O.push(Me);else{const st=cc(Je,dt);null!=st&&(O.push(Me),j.set(Me,st))}}const K=new Zr(O);return new H_(j,K,g.fieldTransforms)}function tI(a,e,r,s=!1){return cc(r,a.Qu(s?4:3,e))}function cc(a,e){if(Eo(a=(0,Mt.Ku)(a)))return wp("Unsupported field value:",e,a),am(a,e);if(a instanceof Yo)return function(s,u){if(!tm(u.Cu))throw u.Bu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Bu(`${s._methodName}() is not currently supported inside arrays`);const d=s._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(s,u){const d=[];let g=0;for(const w of s){let b=cc(w,u.Lu(g));null==b&&(b={nullValue:"NULL_VALUE"}),d.push(b),g++}return{arrayValue:{values:d}}}(a,e)}return function(s,u){if(null===(s=(0,Mt.Ku)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Ol(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const d=vt.fromDate(s);return{timestampValue:un(u.serializer,d)}}if(s instanceof vt){const d=new vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:un(u.serializer,d)}}if(s instanceof Ip)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Js)return{bytesValue:In(u.serializer,s._byteString)};if(s instanceof gr){const d=u.databaseId,g=s.firestore._databaseId;if(!g.isEqual(d))throw u.Bu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:$o(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof Hh)return w=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(b=>{if("number"!=typeof b)throw w.Bu("VectorValues must only contain numeric values.");return ci(w.serializer,b)})}}}}};var w;throw u.Bu(`Unsupported field value: ${Id(s)}`)}(a,e)}function am(a,e){const r={};return ks(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gt(a,(s,u)=>{const d=cc(u,e.Mu(s));null!=d&&(r[s]=d)}),{mapValue:{fields:r}}}function Eo(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof vt||a instanceof Ip||a instanceof Js||a instanceof gr||a instanceof Yo||a instanceof Hh)}function wp(a,e,r){if(!Eo(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=Id(r);throw e.Bu("an object"===s?a+" a custom object":a+" "+s)}var u}function Ap(a,e,r){if((e=(0,Mt.Ku)(e))instanceof Tu)return e._internalPath;if("string"==typeof e)return Xo(a,e);throw gl("Field path arguments must be of type string or ",a,!1,void 0,r)}const um=new RegExp("[~\\*/\\[\\]]");function Xo(a,e,r){if(e.search(um)>=0)throw gl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Tu(...e.split("."))._internalPath}catch{throw gl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function gl(a,e,r,s,u){const d=s&&!s.isEmpty(),g=void 0!==u;let w=`Function ${e}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let b="";return(d||g)&&(b+=" (found",d&&(b+=` in field ${s}`),g&&(b+=` in document ${u}`),b+=")"),new Xe(xe.INVALID_ARGUMENT,w+a+b)}function G_(a,e){return a.some(r=>r.isEqual(e))}class Gh{constructor(e,r,s,u,d){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class nI extends Gh{data(){return super.data()}}function Dd(a,e){return"string"==typeof e?Xo(a,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function Jo(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Xe(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Wh extends Dp{}function ml(a,e,...r){let s=[];e instanceof Dp&&s.push(e),s=s.concat(r),function(d){const g=d.filter(b=>b instanceof lc).length,w=d.filter(b=>b instanceof ri).length;if(g>1||g>0&&w>0)throw new Xe(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class ri extends Wh{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new ri(e,r,s)}_apply(e){const r=this._parse(e);return Y_(e._query,r),new gi(e.firestore,e.converter,V(e._query,r))}_parse(e){const r=Td(e.firestore);return function(d,g,w,b,O,j,K){let se;if(O.isKeyField()){if("array-contains"===j||"array-contains-any"===j)throw new Xe(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${j}' queries on documentId().`);if("in"===j||"not-in"===j){Q_(K,j);const Me=[];for(const Je of K)Me.push(_l(b,d,Je));se={arrayValue:{values:Me}}}else se=_l(b,d,K)}else"in"!==j&&"not-in"!==j&&"array-contains-any"!==j||Q_(K,j),se=tI(w,"where",K,"in"===j||"not-in"===j);return Rn.create(O,j,se)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class lc extends Dp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new lc(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:an.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,d){let g=u;const w=d.getFlattenedFilters();for(const b of w)Y_(g,b),g=V(g,b)}(e._query,r),new gi(e.firestore,e.converter,V(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Kh extends Wh{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Kh(e,r)}_apply(e){const r=function(u,d,g){if(null!==u.startAt)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vi(d,g)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(u,d){const g=u.explicitOrderBy.concat([d]);return new Si(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class qh extends Wh{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new qh(e,r,s)}_apply(e){return new gi(e.firestore,e.converter,ee(e._query,this._limit,this._limitType))}}class Qh extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Qh(e,r,s)}_apply(e){const r=xa(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(d=r,new Si((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class Cp extends Wh{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Cp(e,r,s)}_apply(e){const r=xa(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(d=r,new Si((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function xa(a,e,r,s){if(r[0]=(0,Mt.Ku)(r[0]),r[0]instanceof Gh)return function(d,g,w,b,O){if(!b)throw new Xe(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const j=[];for(const K of Ds(d))if(K.field.isKeyField())j.push(so(g,b.key));else{const se=b.data.field(K.field);if(Ls(se))throw new Xe(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+K.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===se){const Me=K.field.canonicalString();throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Me}' (used as the orderBy) does not exist.`)}j.push(se)}return new Yi(j,O)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=Td(a.firestore);return function(g,w,b,O,j,K){const se=g.explicitOrderBy;if(j.length>se.length)throw new Xe(xe.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Me=[];for(let Je=0;Je<j.length;Je++){const dt=j[Je];if(se[Je].field.isKeyField()){if("string"!=typeof dt)throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof dt}`);if(!fa(g)&&-1!==dt.indexOf("/"))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${dt}' contains a slash.`);const st=g.path.child(wt.fromString(dt));if(!It.isDocumentKey(st))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${st}' is not because it contains an odd number of segments.`);const kt=new It(st);Me.push(so(w,kt))}else{const st=tI(b,O,dt);Me.push(st)}}return new Yi(Me,K)}(a._query,a.firestore._databaseId,u,e,r,s)}}function _l(a,e,r){if("string"==typeof(r=(0,Mt.Ku)(r))){if(""===r)throw new Xe(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fa(e)&&-1!==r.indexOf("/"))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(wt.fromString(r));if(!It.isDocumentKey(s))throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return so(a,new It(s))}if(r instanceof gr)return so(a,r._key);throw new Xe(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(r)}.`)}function Q_(a,e){if(!Array.isArray(a)||0===a.length)throw new Xe(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y_(a,e){const r=function(u,d){for(const g of u)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Xe(xe.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Sp{convertValue(e,r="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw rt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return Gt(e,(u,d)=>{s[u]=this.convertValue(d,r)}),s}convertVectorValue(e){var r,s,u;const d=null===(u=null===(s=null===(r=e.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===s?void 0:s.values)||void 0===u?void 0:u.map(g=>hr(g.doubleValue));return new Hh(d)}convertGeoPoint(e){return new Ip(hr(e.latitude),hr(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Ci(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Qi(e));default:return null}}convertTimestamp(e){const r=on(e);return new vt(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=wt.fromString(e);St($u(s));const u=new yi(s.get(1),s.get(3)),d=new It(s.popFirst(5));return u.isEqual(r)||zn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function Sd(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class Yh extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,r)}}class yl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wu extends Gh{constructor(e,r,s,u,d,g){super(e,r,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Dd("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class bd extends wu{data(e={}){return super.data(e)}}class vl{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new yl(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new bd(this._firestore,this._userDataWriter,s.key,s,new yl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Xe(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(w=>({type:"added",doc:new bd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new yl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const b=new bd(u._firestore,u._userDataWriter,w.doc.key,w.doc,new yl(u._snapshot.mutatedKeys.has(w.doc.key),u._snapshot.fromCache),u.query.converter);let O=-1,j=-1;return 0!==w.type&&(O=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),j=g.indexOf(w.doc.key)),{type:uI(w.type),doc:b,oldIndex:O,newIndex:j}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function uI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function cI(a,e){return a instanceof wu&&e instanceof wu?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof vl&&e instanceof vl&&a._firestore===e._firestore&&pl(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class Au extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,r)}}function ty(a,e,r){a=On(a,gr);const s=On(a.firestore,_r),u=Sd(a.converter,e,r);return Zo(s,[wd(Td(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,jn.none())])}function dm(a,e,r,...s){a=On(a,gr);const u=On(a.firestore,_r),d=Td(u);let g;return g="string"==typeof(e=(0,Mt.Ku)(e))||e instanceof Tu?om(d,"updateDoc",a._key,e,r,s):sm(d,"updateDoc",a._key,e),Zo(u,[g.toMutation(a._key,jn.exists(!0))])}function hm(a,...e){var r,s,u;a=(0,Mt.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||mp(e[g])||(d=e[g],g++);const w={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(mp(e[g])){const K=e[g];e[g]=null===(r=K.next)||void 0===r?void 0:r.bind(K),e[g+1]=null===(s=K.error)||void 0===s?void 0:s.bind(K),e[g+2]=null===(u=K.complete)||void 0===u?void 0:u.bind(K)}let b,O,j;if(a instanceof gr)O=On(a.firestore,_r),j=$s(a._key.path),b={next:K=>{e[g]&&e[g](Rp(O,a,K))},error:e[g+1],complete:e[g+2]};else{const K=On(a,gi);O=On(K.firestore,_r),j=K._query;const se=new Au(O);b={next:Me=>{e[g]&&e[g](new vl(O,se,K,Me))},error:e[g+1],complete:e[g+2]},Jo(a._query)}return function(se,Me,Je,dt){const st=new Vh(dt),kt=new Pg(Me,st,Je);return se.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return Xf(yield uc(se),kt)})),()=>{st.Za(),se.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return bg(yield uc(se),kt)}))}}(jr(O),j,w,b)}function Zo(a,e){return function(s,u){const d=new Yn;return s.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function AE(a,e,r){return v_.apply(this,arguments)}(yield vo(s),u,d)})),d.promise}(jr(a),e)}function Rp(a,e,r){const s=r.docs.get(e._key),u=new Au(a);return new wu(a,u,e._key,s,new yl(r.hasPendingWrites,r.fromCache),e.converter)}const uy={maxAttempts:5};class cy{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Td(e)}set(e,r,s){this._verifyNotCommitted();const u=dc(e,this._firestore),d=Sd(u.converter,r,s),g=wd(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,jn.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const d=dc(e,this._firestore);let g;return g="string"==typeof(r=(0,Mt.Ku)(r))||r instanceof Tu?om(this._dataReader,"WriteBatch.update",d._key,r,s,u):sm(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(g.toMutation(d._key,jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=dc(e,this._firestore);return this._mutations=this._mutations.concat(new ya(r._key,jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dc(a,e){if((a=(0,Mt.Ku)(a)).firestore!==e)throw new Xe(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class fI extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=Td(r)}get(r){const s=dc(r,this._firestore),u=new Yh(this._firestore);return this._transaction.lookup([s._key]).then(d=>{if(!d||1!==d.length)return rt();const g=d[0];if(g.isFoundDocument())return new Gh(this._firestore,u,g.key,g,s.converter);if(g.isNoDocument())return new Gh(this._firestore,u,s._key,null,s.converter);throw rt()})}set(r,s,u){const d=dc(r,this._firestore),g=Sd(d.converter,s,u),w=wd(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,u);return this._transaction.set(d._key,w),this}update(r,s,u,...d){const g=dc(r,this._firestore);let w;return w="string"==typeof(s=(0,Mt.Ku)(s))||s instanceof Tu?om(this._dataReader,"Transaction.update",g._key,s,u,d):sm(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,w),this}delete(r){const s=dc(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=dc(e,this._firestore),s=new Au(this._firestore);return super.get(e).then(u=>new wu(this._firestore,s,r._key,u._document,new yl(!1,!1),r.converter))}}function Jh(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xe("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function my(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function mm(){if(!function ls(){return typeof atob<"u"}())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){or=mt.SDK_VERSION,(0,mt._registerComponent)(new mr.uA("firestore",(s,{instanceIdentifier:u,options:d})=>{const g=s.getProvider("app").getImmediate(),w=new _r(new $i(s.getProvider("auth-internal")),new k(s.getProvider("app-check-internal")),function(O,j){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new Xe(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(O.options.projectId,j)}(g,u),g);return d=Object.assign({useFetchStreams:r},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,mt.registerVersion)(pr,"4.7.3",e),(0,mt.registerVersion)(pr,"4.7.3","esm2017")}();class Zh{constructor(e){this._delegate=e}static fromBase64String(e){return mm(),new Zh(Js.fromBase64String(e))}static fromUint8Array(e){return my(),new Zh(Js.fromUint8Array(e))}toBase64(){return mm(),this._delegate.toBase64()}toUint8Array(){return my(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function xp(a){return function _y(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class Op{enableIndexedDbPersistence(e,r){return function qv(a,e){Wt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings();return B_(a,ll.provider,{build:s=>new up(s,r.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function _p(a){return jh.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function j_(a){if(a._initialized&&!a._terminated)throw new Xe(xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Yn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{yield(r=(0,ae.A)(function*(u){if(!Xr.D())return Promise.resolve();const d=u+"main";yield Xr.delete(d)}),function s(u){return r.apply(this,arguments)})(Xl(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class kp{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof yi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Wt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function Ed(a,e,r,s={}){var u;const d=(a=On(a,fl))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==g&&Wt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:g,ssl:!1})),s.mockUserToken){let w,b;if("string"==typeof s.mockUserToken)w=s.mockUserToken,b=Sn.MOCK_USER;else{w=(0,Mt.Fy)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new Xe(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Sn(O)}a._authCredentials=new Ti(new os(w,b))}}(this._delegate,e,r,s)}enableNetwork(){return function yp(a){return function Bv(a){return a.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield R_(a),r=yield Uh(a);return e.setNetworkEnabled(!0),function(u){const d=at(u);return d.L_.delete(0),ic(d)}(r)}))}(jr(a=On(a,_r)))}(this._delegate)}disableNetwork(){return function Qv(a){return function P_(a){return a.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield R_(a),r=yield Uh(a);return e.setNetworkEnabled(!1),(s=(0,ae.A)(function*(d){const g=at(d);g.L_.add(0),yield _o(g),g.q_.set("Offline")}),function u(d){return s.apply(this,arguments)})(r);var s}))}(jr(a=On(a,_r)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Hv("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function em(a){return function(r){const s=new Yn;return r.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function E_(a,e){return tp.apply(this,arguments)}(yield vo(r),s)})),s.promise}(jr(a=On(a,_r)))}(this._delegate)}onSnapshotsInSync(e){return function ry(a,e){return function x_(a,e){const r=new Vh(e);return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return u=yield uc(a),d=r,at(u).Y_.add(d),void d.next();var u,d})),()=>{r.Za(),a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return u=yield uc(a),d=r,void at(u).Y_.delete(d);var u,d}))}}(jr(a=On(a,_r)),mp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ka(this,fp(this._delegate,e))}catch(r){throw Yr(r,"collection()","Firestore.collection()")}}doc(e){try{return new Rs(this,Zg(this._delegate,e))}catch(r){throw Yr(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ns(this,function pp(a,e){if(a=On(a,fl),V_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(xe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gi(a,null,(s=e,new Si(wt.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw Yr(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pI(a,e,r){a=On(a,_r);const s=Object.assign(Object.assign({},uy),r);return function(d){if(d.maxAttempts<1)throw new Xe(xe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const b=new Yn;return d.asyncQueue.enqueueAndForget((0,ae.A)(function*(){const O=yield function dl(a){return _d(a).then(e=>e.datastore)}(d);new DE(d.asyncQueue,O,w,g,b).au()})),b.promise}(jr(a),u=>e(new fI(a,u)),s)}(this._delegate,r=>e(new ym(this,r)))}batch(){return jr(this._delegate),new vm(new cy(this._delegate,e=>Zo(this._delegate,e)))}loadBundle(e){return function Xv(a,e){const r=jr(a=On(a,_r)),s=new zv;return function $v(a,e,r,s){const u=function(g,w){let b;return b="string"==typeof g?jo().encode(g):g,j=function(j,K){if(j instanceof Uint8Array)return S_(j,K);if(j instanceof ArrayBuffer)return S_(new Uint8Array(j),K);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new b_(j,w);var j}(r,rc(e));a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){!function Lh(a,e,r){const s=at(a);var u;(u=(0,ae.A)(function*(g,w,b){try{const O=yield w.getMetadata();if(yield function(Je,dt){const st=at(Je),kt=Jt(dt.createTime);return st.persistence.runTransaction("hasNewerBundle","readonly",Ht=>st.Gr.getBundleMetadata(Ht,dt.id)).then(Ht=>!!Ht&&Ht.createTime.compareTo(kt)>=0)}(g.localStore,O))return yield w.close(),b._completeWith({taskState:"Success",documentsLoaded:(Je=O).totalDocuments,bytesLoaded:Je.totalBytes,totalDocuments:Je.totalDocuments,totalBytes:Je.totalBytes}),Promise.resolve(new Set);b._updateProgress(Jf(O));const j=new bv(O,g.localStore,w.serializer);let K=yield w.Ua();for(;K;){const Me=yield j.la(K);Me&&b._updateProgress(Me),K=yield w.Ua()}const se=yield j.complete();return yield oc(g,se.Ia,void 0),yield function(Je,dt){const st=at(Je);return st.persistence.runTransaction("Save bundle","readwrite",kt=>st.Gr.saveBundleMetadata(kt,dt))}(g.localStore,O),b._completeWith(se.progress),Promise.resolve(se.Pa)}catch(O){return Wt("SyncEngine",`Loading bundle failed with ${O}`),b._failWith(O),Promise.resolve(new Set)}var Je}),function d(g,w,b){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield vo(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function $_(a,e){return function O_(a,e){return a.asyncQueue.enqueue((0,ae.A)(function*(){return function(s,u){const d=at(s);return d.persistence.runTransaction("Get named query","readonly",g=>d.Gr.getNamedQuery(g,u))}(yield ac(a),e)}))}(jr(a=On(a,_r)),e).then(r=>r?new gi(a,null,r.query):null)}(this._delegate,e).then(r=>r?new ns(this,r):null)}}class _m extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zh(new Js(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return Rs.forKey(r,this.firestore,null)}}class ym{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new _m(e)}get(e){const r=fc(e);return this._delegate.get(r).then(s=>new Il(this._firestore,new wu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=fc(e);return s?(Jh("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=fc(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=fc(e);return this._delegate.delete(r),this}}class vm{constructor(e){this._delegate=e}set(e,r,s){const u=fc(e);return s?(Jh("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const d=fc(e);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,s,...u),this}delete(e){const r=fc(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class hc{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new bd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ef(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=hc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let d=u.get(r);return d||(d=new hc(e,new _m(e),r),u.set(r,d)),d}}hc.INSTANCES=new WeakMap;class Rs{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new _m(e)}static forPath(e,r,s){if(e.length%2!=0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Rs(r,new gr(r._delegate,s,new It(e)))}static forKey(e,r,s){return new Rs(r,new gr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new ka(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ka(this.firestore,fp(this._delegate,e))}catch(r){throw Yr(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Mt.Ku)(e))instanceof gr&&gp(this._delegate,e)}set(e,r){r=Jh("DocumentReference.set",r);try{return r?ty(this._delegate,e,r):ty(this._delegate,e)}catch(s){throw Yr(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?dm(this._delegate,e):dm(this._delegate,e,r,...s)}catch(u){throw Yr(u,"updateDoc()","DocumentReference.update()")}}delete(){return function ny(a){return Zo(On(a.firestore,_r),[new ya(a._key,jn.none())])}(this._delegate)}onSnapshot(...e){const r=vy(e),s=Iy(e,u=>new Il(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return hm(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function J_(a){a=On(a,gr);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return function vd(a,e){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(s=(0,ae.A)(function*(d,g,w){try{const b=yield function(j,K){const se=at(j);return se.persistence.runTransaction("read document","readonly",Me=>se.localDocuments.getDocument(Me,K))}(d,g);b.isFoundDocument()?w.resolve(b):b.isNoDocument()?w.resolve(null):w.reject(new Xe(xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const O=sl(b,`Failed to get document '${g} from cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield ac(a),e,r);var s})),r.promise}(r,a._key).then(u=>new wu(e,s,a._key,u,new yl(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function OE(a){a=On(a,gr);const e=On(a.firestore,_r);return M_(jr(e),a._key,{source:"server"}).then(r=>Rp(e,a,r))}(this._delegate):function xE(a){a=On(a,gr);const e=On(a.firestore,_r);return M_(jr(e),a._key).then(r=>Rp(e,a,r))}(this._delegate),r.then(s=>new Il(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}function Yr(a,e,r){return a.message=a.message.replace(e,r),a}function vy(a){for(const e of a)if("object"==typeof e&&!xp(e))return e;return{}}function Iy(a,e){var r,s;let u;return u=xp(a[0])?a[0]:xp(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(e(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Il{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new Rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return cI(this._delegate,e._delegate)}}class ef extends Il{data(e){const r=this._delegate.data(e);return this._delegate._converter||function ji(a,e){a||rt()}(void 0!==r),r}}class ns{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new _m(e)}where(e,r,s){try{return new ns(this.firestore,ml(this._delegate,function rI(a,e,r){const s=e,u=Dd("where",a);return ri._create(u,s,r)}(e,r,s)))}catch(u){throw Yr(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new ns(this.firestore,ml(this._delegate,function W_(a,e="asc"){const r=e,s=Dd("orderBy",a);return Kh._create(s,r)}(e,r)))}catch(s){throw Yr(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ns(this.firestore,ml(this._delegate,function iI(a){return hl("limit",a),qh._create("limit",a,"F")}(e)))}catch(r){throw Yr(r,"limit()","Query.limit()")}}limitToLast(e){try{return new ns(this.firestore,ml(this._delegate,function K_(a){return hl("limitToLast",a),qh._create("limitToLast",a,"L")}(e)))}catch(r){throw Yr(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ns(this.firestore,ml(this._delegate,function sI(...a){return Qh._create("startAt",a,!0)}(...e)))}catch(r){throw Yr(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ns(this.firestore,ml(this._delegate,function oI(...a){return Qh._create("startAfter",a,!1)}(...e)))}catch(r){throw Yr(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ns(this.firestore,ml(this._delegate,function q_(...a){return Cp._create("endBefore",a,!1)}(...e)))}catch(r){throw Yr(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ns(this.firestore,ml(this._delegate,function Cd(...a){return Cp._create("endAt",a,!0)}(...e)))}catch(r){throw Yr(r,"endAt()","Query.endAt()")}}isEqual(e){return pl(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function Z_(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return function jv(a,e){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(s=(0,ae.A)(function*(d,g,w){try{const b=yield hu(d,g,!0),O=new Mh(g,b.Ts),j=O.ma(b.documents),K=O.applyChanges(j,!1);w.resolve(K.snapshot)}catch(b){const O=sl(b,`Failed to execute query '${g} against cache`);w.reject(O)}}),function u(d,g,w){return s.apply(this,arguments)})(yield ac(a),e,r);var s})),r.promise}(r,a._query).then(u=>new vl(e,s,a,u))}(this._delegate):"server"===e?.source?function ey(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return N_(r,a._query,{source:"server"}).then(u=>new vl(e,s,a,u))}(this._delegate):function bp(a){a=On(a,gi);const e=On(a.firestore,_r),r=jr(e),s=new Au(e);return Jo(a._query),N_(r,a._query).then(u=>new vl(e,s,a,u))}(this._delegate),r.then(s=>new Pd(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=vy(e),s=Iy(e,u=>new Pd(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return hm(this._delegate,r,s)}withConverter(e){return new ns(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}class vI{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new ef(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pd{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ef(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new vI(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new ef(this._firestore,s))})}isEqual(e){return cI(this._delegate,e._delegate)}}class ka extends ns{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rs(this.firestore,e):null}doc(e){try{return new Rs(this.firestore,void 0===e?Zg(this._delegate):Zg(this._delegate,e))}catch(r){throw Yr(r,"doc()","CollectionReference.doc()")}}add(e){return function An(a,e){const r=On(a.firestore,_r),s=Zg(a),u=Sd(a.converter,e);return Zo(r,[wd(Td(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,jn.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new Rs(this.firestore,r))}isEqual(e){return gp(this._delegate,e._delegate)}withConverter(e){return new ka(this.firestore,this._delegate.withConverter(e?hc.getInstance(this.firestore,e):null))}}function fc(a){return On(a,gr)}class Md{constructor(...e){this._delegate=new Tu(...e)}static documentId(){return new Md(kn.keyField().canonicalString())}isEqual(e){return(e=(0,Mt.Ku)(e))instanceof Tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Nd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function dy(){return new rm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Nd(e)}static delete(){const e=function ly(){return new Ad("deleteField")}();return e._methodName="FieldValue.delete",new Nd(e)}static arrayUnion(...e){const r=function gI(...a){return new Ep("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new Nd(r)}static arrayRemove(...e){const r=function mI(...a){return new im("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new Nd(r)}static increment(e){const r=function Zs(a){return new Tp("increment",a)}(e);return r._methodName="FieldValue.increment",new Nd(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const II={Firestore:kp,GeoPoint:Ip,Timestamp:vt,Blob:Zh,Transaction:ym,WriteBatch:vm,DocumentReference:Rs,DocumentSnapshot:Il,Query:ns,QueryDocumentSnapshot:ef,QuerySnapshot:Pd,CollectionReference:ka,FieldPath:Md,FieldValue:Nd,setLogLevel:function yy(a){!function So(a){dn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};function wy(a,e){return function EI(a,e=en.E){return new je.c(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Lp(a,e){return wy(a,e).pipe((0,Ke.T)(r=>({payload:r,type:"query"})))}!function Ty(a){(function Ey(a,e){a.INTERNAL.registerComponent(new mr.uA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},II)))})(a,(e,r)=>new kp(e,r,new Op)),a.registerVersion("@firebase/firestore-compat","0.3.38")}(Ye.A);class xd{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:d}=Ry(s,r);return new Cy(u,d,this.afs)}snapshotChanges(){return function Ay(a,e){return wy(a,e).pipe((0,Xt.Z)(void 0),ke(),(0,Ke.T)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ke.T)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,Se.H)(this.ref.get(e)).pipe(oe.U0)}}function Vp(a,e){return Lp(a,e).pipe((0,Xt.Z)(void 0),ke(),(0,Ke.T)(r=>{const[s,u]=r,d=u.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((w,b)=>{const O=d.find(K=>K.doc.ref.isEqual(w.ref)),j=s?.payload.docs.find(K=>K.ref.isEqual(w.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(w.metadata)||!O&&j&&JSON.stringify(j.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:w}})}),g}))}function Im(a,e,r){return Vp(a,r).pipe((0,Ne.S)((s,u)=>function Dy(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function TI(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Em(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Em(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Em(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(d=>d.payload),e),[]),(0,tt.F)(),(0,Ke.T)(s=>s.map(u=>({type:u.type,payload:u}))))}function Em(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function Od(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Cy{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Vp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Ke.T)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,Xt.Z)(void 0),ke(),(0,ze.p)(([s,u])=>u.length>0||!s),(0,Ke.T)(([,s])=>s),oe.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Od(e);return Im(this.query,r,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.T)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),oe.U0)}get(e){return(0,Se.H)(this.query.get(e)).pipe(oe.U0)}add(e){return this.ref.add(e)}doc(e){return new xd(this.ref.doc(e),this.afs)}}class wI{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Vp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.T)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,ze.p)(r=>r.length>0),oe.U0):Vp(this.query,this.afs.schedulers.outsideAngular).pipe(oe.U0)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.S)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=Od(e);return Im(this.query,r,this.afs.schedulers.outsideAngular).pipe(oe.U0)}valueChanges(e={}){return Lp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ke.T)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),oe.U0)}get(e){return(0,Se.H)(this.query.get(e)).pipe(oe.U0)}}const Sy=new Y.nKC("angularfire2.enableFirestorePersistence"),by=new Y.nKC("angularfire2.firestore.persistenceSettings"),AI=new Y.nKC("angularfire2.firestore.settings"),DI=new Y.nKC("angularfire2.firestore.use-emulator");function Ry(a,e=(r=>r)){return{query:e(a),ref:a}}let Py=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,d,g,w,b,O,j,K,se,Me,Je,dt,st,kt,Ht){this.schedulers=b;const Tt=(0,q.iB)(r,w,s),zt=j;K&&pn(Tt,w,se,Je,dt,st,Me,kt),[this.firestore,this.persistenceEnabled$]=(0,q.BM)(`${Tt.name}.firestore`,"AngularFirestore",Tt.name,()=>{const yn=w.runOutsideAngular(()=>Tt.firestore());if(d&&yn.settings(d),zt&&yn.useEmulator(...zt),u&&!(0,I.Vy)(g)){const ln=()=>{try{return(0,Se.H)(yn.enablePersistence(O||void 0).then(()=>!0,()=>!1))}catch(ge){return typeof console<"u"&&console.warn(ge),(0,_e.of)(!1)}};return[yn,w.runOutsideAngular(ln)]}return[yn,(0,_e.of)(!1)]},[d,zt,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:g}=Ry(u,s),w=this.schedulers.ngZone.run(()=>d);return new Cy(w,g,this)}collectionGroup(r,s){const u=s||(g=>g),d=this.firestore.collectionGroup(r);return new wI(u(d),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new xd(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(Y.KVO(q.rx),Y.KVO(q.uP,8),Y.KVO(Sy,8),Y.KVO(AI,8),Y.KVO(Y.Agw),Y.KVO(Y.SKi),Y.KVO(oe.u0),Y.KVO(by,8),Y.KVO(DI,8),Y.KVO(lr,8),Y.KVO(Qe,8),Y.KVO(ft,8),Y.KVO(xt,8),Y.KVO(Be,8),Y.KVO(Zt,8),Y.KVO(Fn,8),Y.KVO(oe.Jv,8))};static \u0275prov=Y.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),My=(()=>{class a{constructor(){Te.A.registerVersion("angularfire",oe.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Sy,useValue:!0},{provide:by,useValue:r}]}}static \u0275fac=function(s){return new(s||a)};static \u0275mod=Y.$C({type:a});static \u0275inj=Y.G2t({providers:[Py]})}return a})()},9253:(Rt,Ue,U)=>{U.d(Ue,{BM:()=>qe,Gt:()=>fe,bf:()=>Ke,e7:()=>le,iB:()=>J,rx:()=>je,uP:()=>Se});var I=U(7705),Y=U(1825),oe=U(7935);const q=["ngOnDestroy"],fe=(lt,Bt,Ft,Ae={})=>new Proxy(lt,{get:(ze,Te)=>Ft.runOutsideAngular(()=>{if(lt[Te])return Ae?.spy?.get&&Ae.spy.get(Te,lt[Te]),lt[Te];if(q.indexOf(Te)>-1)return()=>{};const et=Bt.toPromise().then(Qe=>{const ft=Qe?.[Te];return"function"==typeof ft?ft.bind(Qe):ft?.then?ft.then(xt=>Ft.run(()=>xt)):Ft.run(()=>ft)});return new Proxy(()=>{},{get:(Qe,ft)=>et[ft],apply:(Qe,ft,xt)=>et.then(Be=>{const Zt=Be?.(...xt);return Ae?.spy?.apply&&Ae.spy.apply(Te,xt,Zt),Zt})})})}),le=(lt,Bt)=>{Bt.forEach(Ft=>{Object.getOwnPropertyNames(Ft.prototype||Ft).forEach(Ae=>{Object.defineProperty(lt.prototype,Ae,Object.getOwnPropertyDescriptor(Ft.prototype||Ft,Ae))})})};class _e{constructor(Bt){return Bt}}const je=new I.nKC("angularfire2.app.options"),Se=new I.nKC("angularfire2.app.name");function J(lt,Bt,Ft){const ze="object"==typeof Ft&&Ft||{};ze.name=ze.name||"string"==typeof Ft&&Ft||"[DEFAULT]";const et=oe.A.apps.filter(Qe=>Qe&&Qe.name===ze.name)[0]||Bt.runOutsideAngular(()=>oe.A.initializeApp(lt,ze));try{if(JSON.stringify(lt)!==JSON.stringify(et.options)){const Qe=!!module.hot;Z("error",`${et.name} Firebase App already initialized with different options${Qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new _e(et)}const Z=(lt,...Bt)=>{(0,I.naY)()&&typeof console<"u"&&console[lt](...Bt)},pe={provide:_e,useFactory:J,deps:[je,I.SKi,[new I.Xx1,Se]]};let Ke=(()=>{class lt{static initializeApp(Ft,Ae){return{ngModule:lt,providers:[{provide:je,useValue:Ft},{provide:Se,useValue:Ae}]}}constructor(Ft){oe.A.registerVersion("angularfire",Y.xv.full,"core"),oe.A.registerVersion("angularfire",Y.xv.full,"app-compat"),oe.A.registerVersion("angular",I.xvI.full,Ft.toString())}static \u0275fac=function(Ae){return new(Ae||lt)(I.KVO(I.Agw))};static \u0275mod=I.$C({type:lt});static \u0275inj=I.G2t({providers:[pe]})}return lt})();function qe(lt,Bt,Ft,Ae,ze){const[,Te,et]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===lt)||[];if(Te)return function _t(lt,Bt){try{return lt.toString()===Bt.toString()}catch{return lt===Bt}}(ze,et)||(yt("error",`${Bt} was already initialized on the ${Ft} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:ze,was:et})),Te;{const Qe=Ae();return globalThis.\u0275AngularfireInstanceCache.push([lt,Qe,ze]),Qe}}const it=typeof module<"u"&&!!module.hot,yt=(lt,...Bt)=>{(0,I.naY)()&&typeof console<"u"&&console[lt](...Bt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(Rt,Ue,U)=>{U.d(Ue,{xv:()=>_t,U0:()=>Fn,u0:()=>et,Jv:()=>Bt});var I=U(7705),Y=U(7852);(0,Y.registerVersion)("firebase","10.14.0","app");var fe=U(6780),_e=U(9687);const Se=new class je extends _e.q{}(class le extends fe.R{constructor(Xt,de){super(Xt,de),this.scheduler=Xt,this.work=de}schedule(Xt,de=0){return de>0?super.schedule(Xt,de):(this.delay=de,this.state=Xt,this.scheduler.flush(this),this)}execute(Xt,de){return de>0||this.closed?super.execute(Xt,de):this._execute(Xt,de)}requestAsyncId(Xt,de,we=0){return null!=we&&we>0||null==we&&this.delay>0?super.requestAsyncId(Xt,de,we):(Xt.flush(this),0)}});var Z=U(3236),pe=U(8141),Ke=U(6745),qe=U(941);const _t=new I.RxE("ANGULARFIRE2_VERSION");class Bt{constructor(){return((en,Xt)=>{const de=(0,Y.getApps)(),we=[];return de.forEach(ke=>{ke.container.getProvider(en).instances.forEach(tt=>{we.includes(tt)||we.push(tt)})}),we})(Ft)}}const Ft="app-check";function Ae(){}class ze{zone;delegate;constructor(Xt,de=Se){this.zone=Xt,this.delegate=de}now(){return this.delegate.now()}schedule(Xt,de,we){const ke=this.zone;return this.delegate.schedule(function(tt){ke.runGuarded(()=>{Xt.apply(this,[tt])})},de,we)}}class Te{zone;task=null;constructor(Xt){this.zone=Xt}call(Xt,de){const we=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ae,{},Ae,Ae)),de.pipe((0,pe.M)({next:we,complete:we,error:we})).subscribe(Xt).add(we)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let et=(()=>{class en{ngZone;outsideAngular;insideAngular;constructor(de){this.ngZone=de,this.outsideAngular=de.runOutsideAngular(()=>new ze(Zone.current)),this.insideAngular=de.run(()=>new ze(Zone.current,Z.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(we){return new(we||en)(I.KVO(I.SKi))};static \u0275prov=I.jDH({token:en,factory:en.\u0275fac,providedIn:"root"})}return en})();function Fn(en){return function pn(en){return function(de){return(de=de.lift(new Te(en.ngZone))).pipe((0,Ke._)(en.outsideAngular),(0,qe.Q)(en.insideAngular))}}(function Qe(){const en=globalThis.\u0275AngularFireScheduler;if(!en)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return en}())(en)}},345:(Rt,Ue,U)=>{U.d(Ue,{Bb:()=>Dn,hE:()=>Ei,sG:()=>tn});var I=U(7705),Y=U(177);class oe extends Y.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class q extends oe{static makeCurrent(){(0,Y.ZD)(new q)}onAndCancel(z,k,H){return z.addEventListener(k,H),()=>{z.removeEventListener(k,H)}}dispatchEvent(z,k){z.dispatchEvent(k)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,k){return(k=k||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,k){return"window"===k?window:"document"===k?z:"body"===k?z.body:null}getBaseHref(z){const k=function le(){return fe=fe||document.querySelector("base"),fe?fe.getAttribute("href"):null}();return null==k?null:function je(Ge){_e=_e||document.createElement("a"),_e.setAttribute("href",Ge);const z=_e.pathname;return"/"===z.charAt(0)?z:`/${z}`}(k)}resetBaseElement(){fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,Y._b)(document.cookie,z)}}let _e,fe=null,J=(()=>{class Ge{build(){return new XMLHttpRequest}static{this.\u0275fac=function(H){return new(H||Ge)}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();const Z=new I.nKC("EventManagerPlugins");let pe=(()=>{class Ge{constructor(k,H){this._zone=H,this._eventNameToPlugin=new Map,k.forEach(ne=>{ne.manager=this}),this._plugins=k.slice().reverse()}addEventListener(k,H,ne){return this._findPluginFor(H).addEventListener(k,H,ne)}getZone(){return this._zone}_findPluginFor(k){let H=this._eventNameToPlugin.get(k);if(H)return H;if(H=this._plugins.find(ie=>ie.supports(k)),!H)throw new I.wOt(5101,!1);return this._eventNameToPlugin.set(k,H),H}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(Z),I.KVO(I.SKi))}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();class Ke{constructor(z){this._doc=z}}const qe="ng-app-id";let _t=(()=>{class Ge{constructor(k,H,ne,ie={}){this.doc=k,this.appId=H,this.nonce=ne,this.platformId=ie,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Y.Vy)(ie),this.resetHostNodes()}addStyles(k){for(const H of k)1===this.changeUsageCount(H,1)&&this.onStyleAdded(H)}removeStyles(k){for(const H of k)this.changeUsageCount(H,-1)<=0&&this.onStyleRemoved(H)}ngOnDestroy(){const k=this.styleNodesInDOM;k&&(k.forEach(H=>H.remove()),k.clear());for(const H of this.getAllStyles())this.onStyleRemoved(H);this.resetHostNodes()}addHost(k){this.hostNodes.add(k);for(const H of this.getAllStyles())this.addStyleToHost(k,H)}removeHost(k){this.hostNodes.delete(k)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(k){for(const H of this.hostNodes)this.addStyleToHost(H,k)}onStyleRemoved(k){const H=this.styleRef;H.get(k)?.elements?.forEach(ne=>ne.remove()),H.delete(k)}collectServerRenderedStyles(){const k=this.doc.head?.querySelectorAll(`style[${qe}="${this.appId}"]`);if(k?.length){const H=new Map;return k.forEach(ne=>{null!=ne.textContent&&H.set(ne.textContent,ne)}),H}return null}changeUsageCount(k,H){const ne=this.styleRef;if(ne.has(k)){const ie=ne.get(k);return ie.usage+=H,ie.usage}return ne.set(k,{usage:H,elements:[]}),H}getStyleElement(k,H){const ne=this.styleNodesInDOM,ie=ne?.get(H);if(ie?.parentNode===k)return ne.delete(H),ie.removeAttribute(qe),ie;{const Re=this.doc.createElement("style");return this.nonce&&Re.setAttribute("nonce",this.nonce),Re.textContent=H,this.platformIsServer&&Re.setAttribute(qe,this.appId),Re}}addStyleToHost(k,H){const ne=this.getStyleElement(k,H);k.appendChild(ne);const ie=this.styleRef,Re=ie.get(H)?.elements;Re?Re.push(ne):ie.set(H,{elements:[ne],usage:1})}resetHostNodes(){const k=this.hostNodes;k.clear(),k.add(this.doc.head)}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(Y.qQ),I.KVO(I.sZ2),I.KVO(I.BIS,8),I.KVO(I.Agw))}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yt=/%COMP%/g,ze=new I.nKC("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qe(Ge,z){return z.map(k=>k.replace(yt,Ge))}let ft=(()=>{class Ge{constructor(k,H,ne,ie,Re,ct,jt,vt=null){this.eventManager=k,this.sharedStylesHost=H,this.appId=ne,this.removeStylesOnCompDestroy=ie,this.doc=Re,this.platformId=ct,this.ngZone=jt,this.nonce=vt,this.rendererByCompId=new Map,this.platformIsServer=(0,Y.Vy)(ct),this.defaultRenderer=new xt(k,Re,jt,this.platformIsServer)}createRenderer(k,H){if(!k||!H)return this.defaultRenderer;this.platformIsServer&&H.encapsulation===I.gXe.ShadowDom&&(H={...H,encapsulation:I.gXe.Emulated});const ne=this.getOrCreateRenderer(k,H);return ne instanceof Jn?ne.applyToHost(k):ne instanceof lr&&ne.applyStyles(),ne}getOrCreateRenderer(k,H){const ne=this.rendererByCompId;let ie=ne.get(H.id);if(!ie){const Re=this.doc,ct=this.ngZone,jt=this.eventManager,vt=this.sharedStylesHost,pt=this.removeStylesOnCompDestroy,Un=this.platformIsServer;switch(H.encapsulation){case I.gXe.Emulated:ie=new Jn(jt,vt,H,this.appId,pt,Re,ct,Un);break;case I.gXe.ShadowDom:return new pn(jt,vt,k,H,Re,ct,this.nonce,Un);default:ie=new lr(jt,vt,H,pt,Re,ct,Un)}ne.set(H.id,ie)}return ie}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(pe),I.KVO(_t),I.KVO(I.sZ2),I.KVO(ze),I.KVO(Y.qQ),I.KVO(I.Agw),I.KVO(I.SKi),I.KVO(I.BIS))}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();class xt{constructor(z,k,H,ne){this.eventManager=z,this.doc=k,this.ngZone=H,this.platformIsServer=ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,k){return k?this.doc.createElementNS(it[k]||k,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,k){(Fn(z)?z.content:z).appendChild(k)}insertBefore(z,k,H){z&&(Fn(z)?z.content:z).insertBefore(k,H)}removeChild(z,k){z&&z.removeChild(k)}selectRootElement(z,k){let H="string"==typeof z?this.doc.querySelector(z):z;if(!H)throw new I.wOt(-5104,!1);return k||(H.textContent=""),H}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,k,H,ne){if(ne){k=ne+":"+k;const ie=it[ne];ie?z.setAttributeNS(ie,k,H):z.setAttribute(k,H)}else z.setAttribute(k,H)}removeAttribute(z,k,H){if(H){const ne=it[H];ne?z.removeAttributeNS(ne,k):z.removeAttribute(`${H}:${k}`)}else z.removeAttribute(k)}addClass(z,k){z.classList.add(k)}removeClass(z,k){z.classList.remove(k)}setStyle(z,k,H,ne){ne&(I.czy.DashCase|I.czy.Important)?z.style.setProperty(k,H,ne&I.czy.Important?"important":""):z.style[k]=H}removeStyle(z,k,H){H&I.czy.DashCase?z.style.removeProperty(k):z.style[k]=""}setProperty(z,k,H){z[k]=H}setValue(z,k){z.nodeValue=k}listen(z,k,H){if("string"==typeof z&&!(z=(0,Y.QT)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${k}`);return this.eventManager.addEventListener(z,k,this.decoratePreventDefault(H))}decoratePreventDefault(z){return k=>{if("__ngUnwrap__"===k)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(k)):z(k))&&k.preventDefault()}}}function Fn(Ge){return"TEMPLATE"===Ge.tagName&&void 0!==Ge.content}class pn extends xt{constructor(z,k,H,ne,ie,Re,ct,jt){super(z,ie,Re,jt),this.sharedStylesHost=k,this.hostEl=H,this.shadowRoot=H.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const vt=Qe(ne.id,ne.styles);for(const pt of vt){const Un=document.createElement("style");ct&&Un.setAttribute("nonce",ct),Un.textContent=pt,this.shadowRoot.appendChild(Un)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,k){return super.appendChild(this.nodeOrShadowRoot(z),k)}insertBefore(z,k,H){return super.insertBefore(this.nodeOrShadowRoot(z),k,H)}removeChild(z,k){return super.removeChild(this.nodeOrShadowRoot(z),k)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lr extends xt{constructor(z,k,H,ne,ie,Re,ct,jt){super(z,ie,Re,ct),this.sharedStylesHost=k,this.removeStylesOnCompDestroy=ne,this.styles=jt?Qe(jt,H.styles):H.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Jn extends lr{constructor(z,k,H,ne,ie,Re,ct,jt){const vt=ne+"-"+H.id;super(z,k,H,ie,Re,ct,jt,vt),this.contentAttr=function Te(Ge){return"_ngcontent-%COMP%".replace(yt,Ge)}(vt),this.hostAttr=function et(Ge){return"_nghost-%COMP%".replace(yt,Ge)}(vt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,k){const H=super.createElement(z,k);return super.setAttribute(H,this.contentAttr,""),H}}let en=(()=>{class Ge extends Ke{constructor(k){super(k)}supports(k){return!0}addEventListener(k,H,ne){return k.addEventListener(H,ne,!1),()=>this.removeEventListener(k,H,ne)}removeEventListener(k,H,ne){return k.removeEventListener(H,ne)}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();const Xt=["alt","control","meta","shift"],de={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},we={alt:Ge=>Ge.altKey,control:Ge=>Ge.ctrlKey,meta:Ge=>Ge.metaKey,shift:Ge=>Ge.shiftKey};let ke=(()=>{class Ge extends Ke{constructor(k){super(k)}supports(k){return null!=Ge.parseEventName(k)}addEventListener(k,H,ne){const ie=Ge.parseEventName(H),Re=Ge.eventCallback(ie.fullKey,ne,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Y.QT)().onAndCancel(k,ie.domEventName,Re))}static parseEventName(k){const H=k.toLowerCase().split("."),ne=H.shift();if(0===H.length||"keydown"!==ne&&"keyup"!==ne)return null;const ie=Ge._normalizeKey(H.pop());let Re="",ct=H.indexOf("code");if(ct>-1&&(H.splice(ct,1),Re="code."),Xt.forEach(vt=>{const pt=H.indexOf(vt);pt>-1&&(H.splice(pt,1),Re+=vt+".")}),Re+=ie,0!=H.length||0===ie.length)return null;const jt={};return jt.domEventName=ne,jt.fullKey=Re,jt}static matchEventFullKeyCode(k,H){let ne=de[k.key]||k.key,ie="";return H.indexOf("code.")>-1&&(ne=k.code,ie="code."),!(null==ne||!ne)&&(ne=ne.toLowerCase()," "===ne?ne="space":"."===ne&&(ne="dot"),Xt.forEach(Re=>{Re!==ne&&(0,we[Re])(k)&&(ie+=Re+".")}),ie+=ne,ie===H)}static eventCallback(k,H,ne){return ie=>{Ge.matchEventFullKeyCode(ie,k)&&ne.runGuarded(()=>H(ie))}}static _normalizeKey(k){return"esc"===k?"escape":k}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ge,factory:Ge.\u0275fac})}}return Ge})();const tn=(0,I.oH4)(I.fpN,"browser",[{provide:I.Agw,useValue:Y.AJ},{provide:I.PLl,useValue:function mt(){q.makeCurrent()},multi:!0},{provide:Y.qQ,useFactory:function Ut(){return(0,I.TL$)(document),document},deps:[]}]),$r=new I.nKC(""),gn=[{provide:I.e01,useClass:class Se{addToWindow(z){I.JZv.getAngularTestability=(H,ne=!0)=>{const ie=z.findTestabilityInTree(H,ne);if(null==ie)throw new I.wOt(5103,!1);return ie},I.JZv.getAllAngularTestabilities=()=>z.getAllTestabilities(),I.JZv.getAllAngularRootElements=()=>z.getAllRootElements(),I.JZv.frameworkStabilizers||(I.JZv.frameworkStabilizers=[]),I.JZv.frameworkStabilizers.push(H=>{const ne=I.JZv.getAllAngularTestabilities();let ie=ne.length,Re=!1;const ct=function(jt){Re=Re||jt,ie--,0==ie&&H(Re)};ne.forEach(jt=>{jt.whenStable(ct)})})}findTestabilityInTree(z,k,H){return null==k?null:z.getTestability(k)??(H?(0,Y.QT)().isShadowRoot(k)?this.findTestabilityInTree(z,k.host,!0):this.findTestabilityInTree(z,k.parentElement,!0):null)}},deps:[]},{provide:I.WHO,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]},{provide:I.NYb,useClass:I.NYb,deps:[I.SKi,I.giA,I.e01]}],ir=[{provide:I.H8p,useValue:"root"},{provide:I.zcH,useFactory:function mr(){return new I.zcH},deps:[]},{provide:Z,useClass:en,multi:!0,deps:[Y.qQ,I.SKi,I.Agw]},{provide:Z,useClass:ke,multi:!0,deps:[Y.qQ]},ft,_t,pe,{provide:I._9s,useExisting:ft},{provide:Y.N0,useClass:J,deps:[]},[]];let Dn=(()=>{class Ge{constructor(k){}static withServerTransition(k){return{ngModule:Ge,providers:[{provide:I.sZ2,useValue:k.appId}]}}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO($r,12))}}static{this.\u0275mod=I.$C({type:Ge})}static{this.\u0275inj=I.G2t({providers:[...ir,...gn],imports:[Y.MD,I.Hbi]})}}return Ge})(),Ei=(()=>{class Ge{constructor(k){this._doc=k}getTitle(){return this._doc.title}setTitle(k){this._doc.title=k||""}static{this.\u0275fac=function(H){return new(H||Ge)(I.KVO(Y.qQ))}}static{this.\u0275prov=I.jDH({token:Ge,factory:function(H){let ne=null;return ne=H?new H:function Nr(){return new Ei((0,I.KVO)(Y.qQ))}(),ne},providedIn:"root"})}}return Ge})();typeof window<"u"&&window},7841:(Rt,Ue,U)=>{U.d(Ue,{iI:()=>$n,n3:()=>cs});var I=U(7705),Y=U(1985),oe=U(8071),fe=U(8455),le=U(7673),_e=U(4412),je=U(3073),Se=U(3669),J=U(6450),Z=U(3794),pe=U(8496),Ke=U(4360),qe=U(5225);function _t(...E){const D=(0,Z.lI)(E),v=(0,Z.ms)(E),{args:S,keys:N}=(0,je.D)(E);if(0===S.length)return(0,fe.H)([],D);const G=new Y.c(function it(E,D,v=Se.D){return S=>{yt(D,()=>{const{length:N}=E,G=new Array(N);let X=N,Fe=N;for(let Pe=0;Pe<N;Pe++)yt(D,()=>{const Dt=(0,fe.H)(E[Pe],D);let un=!1;Dt.subscribe((0,Ke._)(S,In=>{G[Pe]=In,un||(un=!0,Fe--),Fe||S.next(v(G.slice()))},()=>{--X||S.complete()}))},S)},S)}}(S,D,N?X=>(0,pe.e)(N,X):Se.D));return v?G.pipe((0,J.I)(v)):G}function yt(E,D,v){E?(0,qe.N)(v,E,D):D()}var lt=U(9350),Bt=U(8793),Ft=U(8750);function Ae(E){return new Y.c(D=>{(0,Ft.Tg)(E()).subscribe(D)})}var ze=U(1203);function Te(E,D){const v=(0,oe.T)(E)?E:()=>E,S=N=>N.error(v());return new Y.c(D?N=>D.schedule(S,0,N):S)}var et=U(983),Qe=U(8359),ft=U(9974);function xt(){return(0,ft.N)((E,D)=>{let v=null;E._refCount++;const S=(0,Ke._)(D,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(v=null);const N=E._connection,G=v;v=null,N&&(!G||N===G)&&N.unsubscribe(),D.unsubscribe()});E.subscribe(S),S.closed||(v=E.connect())})}class Be extends Y.c{constructor(D,v){super(),this.source=D,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,ft.S)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,D?.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Qe.yU;const v=this.getSubject();D.add(this.source.subscribe((0,Ke._)(v,void 0,()=>{this._teardown(),v.complete()},S=>{this._teardown(),v.error(S)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Qe.yU.EMPTY)}return D}refCount(){return xt()(this)}}var Zt=U(1413),Fn=U(177),pn=U(6354),lr=U(5558),Jn=U(6697),en=U(9172),Xt=U(5964),de=U(1397),we=U(1594);function ke(E,D){return(0,oe.T)(D)?(0,de.Z)(E,D,1):(0,de.Z)(E,1)}var Ne=U(8141);function tt(E){return(0,ft.N)((D,v)=>{let G,S=null,N=!1;S=D.subscribe((0,Ke._)(v,void 0,void 0,X=>{G=(0,Ft.Tg)(E(X,tt(E)(D))),S?(S.unsubscribe(),S=null,G.subscribe(v)):N=!0})),N&&(S.unsubscribe(),S=null,G.subscribe(v))})}var Ye=U(2816),ae=U(9901);function mt(E){return E<=0?()=>et.w:(0,ft.N)((D,v)=>{let S=[];D.subscribe((0,Ke._)(v,N=>{S.push(N),E<S.length&&S.shift()},()=>{for(const N of S)v.next(N);v.complete()},void 0,()=>{S=null}))})}var mr=U(3774);function tn(E){return(0,ft.N)((D,v)=>{try{D.subscribe(v)}finally{v.add(E)}})}var $r=U(5343),ir=U(6365),Dn=U(345);const Nt="primary",Er=Symbol("RouteTitle");class ss{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v[0]:v}return null}getAll(D){if(this.has(D)){const v=this.params[D];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Nr(E){return new ss(E)}function Ei(E,D,v){const S=v.path.split("/");if(S.length>E.length||"full"===v.pathMatch&&(D.hasChildren()||S.length<E.length))return null;const N={};for(let G=0;G<S.length;G++){const X=S[G],Fe=E[G];if(X.startsWith(":"))N[X.substring(1)]=Fe;else if(X!==Fe.path)return null}return{consumed:E.slice(0,S.length),posParams:N}}function Zn(E,D){const v=E?Object.keys(E):void 0,S=D?Object.keys(D):void 0;if(!v||!S||v.length!=S.length)return!1;let N;for(let G=0;G<v.length;G++)if(N=v[G],!qt(E[N],D[N]))return!1;return!0}function qt(E,D){if(Array.isArray(E)&&Array.isArray(D)){if(E.length!==D.length)return!1;const v=[...E].sort(),S=[...D].sort();return v.every((N,G)=>S[G]===N)}return E===D}function hn(E){return E.length>0?E[E.length-1]:null}function Kt(E){return function q(E){return!!E&&(E instanceof Y.c||(0,oe.T)(E.lift)&&(0,oe.T)(E.subscribe))}(E)?E:(0,I.jNT)(E)?(0,fe.H)(Promise.resolve(E)):(0,le.of)(E)}const pr={exact:function yr(E,D,v){if(!at(E.segments,D.segments)||!Wt(E.segments,D.segments,v)||E.numberOfChildren!==D.numberOfChildren)return!1;for(const S in D.children)if(!E.children[S]||!yr(E.children[S],D.children[S],v))return!1;return!0},subset:Ce},Sn={exact:function dn(E,D){return Zn(E,D)},subset:function So(E,D){return Object.keys(D).length<=Object.keys(E).length&&Object.keys(D).every(v=>qt(E[v],D[v]))},ignored:()=>!0};function or(E,D,v){return pr[v.paths](E.root,D.root,v.matrixParams)&&Sn[v.queryParams](E.queryParams,D.queryParams)&&!("exact"===v.fragment&&E.fragment!==D.fragment)}function Ce(E,D,v){return zn(E,D,D.segments,v)}function zn(E,D,v,S){if(E.segments.length>v.length){const N=E.segments.slice(0,v.length);return!(!at(N,v)||D.hasChildren()||!Wt(N,v,S))}if(E.segments.length===v.length){if(!at(E.segments,v)||!Wt(E.segments,v,S))return!1;for(const N in D.children)if(!E.children[N]||!Ce(E.children[N],D.children[N],S))return!1;return!0}{const N=v.slice(0,E.segments.length),G=v.slice(E.segments.length);return!!(at(E.segments,N)&&Wt(E.segments,N,S)&&E.children[Nt])&&zn(E.children[Nt],D,G,S)}}function Wt(E,D,v){return D.every((S,N)=>Sn[v](E[N].parameters,S.parameters))}class ii{constructor(D=new rt([],{}),v={},S=null){this.root=D,this.queryParams=v,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return os.serialize(this)}}class rt{constructor(D,v){this.segments=D,this.children=v,this.parent=null,Object.values(v).forEach(S=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return si(this)}}class St{constructor(D,v){this.path=D,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Nr(this.parameters)),this._parameterMap}toString(){return ne(this)}}function at(E,D){return E.length===D.length&&E.every((v,S)=>v.path===D[S].path)}let Xe=(()=>{class E{static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return new Yn},providedIn:"root"})}}return E})();class Yn{parse(D){const v=new It(D);return new ii(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(D){const v=`/${Ti(D.root,!0)}`,S=function Re(E){const D=Object.keys(E).map(v=>{const S=E[v];return Array.isArray(S)?S.map(N=>`${Hi(v)}=${Hi(N)}`).join("&"):`${Hi(v)}=${Hi(S)}`}).filter(v=>!!v);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${v}${S}${"string"==typeof D.fragment?`#${function Ge(E){return encodeURI(E)}(D.fragment)}`:""}`}}const os=new Yn;function si(E){return E.segments.map(D=>ne(D)).join("/")}function Ti(E,D){if(!E.hasChildren())return si(E);if(D){const v=E.children[Nt]?Ti(E.children[Nt],!1):"",S=[];return Object.entries(E.children).forEach(([N,G])=>{N!==Nt&&S.push(`${N}:${Ti(G,!1)}`)}),S.length>0?`${v}(${S.join("//")})`:v}{const v=function xe(E,D){let v=[];return Object.entries(E.children).forEach(([S,N])=>{S===Nt&&(v=v.concat(D(N,S)))}),Object.entries(E.children).forEach(([S,N])=>{S!==Nt&&(v=v.concat(D(N,S)))}),v}(E,(S,N)=>N===Nt?[Ti(E.children[Nt],!1)]:[`${N}:${Ti(S,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Nt]?`${si(E)}/${v[0]}`:`${si(E)}/(${v.join("//")})`}}function $i(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hi(E){return $i(E).replace(/%3B/gi,";")}function z(E){return $i(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function k(E){return decodeURIComponent(E)}function H(E){return k(E.replace(/\+/g,"%20"))}function ne(E){return`${z(E.path)}${function ie(E){return Object.keys(E).map(D=>`;${z(D)}=${z(E[D])}`).join("")}(E.parameters)}`}const ct=/^[^\/()?;#]+/;function jt(E){const D=E.match(ct);return D?D[0]:""}const vt=/^[^\/()?;=#]+/,Un=/^[^=?&#]+/,oi=/^[^&#]+/;class It{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(D.length>0||Object.keys(v).length>0)&&(S[Nt]=new rt(D,v)),S}parseSegment(){const D=jt(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new I.wOt(4009,!1);return this.capture(D),new St(k(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const v=function pt(E){const D=E.match(vt);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const N=jt(this.remaining);N&&(S=N,this.capture(S))}D[k(v)]=k(S)}parseQueryParam(D){const v=function wt(E){const D=E.match(Un);return D?D[0]:""}(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const X=function kn(E){const D=E.match(oi);return D?D[0]:""}(this.remaining);X&&(S=X,this.capture(S))}const N=H(v),G=H(S);if(D.hasOwnProperty(N)){let X=D[N];Array.isArray(X)||(X=[X],D[N]=X),X.push(G)}else D[N]=G}parseParens(D){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=jt(this.remaining),N=this.remaining[S.length];if("/"!==N&&")"!==N&&";"!==N)throw new I.wOt(4010,!1);let G;S.indexOf(":")>-1?(G=S.slice(0,S.indexOf(":")),this.capture(G),this.capture(":")):D&&(G=Nt);const X=this.parseChildren();v[G]=1===Object.keys(X).length?X[Nt]:new rt([],X),this.consumeOptional("//")}return v}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new I.wOt(4011,!1)}}function Cr(E){return E.segments.length>0?new rt([],{[Nt]:E}):E}function ui(E){const D={};for(const S of Object.keys(E.children)){const G=ui(E.children[S]);if(S===Nt&&0===G.segments.length&&G.hasChildren())for(const[X,Fe]of Object.entries(G.children))D[X]=Fe;else(G.segments.length>0||G.hasChildren())&&(D[S]=G)}return function Hr(E){if(1===E.numberOfChildren&&E.children[Nt]){const D=E.children[Nt];return new rt(E.segments.concat(D.segments),D.children)}return E}(new rt(E.segments,D))}function xr(E){return E instanceof ii}function as(E){let D;const N=Cr(function v(G){const X={};for(const Pe of G.children){const Dt=v(Pe);X[Pe.outlet]=Dt}const Fe=new rt(G.url,X);return G===E&&(D=Fe),Fe}(E.root));return D??N}function Le(E,D,v,S){let N=E;for(;N.parent;)N=N.parent;if(0===D.length)return ht(N,N,N,v,S);const G=function fn(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new nn(!0,0,E);let D=0,v=!1;const S=E.reduce((N,G,X)=>{if("object"==typeof G&&null!=G){if(G.outlets){const Fe={};return Object.entries(G.outlets).forEach(([Pe,Dt])=>{Fe[Pe]="string"==typeof Dt?Dt.split("/"):Dt}),[...N,{outlets:Fe}]}if(G.segmentPath)return[...N,G.segmentPath]}return"string"!=typeof G?[...N,G]:0===X?(G.split("/").forEach((Fe,Pe)=>{0==Pe&&"."===Fe||(0==Pe&&""===Fe?v=!0:".."===Fe?D++:""!=Fe&&N.push(Fe))}),N):[...N,G]},[]);return new nn(v,D,S)}(D);if(G.toRoot())return ht(N,N,new rt([],{}),v,S);const X=function er(E,D,v){if(E.isAbsolute)return new Cn(D,!0,0);if(!v)return new Cn(D,!1,NaN);if(null===v.parent)return new Cn(v,!0,0);const S=Ie(E.commands[0])?0:1;return function me(E,D,v){let S=E,N=D,G=v;for(;G>N;){if(G-=N,S=S.parent,!S)throw new I.wOt(4005,!1);N=S.segments.length}return new Cn(S,!1,N-G)}(v,v.segments.length-1+S,E.numberOfDoubleDots)}(G,N,E),Fe=X.processChildren?zi(X.segmentGroup,X.index,G.commands):Xr(X.segmentGroup,X.index,G.commands);return ht(N,X.segmentGroup,Fe,v,S)}function Ie(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function We(E){return"object"==typeof E&&null!=E&&E.outlets}function ht(E,D,v,S,N){let X,G={};S&&Object.entries(S).forEach(([Pe,Dt])=>{G[Pe]=Array.isArray(Dt)?Dt.map(un=>`${un}`):`${Dt}`}),X=E===D?v:$t(E,D,v);const Fe=Cr(ui(X));return new ii(Fe,G,N)}function $t(E,D,v){const S={};return Object.entries(E.children).forEach(([N,G])=>{S[N]=G===D?v:$t(G,D,v)}),new rt(E.segments,S)}class nn{constructor(D,v,S){if(this.isAbsolute=D,this.numberOfDoubleDots=v,this.commands=S,D&&S.length>0&&Ie(S[0]))throw new I.wOt(4003,!1);const N=S.find(We);if(N&&N!==hn(S))throw new I.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cn{constructor(D,v,S){this.segmentGroup=D,this.processChildren=v,this.index=S}}function Xr(E,D,v){if(E||(E=new rt([],{})),0===E.segments.length&&E.hasChildren())return zi(E,D,v);const S=function yc(E,D,v){let S=0,N=D;const G={match:!1,pathIndex:0,commandIndex:0};for(;N<E.segments.length;){if(S>=v.length)return G;const X=E.segments[N],Fe=v[S];if(We(Fe))break;const Pe=`${Fe}`,Dt=S<v.length-1?v[S+1]:null;if(N>0&&void 0===Pe)break;if(Pe&&Dt&&"object"==typeof Dt&&void 0===Dt.outlets){if(!Sr(Pe,Dt,X))return G;S+=2}else{if(!Sr(Pe,{},X))return G;S++}N++}return{match:!0,pathIndex:N,commandIndex:S}}(E,D,v),N=v.slice(S.commandIndex);if(S.match&&S.pathIndex<E.segments.length){const G=new rt(E.segments.slice(0,S.pathIndex),{});return G.children[Nt]=new rt(E.segments.slice(S.pathIndex),E.children),zi(G,0,N)}return S.match&&0===N.length?new rt(E.segments,{}):S.match&&!E.hasChildren()?Gi(E,D,v):S.match?zi(E,0,N):Gi(E,D,v)}function zi(E,D,v){if(0===v.length)return new rt(E.segments,{});{const S=function vn(E){return We(E[0])?E[0].outlets:{[Nt]:E}}(v),N={};if(Object.keys(S).some(G=>G!==Nt)&&E.children[Nt]&&1===E.numberOfChildren&&0===E.children[Nt].segments.length){const G=zi(E.children[Nt],D,v);return new rt(E.segments,G.children)}return Object.entries(S).forEach(([G,X])=>{"string"==typeof X&&(X=[X]),null!==X&&(N[G]=Xr(E.children[G],D,X))}),Object.entries(E.children).forEach(([G,X])=>{void 0===S[G]&&(N[G]=X)}),new rt(E.segments,N)}}function Gi(E,D,v){const S=E.segments.slice(0,D);let N=0;for(;N<v.length;){const G=v[N];if(We(G)){const Pe=us(G.outlets);return new rt(S,Pe)}if(0===N&&Ie(v[0])){S.push(new St(E.segments[D].path,ia(v[0]))),N++;continue}const X=We(G)?G.outlets[Nt]:`${G}`,Fe=N<v.length-1?v[N+1]:null;X&&Fe&&Ie(Fe)?(S.push(new St(X,ia(Fe))),N+=2):(S.push(new St(X,{})),N++)}return new rt(S,{})}function us(E){const D={};return Object.entries(E).forEach(([v,S])=>{"string"==typeof S&&(S=[S]),null!==S&&(D[v]=Gi(new rt([],{}),0,S))}),D}function ia(E){const D={};return Object.entries(E).forEach(([v,S])=>D[v]=`${S}`),D}function Sr(E,D,v){return E==v.path&&Zn(D,v.parameters)}const Ns="imperative";class _i{constructor(D,v){this.id=D,this.url=v}}class ja extends _i{constructor(D,v,S="imperative",N=null){super(D,v),this.type=0,this.navigationTrigger=S,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Wi extends _i{constructor(D,v,S){super(D,v),this.urlAfterRedirects=S,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zr extends _i{constructor(D,v,S,N){super(D,v),this.reason=S,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pi extends _i{constructor(D,v,S,N){super(D,v),this.reason=S,this.code=N,this.type=16}}class wi extends _i{constructor(D,v,S,N){super(D,v),this.error=S,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sa extends _i{constructor(D,v,S,N){super(D,v),this.urlAfterRedirects=S,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends _i{constructor(D,v,S,N){super(D,v),this.urlAfterRedirects=S,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $a extends _i{constructor(D,v,S,N,G){super(D,v),this.urlAfterRedirects=S,this.state=N,this.shouldActivate=G,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ha extends _i{constructor(D,v,S,N){super(D,v),this.urlAfterRedirects=S,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends _i{constructor(D,v,S,N){super(D,v),this.urlAfterRedirects=S,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class za{constructor(D){this.route=D,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bo{constructor(D){this.route=D,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oa{constructor(D){this.snapshot=D,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pu{constructor(D){this.snapshot=D,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mu{constructor(D){this.snapshot=D,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(D){this.snapshot=D,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aa{constructor(D,v,S){this.routerEvent=D,this.position=v,this.anchor=S,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class wn{}class Or{constructor(D){this.url=D}}class to{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kr,this.attachRef=null}}let kr=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(v,S){const N=this.getOrCreateContext(v);N.outlet=S,this.contexts.set(v,N)}onChildOutletDestroyed(v){const S=this.getContext(v);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let S=this.getContext(v);return S||(S=new to,this.contexts.set(v,S)),S}getContext(v){return this.contexts.get(v)||null}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();class Ga{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const v=this.pathFromRoot(D);return v.length>1?v[v.length-2]:null}children(D){const v=no(D,this._root);return v?v.children.map(S=>S.value):[]}firstChild(D){const v=no(D,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(D){const v=ro(D,this._root);return v.length<2?[]:v[v.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return ro(D,this._root).map(v=>v.value)}}function no(E,D){if(E===D.value)return D;for(const v of D.children){const S=no(E,v);if(S)return S}return null}function ro(E,D){if(E===D.value)return[D];for(const v of D.children){const S=ro(E,v);if(S.length)return S.unshift(D),S}return[]}class Mi{constructor(D,v){this.value=D,this.children=v}toString(){return`TreeNode(${this.value})`}}function qi(E){const D={};return E&&E.children.forEach(v=>D[v.value.outlet]=v),D}class dr extends Ga{constructor(D,v){super(D),this.snapshot=v,tr(this,D)}toString(){return this.snapshot.toString()}}function At(E,D){const v=function cn(E,D){const X=new br([],{},{},"",{},Nt,D,null,{});return new Os("",new Mi(X,[]))}(0,D),S=new _e.t([new St("",{})]),N=new _e.t({}),G=new _e.t({}),X=new _e.t({}),Fe=new _e.t(""),Pe=new Bn(S,N,X,Fe,G,Nt,D,v.root);return Pe.snapshot=v.root,new dr(new Mi(Pe,[]),v)}class Bn{constructor(D,v,S,N,G,X,Fe,Pe){this.urlSubject=D,this.paramsSubject=v,this.queryParamsSubject=S,this.fragmentSubject=N,this.dataSubject=G,this.outlet=X,this.component=Fe,this._futureSnapshot=Pe,this.title=this.dataSubject?.pipe((0,pn.T)(Dt=>Dt[Er]))??(0,le.of)(void 0),this.url=D,this.params=v,this.queryParams=S,this.fragment=N,this.data=G}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.T)(D=>Nr(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.T)(D=>Nr(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gr(E,D="emptyOnly"){const v=E.pathFromRoot;let S=0;if("always"!==D)for(S=v.length-1;S>=1;){const N=v[S],G=v[S-1];if(N.routeConfig&&""===N.routeConfig.path)S--;else{if(G.component)break;S--}}return function io(E){return E.reduce((D,v)=>({params:{...D.params,...v.params},data:{...D.data,...v.data},resolve:{...v.data,...D.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(S))}class br{get title(){return this.data?.[Er]}constructor(D,v,S,N,G,X,Fe,Pe,Dt){this.url=D,this.params=v,this.queryParams=S,this.fragment=N,this.data=G,this.outlet=X,this.component=Fe,this.routeConfig=Pe,this._resolve=Dt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Os extends Ga{constructor(D,v){super(v),this.url=D,tr(this,v)}toString(){return sr(this._root)}}function tr(E,D){D.value._routerState=E,D.children.forEach(v=>tr(E,v))}function sr(E){const D=E.children.length>0?` { ${E.children.map(sr).join(", ")} } `:"";return`${E.value}${D}`}function Ni(E){if(E.snapshot){const D=E.snapshot,v=E._futureSnapshot;E.snapshot=v,Zn(D.queryParams,v.queryParams)||E.queryParamsSubject.next(v.queryParams),D.fragment!==v.fragment&&E.fragmentSubject.next(v.fragment),Zn(D.params,v.params)||E.paramsSubject.next(v.params),function Vr(E,D){if(E.length!==D.length)return!1;for(let v=0;v<E.length;++v)if(!Zn(E[v],D[v]))return!1;return!0}(D.url,v.url)||E.urlSubject.next(v.url),Zn(D.data,v.data)||E.dataSubject.next(v.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function Gt(E,D){const v=Zn(E.params,D.params)&&function ji(E,D){return at(E,D)&&E.every((v,S)=>Zn(v.parameters,D[S].parameters))}(E.url,D.url);return v&&!(!E.parent!=!D.parent)&&(!E.parent||Gt(E.parent,D.parent))}let cs=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Nt,this.activateEvents=new I.bkB,this.deactivateEvents=new I.bkB,this.attachEvents=new I.bkB,this.detachEvents=new I.bkB,this.parentContexts=(0,I.WQX)(kr),this.location=(0,I.WQX)(I.c1b),this.changeDetector=(0,I.WQX)(I.gRc),this.environmentInjector=(0,I.WQX)(I.uvJ),this.inputBinder=(0,I.WQX)(mn,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:S,previousValue:N}=v.name;if(S)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I.wOt(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,S){this.activated=v,this._activatedRoute=S,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,S){if(this.isActivated)throw new I.wOt(4013,!1);this._activatedRoute=v;const N=this.location,X=v.snapshot.component,Fe=this.parentContexts.getOrCreateContext(this.name).children,Pe=new ks(v,Fe,N.injector);this.activated=N.createComponent(X,{index:N.length,injector:Pe,environmentInjector:S??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275dir=I.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[I.OA$]})}}return E})();class ks{constructor(D,v,S){this.route=D,this.childContexts=v,this.parent=S}get(D,v){return D===Bn?this.route:D===kr?this.childContexts:this.parent.get(D,v)}}const mn=new I.nKC("");let ur=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:S}=v,N=_t([S.queryParams,S.params,S.data]).pipe((0,lr.n)(([G,X,Fe],Pe)=>(Fe={...G,...X,...Fe},0===Pe?(0,le.of)(Fe):Promise.resolve(Fe)))).subscribe(G=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==S||null===S.component)return void this.unsubscribeFromRouteData(v);const X=(0,I.HJs)(S.component);if(X)for(const{templateName:Fe}of X.inputs)v.activatedComponentRef.setInput(Fe,G[Fe]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,N)}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function sn(E,D,v){if(v&&E.shouldReuseRoute(D.value,v.value.snapshot)){const S=v.value;S._futureSnapshot=D.value;const N=function xi(E,D,v){return D.children.map(S=>{for(const N of v.children)if(E.shouldReuseRoute(S.value,N.value.snapshot))return sn(E,S,N);return sn(E,S)})}(E,D,v);return new Mi(S,N)}{if(E.shouldAttach(D.value)){const G=E.retrieve(D.value);if(null!==G){const X=G.route;return X.value._futureSnapshot=D.value,X.children=D.children.map(Fe=>sn(E,Fe)),X}}const S=function Ai(E){return new Bn(new _e.t(E.url),new _e.t(E.params),new _e.t(E.queryParams),new _e.t(E.fragment),new _e.t(E.data),E.outlet,E.component,E)}(D.value),N=D.children.map(G=>sn(E,G));return new Mi(S,N)}}const Zr="ngNavigationCancelingError";function Di(E,D){const{redirectTo:v,navigationBehaviorOptions:S}=xr(D)?{redirectTo:D,navigationBehaviorOptions:void 0}:D,N=ls(!1,0,D);return N.url=v,N.navigationBehaviorOptions=S,N}function ls(E,D,v){const S=new Error("NavigationCancelingError: "+(E||""));return S[Zr]=!0,S.cancellationCode=D,v&&(S.url=v),S}function Ro(E){return E&&E[Zr]}let on=(()=>{class E{static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275cmp=I.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[I.aNF],decls:1,vars:0,template:function(S,N){1&S&&I.nrm(0,"router-outlet")},dependencies:[cs],encapsulation:2})}}return E})();function nr(E){const D=E.children&&E.children.map(nr),v=D?{...E,children:D}:{...E};return!v.component&&!v.loadComponent&&(D||v.loadChildren)&&v.outlet&&v.outlet!==Nt&&(v.component=on),v}function bn(E){return E.outlet||Nt}function Fr(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let D=E.parent;D;D=D.parent){const v=D.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Es{constructor(D,v,S,N,G){this.routeReuseStrategy=D,this.futureState=v,this.currState=S,this.forwardEvent=N,this.inputBindingEnabled=G}activate(D){const v=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,S,D),Ni(this.futureState.root),this.activateChildRoutes(v,S,D)}deactivateChildRoutes(D,v,S){const N=qi(v);D.children.forEach(G=>{const X=G.value.outlet;this.deactivateRoutes(G,N[X],S),delete N[X]}),Object.values(N).forEach(G=>{this.deactivateRouteAndItsChildren(G,S)})}deactivateRoutes(D,v,S){const N=D.value,G=v?v.value:null;if(N===G)if(N.component){const X=S.getContext(N.outlet);X&&this.deactivateChildRoutes(D,v,X.children)}else this.deactivateChildRoutes(D,v,S);else G&&this.deactivateRouteAndItsChildren(v,S)}deactivateRouteAndItsChildren(D,v){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,v):this.deactivateRouteAndOutlet(D,v)}detachAndStoreRouteSubtree(D,v){const S=v.getContext(D.value.outlet),N=S&&D.value.component?S.children:v,G=qi(D);for(const X of Object.keys(G))this.deactivateRouteAndItsChildren(G[X],N);if(S&&S.outlet){const X=S.outlet.detach(),Fe=S.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:X,route:D,contexts:Fe})}}deactivateRouteAndOutlet(D,v){const S=v.getContext(D.value.outlet),N=S&&D.value.component?S.children:v,G=qi(D);for(const X of Object.keys(G))this.deactivateRouteAndItsChildren(G[X],N);S&&(S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated()),S.attachRef=null,S.route=null)}activateChildRoutes(D,v,S){const N=qi(v);D.children.forEach(G=>{this.activateRoutes(G,N[G.value.outlet],S),this.forwardEvent(new xs(G.value.snapshot))}),D.children.length&&this.forwardEvent(new Pu(D.value.snapshot))}activateRoutes(D,v,S){const N=D.value,G=v?v.value:null;if(Ni(N),N===G)if(N.component){const X=S.getOrCreateContext(N.outlet);this.activateChildRoutes(D,v,X.children)}else this.activateChildRoutes(D,v,S);else if(N.component){const X=S.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Fe=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),X.children.onOutletReAttached(Fe.contexts),X.attachRef=Fe.componentRef,X.route=Fe.route.value,X.outlet&&X.outlet.attach(Fe.componentRef,Fe.route.value),Ni(Fe.route.value),this.activateChildRoutes(D,null,X.children)}else{const Fe=Fr(N.snapshot);X.attachRef=null,X.route=N,X.injector=Fe,X.outlet&&X.outlet.activateWith(N,X.injector),this.activateChildRoutes(D,null,X.children)}}else this.activateChildRoutes(D,null,S)}}class Fs{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class Us{constructor(D,v){this.component=D,this.route=v}}function so(E,D,v){const S=E._root;return oo(S,D?D._root:null,v,[S.value])}function Tr(E,D){const v=Symbol(),S=D.get(E,v);return S===v?"function"!=typeof E||(0,I.LfX)(E)?D.get(E):E:S}function oo(E,D,v,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=qi(D);return E.children.forEach(X=>{(function Pl(E,D,v,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const G=E.value,X=D?D.value:null,Fe=v?v.getContext(E.value.outlet):null;if(X&&G.routeConfig===X.routeConfig){const Pe=function ua(E,D,v){if("function"==typeof v)return v(E,D);switch(v){case"pathParamsChange":return!at(E.url,D.url);case"pathParamsOrQueryParamsChange":return!at(E.url,D.url)||!Zn(E.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gt(E,D)||!Zn(E.queryParams,D.queryParams);default:return!Gt(E,D)}}(X,G,G.routeConfig.runGuardsAndResolvers);Pe?N.canActivateChecks.push(new Fs(S)):(G.data=X.data,G._resolvedData=X._resolvedData),oo(E,D,G.component?Fe?Fe.children:null:v,S,N),Pe&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&N.canDeactivateChecks.push(new Us(Fe.outlet.component,X))}else X&&Wn(D,Fe,N),N.canActivateChecks.push(new Fs(S)),oo(E,null,G.component?Fe?Fe.children:null:v,S,N)})(X,G[X.value.outlet],v,S.concat([X.value]),N),delete G[X.value.outlet]}),Object.entries(G).forEach(([X,Fe])=>Wn(Fe,v.getContext(X),N)),N}function Wn(E,D,v){const S=qi(E),N=E.value;Object.entries(S).forEach(([G,X])=>{Wn(X,N.component?D?D.children.getContext(G):null:D,v)}),v.canDeactivateChecks.push(new Us(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}function Ts(E){return"function"==typeof E}function rr(E){return E instanceof lt.G||"EmptyError"===E?.name}const Yi=Symbol("INITIAL_VALUE");function ds(){return(0,lr.n)(E=>_t(E.map(D=>D.pipe((0,Jn.s)(1),(0,en.Z)(Yi)))).pipe((0,pn.T)(D=>{for(const v of D)if(!0!==v){if(v===Yi)return Yi;if(!1===v||v instanceof ii)return v}return!0}),(0,Xt.p)(D=>D!==Yi),(0,Jn.s)(1)))}function No(E){return(0,ze.F)((0,Ne.M)(D=>{if(xr(D))throw Di(0,D)}),(0,pn.T)(D=>!0===D))}class hs{constructor(D){this.segmentGroup=D||null}}class ao{constructor(D){this.urlTree=D}}function Ji(E){return Te(new hs(E))}function xo(E){return Te(new ao(E))}class da{constructor(D,v){this.urlSerializer=D,this.urlTree=v}noMatchError(D){return new I.wOt(4002,!1)}lineralizeSegments(D,v){let S=[],N=v.root;for(;;){if(S=S.concat(N.segments),0===N.numberOfChildren)return(0,le.of)(S);if(N.numberOfChildren>1||!N.children[Nt])return Te(new I.wOt(4e3,!1));N=N.children[Nt]}}applyRedirectCommands(D,v,S){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),D,S)}applyRedirectCreateUrlTree(D,v,S,N){const G=this.createSegmentGroup(D,v.root,S,N);return new ii(G,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(D,v){const S={};return Object.entries(D).forEach(([N,G])=>{if("string"==typeof G&&G.startsWith(":")){const Fe=G.substring(1);S[N]=v[Fe]}else S[N]=G}),S}createSegmentGroup(D,v,S,N){const G=this.createSegments(D,v.segments,S,N);let X={};return Object.entries(v.children).forEach(([Fe,Pe])=>{X[Fe]=this.createSegmentGroup(D,Pe,S,N)}),new rt(G,X)}createSegments(D,v,S,N){return v.map(G=>G.path.startsWith(":")?this.findPosParam(D,G,N):this.findOrReturn(G,S))}findPosParam(D,v,S){const N=S[v.path.substring(1)];if(!N)throw new I.wOt(4001,!1);return N}findOrReturn(D,v){let S=0;for(const N of v){if(N.path===D.path)return v.splice(S),N;S++}return D}}const Ya={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uo(E,D,v,S,N){const G=js(E,D,v);return G.matched?(S=function hr(E,D){return E.providers&&!E._injector&&(E._injector=(0,I.Ol2)(E.providers,D,`Route: ${E.path}`)),E._injector??D}(D,S),function ws(E,D,v,S){const N=D.canMatch;if(!N||0===N.length)return(0,le.of)(!0);const G=N.map(X=>{const Fe=Tr(X,E);return Kt(function Ka(E){return E&&Ts(E.canMatch)}(Fe)?Fe.canMatch(D,v):E.runInContext(()=>Fe(D,v)))});return(0,le.of)(G).pipe(ds(),No())}(S,D,v).pipe((0,pn.T)(X=>!0===X?G:{...Ya}))):(0,le.of)(G)}function js(E,D,v){if(""===D.path)return"full"===D.pathMatch&&(E.hasChildren()||v.length>0)?{...Ya}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const N=(D.matcher||Ei)(v,E,D);if(!N)return{...Ya};const G={};Object.entries(N.posParams??{}).forEach(([Fe,Pe])=>{G[Fe]=Pe.path});const X=N.consumed.length>0?{...G,...N.consumed[N.consumed.length-1].parameters}:G;return{matched:!0,consumedSegments:N.consumed,remainingSegments:v.slice(N.consumed.length),parameters:X,positionalParamSegments:N.posParams??{}}}function As(E,D,v,S){return v.length>0&&function Oo(E,D,v){return v.some(S=>co(E,D,S)&&bn(S)!==Nt)}(E,v,S)?{segmentGroup:new rt(D,ha(S,new rt(v,E.children))),slicedSegments:[]}:0===v.length&&function ko(E,D,v){return v.some(S=>co(E,D,S))}(E,v,S)?{segmentGroup:new rt(E.segments,Xa(E,0,v,S,E.children)),slicedSegments:v}:{segmentGroup:new rt(E.segments,E.children),slicedSegments:v}}function Xa(E,D,v,S,N){const G={};for(const X of S)if(co(E,v,X)&&!N[bn(X)]){const Fe=new rt([],{});G[bn(X)]=Fe}return{...N,...G}}function ha(E,D){const v={};v[Nt]=D;for(const S of E)if(""===S.path&&bn(S)!==Nt){const N=new rt([],{});v[bn(S)]=N}return v}function co(E,D,v){return(!(E.hasChildren()||D.length>0)||"full"!==v.pathMatch)&&""===v.path}class Si{constructor(D,v,S,N,G,X,Fe){this.injector=D,this.configLoader=v,this.rootComponentType=S,this.config=N,this.urlTree=G,this.paramsInheritanceStrategy=X,this.urlSerializer=Fe,this.allowRedirects=!0,this.applyRedirects=new da(this.urlSerializer,this.urlTree)}noMatchError(D){return new I.wOt(4002,!1)}recognize(){const D=As(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,D,Nt).pipe(tt(v=>{if(v instanceof ao)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof hs?this.noMatchError(v):v}),(0,pn.T)(v=>{const S=new br([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,{}),N=new Mi(S,v),G=new Os("",N),X=function rn(E,D,v=null,S=null){return Le(as(E),D,v,S)}(S,[],this.urlTree.queryParams,this.urlTree.fragment);return X.queryParams=this.urlTree.queryParams,G.url=this.urlSerializer.serialize(X),this.inheritParamsAndData(G._root),{state:G,tree:X}}))}match(D){return this.processSegmentGroup(this.injector,this.config,D.root,Nt).pipe(tt(S=>{throw S instanceof hs?this.noMatchError(S):S}))}inheritParamsAndData(D){const v=D.value,S=Gr(v,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,v,S,N){return 0===S.segments.length&&S.hasChildren()?this.processChildren(D,v,S):this.processSegment(D,v,S,S.segments,N,!0)}processChildren(D,v,S){const N=[];for(const G of Object.keys(S.children))"primary"===G?N.unshift(G):N.push(G);return(0,fe.H)(N).pipe(ke(G=>{const X=S.children[G],Fe=function Is(E,D){const v=E.filter(S=>bn(S)===D);return v.push(...E.filter(S=>bn(S)!==D)),v}(v,G);return this.processSegmentGroup(D,Fe,X,G)}),(0,Ye.S)((G,X)=>(G.push(...X),G)),(0,ae.U)(null),function Ut(E,D){const v=arguments.length>=2;return S=>S.pipe(E?(0,Xt.p)((N,G)=>E(N,G,S)):Se.D,mt(1),v?(0,ae.U)(D):(0,mr.v)(()=>new lt.G))}(),(0,de.Z)(G=>{if(null===G)return Ji(S);const X=Ja(G);return function wc(E){E.sort((D,v)=>D.value.outlet===Nt?-1:v.value.outlet===Nt?1:D.value.outlet.localeCompare(v.value.outlet))}(X),(0,le.of)(X)}))}processSegment(D,v,S,N,G,X){return(0,fe.H)(v).pipe(ke(Fe=>this.processSegmentAgainstRoute(Fe._injector??D,v,Fe,S,N,G,X).pipe(tt(Pe=>{if(Pe instanceof hs)return(0,le.of)(null);throw Pe}))),(0,we.$)(Fe=>!!Fe),tt(Fe=>{if(rr(Fe))return function Nl(E,D,v){return 0===D.length&&!E.children[v]}(S,N,G)?(0,le.of)([]):Ji(S);throw Fe}))}processSegmentAgainstRoute(D,v,S,N,G,X,Fe){return function Lo(E,D,v,S){return!!(bn(E)===S||S!==Nt&&co(D,v,E))&&("**"===E.path||js(D,E,v).matched)}(S,N,G,X)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(D,N,S,G,X,Fe):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,N,v,S,G,X):Ji(N):Ji(N)}expandSegmentAgainstRouteUsingRedirect(D,v,S,N,G,X){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,S,N,X):this.expandRegularSegmentAgainstRouteUsingRedirect(D,v,S,N,G,X)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,v,S,N){const G=this.applyRedirects.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?xo(G):this.applyRedirects.lineralizeSegments(S,G).pipe((0,de.Z)(X=>{const Fe=new rt(X,{});return this.processSegment(D,v,Fe,X,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,v,S,N,G,X){const{matched:Fe,consumedSegments:Pe,remainingSegments:Dt,positionalParamSegments:un}=js(v,N,G);if(!Fe)return Ji(v);const In=this.applyRedirects.applyRedirectCommands(Pe,N.redirectTo,un);return N.redirectTo.startsWith("/")?xo(In):this.applyRedirects.lineralizeSegments(N,In).pipe((0,de.Z)(En=>this.processSegment(D,S,v,En.concat(Dt),X,!1)))}matchSegmentAgainstRoute(D,v,S,N,G,X){let Fe;if("**"===S.path){const Pe=N.length>0?hn(N).parameters:{},Dt=new br(N,Pe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ds(S),bn(S),S.component??S._loadedComponent??null,S,A(S));Fe=(0,le.of)({snapshot:Dt,consumedSegments:[],remainingSegments:[]}),v.children={}}else Fe=uo(v,S,N,D).pipe((0,pn.T)(({matched:Pe,consumedSegments:Dt,remainingSegments:un,parameters:In})=>Pe?{snapshot:new br(Dt,In,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ds(S),bn(S),S.component??S._loadedComponent??null,S,A(S)),consumedSegments:Dt,remainingSegments:un}:null));return Fe.pipe((0,lr.n)(Pe=>null===Pe?Ji(v):this.getChildConfig(D=S._injector??D,S,N).pipe((0,lr.n)(({routes:Dt})=>{const un=S._loadedInjector??D,{snapshot:In,consumedSegments:En,remainingSegments:Jt}=Pe,{segmentGroup:$o,slicedSegments:Ho}=As(v,En,Jt,Dt);if(0===Ho.length&&$o.hasChildren())return this.processChildren(un,Dt,$o).pipe((0,pn.T)(gs=>null===gs?null:[new Mi(In,gs)]));if(0===Dt.length&&0===Ho.length)return(0,le.of)([new Mi(In,[])]);const Fu=bn(S)===G;return this.processSegment(un,Dt,$o,Ho,Fu?Nt:G,!0).pipe((0,pn.T)(gs=>[new Mi(In,gs)]))}))))}getChildConfig(D,v,S){return v.children?(0,le.of)({routes:v.children,injector:D}):v.loadChildren?void 0!==v._loadedRoutes?(0,le.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Qa(E,D,v,S){const N=D.canLoad;if(void 0===N||0===N.length)return(0,le.of)(!0);const G=N.map(X=>{const Fe=Tr(X,E);return Kt(function Ml(E){return E&&Ts(E.canLoad)}(Fe)?Fe.canLoad(D,v):E.runInContext(()=>Fe(D,v)))});return(0,le.of)(G).pipe(ds(),No())}(D,v,S).pipe((0,de.Z)(N=>N?this.configLoader.loadChildren(D,v).pipe((0,Ne.M)(G=>{v._loadedRoutes=G.routes,v._loadedInjector=G.injector})):function Tc(E){return Te(ls(!1,3))}())):(0,le.of)({routes:[],injector:D})}}function $s(E){const D=E.value.routeConfig;return D&&""===D.path}function Ja(E){const D=[],v=new Set;for(const S of E){if(!$s(S)){D.push(S);continue}const N=D.find(G=>S.value.routeConfig===G.value.routeConfig);void 0!==N?(N.children.push(...S.children),v.add(N)):D.push(S)}for(const S of v){const N=Ja(S.children);D.push(new Mi(S.value,N))}return D.filter(S=>!v.has(S))}function Ds(E){return E.data||{}}function A(E){return E.resolve||{}}function bt(E){return"string"==typeof E.title||null===E.title}function Ln(E){return(0,lr.n)(D=>{const v=E(D);return v?(0,fe.H)(v).pipe((0,pn.T)(()=>D)):(0,le.of)(D)})}const Mn=new I.nKC("ROUTES");let Vn=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,I.WQX)(I.Ql9)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,le.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const S=Kt(v.loadComponent()).pipe((0,pn.T)(Xn),(0,Ne.M)(G=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=G}),tn(()=>{this.componentLoaders.delete(v)})),N=new Be(S,()=>new Zt.B).pipe(xt());return this.componentLoaders.set(v,N),N}loadChildren(v,S){if(this.childrenLoaders.get(S))return this.childrenLoaders.get(S);if(S._loadedRoutes)return(0,le.of)({routes:S._loadedRoutes,injector:S._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(S);const G=function _n(E,D,v,S){return Kt(E.loadChildren()).pipe((0,pn.T)(Xn),(0,de.Z)(N=>N instanceof I.Co$||Array.isArray(N)?(0,le.of)(N):(0,fe.H)(D.compileModuleAsync(N))),(0,pn.T)(N=>{S&&S(E);let G,X,Fe=!1;return Array.isArray(N)?(X=N,!0):(G=N.create(v).injector,X=G.get(Mn,[],{optional:!0,self:!0}).flat()),{routes:X.map(nr),injector:G}}))}(S,this.compiler,v,this.onLoadEndListener).pipe(tn(()=>{this.childrenLoaders.delete(S)})),X=new Be(G,()=>new Zt.B).pipe(xt());return this.childrenLoaders.set(S,X),X}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function Xn(E){return function Kn(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Nn=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zt.B,this.transitionAbortSubject=new Zt.B,this.configLoader=(0,I.WQX)(Vn),this.environmentInjector=(0,I.WQX)(I.uvJ),this.urlSerializer=(0,I.WQX)(Xe),this.rootContexts=(0,I.WQX)(kr),this.inputBindingEnabled=null!==(0,I.WQX)(mn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,le.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new bo(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new za(N))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const S=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:S})}setupNavigations(v,S,N){return this.transitions=new _e.t({id:0,currentUrlTree:S,currentRawUrl:S,currentBrowserUrl:S,extractedUrl:v.urlHandlingStrategy.extract(S),urlAfterRedirects:v.urlHandlingStrategy.extract(S),rawUrl:S,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ns,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Xt.p)(G=>0!==G.id),(0,pn.T)(G=>({...G,extractedUrl:v.urlHandlingStrategy.extract(G.rawUrl)})),(0,lr.n)(G=>{this.currentTransition=G;let X=!1,Fe=!1;return(0,le.of)(G).pipe((0,Ne.M)(Pe=>{this.currentNavigation={id:Pe.id,initialUrl:Pe.rawUrl,extractedUrl:Pe.extractedUrl,trigger:Pe.source,extras:Pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,lr.n)(Pe=>{const Dt=Pe.currentBrowserUrl.toString(),un=!v.navigated||Pe.extractedUrl.toString()!==Dt||Dt!==Pe.currentUrlTree.toString();if(!un&&"reload"!==(Pe.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const En="";return this.events.next(new Pi(Pe.id,this.urlSerializer.serialize(Pe.rawUrl),En,0)),Pe.resolve(null),et.w}if(v.urlHandlingStrategy.shouldProcessUrl(Pe.rawUrl))return(0,le.of)(Pe).pipe((0,lr.n)(En=>{const Jt=this.transitions?.getValue();return this.events.next(new ja(En.id,this.urlSerializer.serialize(En.extractedUrl),En.source,En.restoredState)),Jt!==this.transitions?.getValue()?et.w:Promise.resolve(En)}),function F(E,D,v,S,N,G){return(0,de.Z)(X=>function xu(E,D,v,S,N,G,X="emptyOnly"){return new Si(E,D,v,S,N,X,G).recognize()}(E,D,v,S,X.extractedUrl,N,G).pipe((0,pn.T)(({state:Fe,tree:Pe})=>({...X,targetSnapshot:Fe,urlAfterRedirects:Pe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Ne.M)(En=>{G.targetSnapshot=En.targetSnapshot,G.urlAfterRedirects=En.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:En.urlAfterRedirects};const Jt=new sa(En.id,this.urlSerializer.serialize(En.extractedUrl),this.urlSerializer.serialize(En.urlAfterRedirects),En.targetSnapshot);this.events.next(Jt)}));if(un&&v.urlHandlingStrategy.shouldProcessUrl(Pe.currentRawUrl)){const{id:En,extractedUrl:Jt,source:$o,restoredState:Ho,extras:Fu}=Pe,gs=new ja(En,this.urlSerializer.serialize(Jt),$o,Ho);this.events.next(gs);const ms=At(0,this.rootComponentType).snapshot;return this.currentTransition=G={...Pe,targetSnapshot:ms,urlAfterRedirects:Jt,extras:{...Fu,skipLocationChange:!1,replaceUrl:!1}},(0,le.of)(G)}{const En="";return this.events.next(new Pi(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),En,1)),Pe.resolve(null),et.w}}),(0,Ne.M)(Pe=>{const Dt=new ar(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot);this.events.next(Dt)}),(0,pn.T)(Pe=>(this.currentTransition=G={...Pe,guards:so(Pe.targetSnapshot,Pe.currentSnapshot,this.rootContexts)},G)),function ca(E,D){return(0,de.Z)(v=>{const{targetSnapshot:S,currentSnapshot:N,guards:{canActivateChecks:G,canDeactivateChecks:X}}=v;return 0===X.length&&0===G.length?(0,le.of)({...v,guardsResult:!0}):function vi(E,D,v,S){return(0,fe.H)(E).pipe((0,de.Z)(N=>function qr(E,D,v,S,N){const G=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,le.of)(!0);const X=G.map(Fe=>{const Pe=Fr(D)??N,Dt=Tr(Fe,Pe);return Kt(function Nu(E){return E&&Ts(E.canDeactivate)}(Dt)?Dt.canDeactivate(E,D,v,S):Pe.runInContext(()=>Dt(E,D,v,S))).pipe((0,we.$)())});return(0,le.of)(X).pipe(ds())}(N.component,N.route,v,D,S)),(0,we.$)(N=>!0!==N,!0))}(X,S,N,E).pipe((0,de.Z)(Fe=>Fe&&function vc(E){return"boolean"==typeof E}(Fe)?function Oi(E,D,v,S){return(0,fe.H)(D).pipe(ke(N=>(0,Bt.x)(function Rn(E,D){return null!==E&&D&&D(new oa(E)),(0,le.of)(!0)}(N.route.parent,S),function Bs(E,D){return null!==E&&D&&D(new Mu(E)),(0,le.of)(!0)}(N.route,S),function Xi(E,D,v){const S=D[D.length-1],G=D.slice(0,D.length-1).reverse().map(X=>function Mo(E){const D=E.routeConfig?E.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:E,guards:D}:null}(X)).filter(X=>null!==X).map(X=>Ae(()=>{const Fe=X.guards.map(Pe=>{const Dt=Fr(X.node)??v,un=Tr(Pe,Dt);return Kt(function Ec(E){return E&&Ts(E.canActivateChild)}(un)?un.canActivateChild(S,E):Dt.runInContext(()=>un(S,E))).pipe((0,we.$)())});return(0,le.of)(Fe).pipe(ds())}));return(0,le.of)(G).pipe(ds())}(E,N.path,v),function an(E,D,v){const S=D.routeConfig?D.routeConfig.canActivate:null;if(!S||0===S.length)return(0,le.of)(!0);const N=S.map(G=>Ae(()=>{const X=Fr(D)??v,Fe=Tr(G,X);return Kt(function Ic(E){return E&&Ts(E.canActivate)}(Fe)?Fe.canActivate(D,E):X.runInContext(()=>Fe(D,E))).pipe((0,we.$)())}));return(0,le.of)(N).pipe(ds())}(E,N.route,v))),(0,we.$)(N=>!0!==N,!0))}(S,G,E,D):(0,le.of)(Fe)),(0,pn.T)(Fe=>({...v,guardsResult:Fe})))})}(this.environmentInjector,Pe=>this.events.next(Pe)),(0,Ne.M)(Pe=>{if(G.guardsResult=Pe.guardsResult,xr(Pe.guardsResult))throw Di(0,Pe.guardsResult);const Dt=new $a(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects),Pe.targetSnapshot,!!Pe.guardsResult);this.events.next(Dt)}),(0,Xt.p)(Pe=>!!Pe.guardsResult||(this.cancelNavigationTransition(Pe,"",3),!1)),Ln(Pe=>{if(Pe.guards.canActivateChecks.length)return(0,le.of)(Pe).pipe((0,Ne.M)(Dt=>{const un=new Ha(Dt.id,this.urlSerializer.serialize(Dt.extractedUrl),this.urlSerializer.serialize(Dt.urlAfterRedirects),Dt.targetSnapshot);this.events.next(un)}),(0,lr.n)(Dt=>{let un=!1;return(0,le.of)(Dt).pipe(function P(E,D){return(0,de.Z)(v=>{const{targetSnapshot:S,guards:{canActivateChecks:N}}=v;if(!N.length)return(0,le.of)(v);let G=0;return(0,fe.H)(N).pipe(ke(X=>function V(E,D,v,S){const N=E.routeConfig,G=E._resolve;return void 0!==N?.title&&!bt(N)&&(G[Er]=N.title),function ee(E,D,v,S){const N=function Oe(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}(E);if(0===N.length)return(0,le.of)({});const G={};return(0,fe.H)(N).pipe((0,de.Z)(X=>function nt(E,D,v,S){const N=Fr(D)??S,G=Tr(E,N);return Kt(G.resolve?G.resolve(D,v):N.runInContext(()=>G(D,v)))}(E[X],D,v,S).pipe((0,we.$)(),(0,Ne.M)(Fe=>{G[X]=Fe}))),mt(1),function Mt(E){return(0,pn.T)(()=>E)}(G),tt(X=>rr(X)?et.w:Te(X)))}(G,E,D,S).pipe((0,pn.T)(X=>(E._resolvedData=X,E.data=Gr(E,v).resolve,N&&bt(N)&&(E.data[Er]=N.title),null)))}(X.route,S,E,D)),(0,Ne.M)(()=>G++),mt(1),(0,de.Z)(X=>G===N.length?(0,le.of)(v):et.w))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Ne.M)({next:()=>un=!0,complete:()=>{un||this.cancelNavigationTransition(Dt,"",2)}}))}),(0,Ne.M)(Dt=>{const un=new Ki(Dt.id,this.urlSerializer.serialize(Dt.extractedUrl),this.urlSerializer.serialize(Dt.urlAfterRedirects),Dt.targetSnapshot);this.events.next(un)}))}),Ln(Pe=>{const Dt=un=>{const In=[];un.routeConfig?.loadComponent&&!un.routeConfig._loadedComponent&&In.push(this.configLoader.loadComponent(un.routeConfig).pipe((0,Ne.M)(En=>{un.component=En}),(0,pn.T)(()=>{})));for(const En of un.children)In.push(...Dt(En));return In};return _t(Dt(Pe.targetSnapshot.root)).pipe((0,ae.U)(),(0,Jn.s)(1))}),Ln(()=>this.afterPreactivation()),(0,pn.T)(Pe=>{const Dt=function Rr(E,D,v){const S=sn(E,D._root,v?v._root:void 0);return new dr(S,D)}(v.routeReuseStrategy,Pe.targetSnapshot,Pe.currentRouterState);return this.currentTransition=G={...Pe,targetRouterState:Dt},G}),(0,Ne.M)(()=>{this.events.next(new wn)}),((E,D,v,S)=>(0,pn.T)(N=>(new Es(D,N.targetRouterState,N.currentRouterState,v,S).activate(E),N)))(this.rootContexts,v.routeReuseStrategy,Pe=>this.events.next(Pe),this.inputBindingEnabled),(0,Jn.s)(1),(0,Ne.M)({next:Pe=>{X=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wi(Pe.id,this.urlSerializer.serialize(Pe.extractedUrl),this.urlSerializer.serialize(Pe.urlAfterRedirects))),v.titleStrategy?.updateTitle(Pe.targetRouterState.snapshot),Pe.resolve(!0)},complete:()=>{X=!0}}),function gn(E){return(0,ft.N)((D,v)=>{(0,Ft.Tg)(E).subscribe((0,Ke._)(v,()=>v.complete(),$r.l)),!v.closed&&D.subscribe(v)})}(this.transitionAbortSubject.pipe((0,Ne.M)(Pe=>{throw Pe}))),tn(()=>{X||Fe||this.cancelNavigationTransition(G,"",1),this.currentNavigation?.id===G.id&&(this.currentNavigation=null)}),tt(Pe=>{if(Fe=!0,Ro(Pe))this.events.next(new zr(G.id,this.urlSerializer.serialize(G.extractedUrl),Pe.message,Pe.cancellationCode)),function qn(E){return Ro(E)&&xr(E.url)}(Pe)?this.events.next(new Or(Pe.url)):G.resolve(!1);else{this.events.next(new wi(G.id,this.urlSerializer.serialize(G.extractedUrl),Pe,G.targetSnapshot??void 0));try{G.resolve(v.errorHandler(Pe))}catch(Dt){G.reject(Dt)}}return et.w}))}))}cancelNavigationTransition(v,S,N){const G=new zr(v.id,this.urlSerializer.serialize(v.extractedUrl),S,N);this.events.next(G),v.resolve(!1)}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function ti(E){return E!==Ns}let ni=(()=>{class E{buildTitle(v){let S,N=v.root;for(;void 0!==N;)S=this.getResolvedTitleForRoute(N)??S,N=N.children.find(G=>G.outlet===Nt);return S}getResolvedTitleForRoute(v){return v.data[Er]}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Hs)},providedIn:"root"})}}return E})(),Hs=(()=>{class E extends ni{constructor(v){super(),this.title=v}updateTitle(v){const S=this.buildTitle(v);void 0!==S&&this.title.setTitle(S)}static{this.\u0275fac=function(S){return new(S||E)(I.KVO(Dn.hE))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})(),vr=(()=>{class E{static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Pr)},providedIn:"root"})}}return E})();class Cs{shouldDetach(D){return!1}store(D,v){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,v){return D.routeConfig===v.routeConfig}}let Pr=(()=>{class E extends Cs{static{this.\u0275fac=function(){let v;return function(N){return(v||(v=I.xGo(E)))(N||E)}}()}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Zi=new I.nKC("",{providedIn:"root",factory:()=>({})});let Jd=(()=>{class E{static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:function(){return(0,I.WQX)(Lt)},providedIn:"root"})}}return E})(),Lt=(()=>{class E{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,S){return v}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();var pa=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(pa||{});function zs(E,D){E.events.pipe((0,Xt.p)(v=>v instanceof Wi||v instanceof zr||v instanceof wi||v instanceof Pi),(0,pn.T)(v=>v instanceof Wi||v instanceof Pi?pa.COMPLETE:v instanceof zr&&(0===v.code||1===v.code)?pa.REDIRECTING:pa.FAILED),(0,Xt.p)(v=>v!==pa.REDIRECTING),(0,Jn.s)(1)).subscribe(()=>{D()})}function ci(E){throw E}function xl(E,D,v){return D.parse("/")}const Ol={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wr=(()=>{class E{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,I.WQX)(I.H3F),this.isNgZoneEnabled=!1,this._events=new Zt.B,this.options=(0,I.WQX)(Zi,{optional:!0})||{},this.pendingTasks=(0,I.WQX)(I.$K3),this.errorHandler=this.options.errorHandler||ci,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,I.WQX)(Jd),this.routeReuseStrategy=(0,I.WQX)(vr),this.titleStrategy=(0,I.WQX)(ni),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,I.WQX)(Mn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,I.WQX)(Nn),this.urlSerializer=(0,I.WQX)(Xe),this.location=(0,I.WQX)(Fn.aZ),this.componentInputBindingEnabled=!!(0,I.WQX)(mn,{optional:!0}),this.eventsSubscription=new Qe.yU,this.isNgZoneEnabled=(0,I.WQX)(I.SKi)instanceof I.SKi&&I.SKi.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=At(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(S=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(kl(S)&&this._events.next(S));if(S instanceof ja)ti(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(S instanceof Pi)this.rawUrlTree=N.rawUrl;else if(S instanceof sa){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(G,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(S instanceof wn)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(S instanceof zr)0!==S.code&&1!==S.code&&(this.navigated=!0),(3===S.code||2===S.code)&&this.restoreHistory(N);else if(S instanceof Or){const G=this.urlHandlingStrategy.merge(S.url,N.currentRawUrl),X={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ti(N.source)};this.scheduleNavigation(G,Ns,null,X,{resolve:N.resolve,reject:N.reject,promise:N.promise})}S instanceof wi&&this.restoreHistory(N,!0),S instanceof Wi&&(this.navigated=!0),kl(S)&&this._events.next(S)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ns,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const S="popstate"===v.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,S,v.state)},0)}))}navigateToSyncWithBrowser(v,S,N){const G={replaceUrl:!0},X=N?.navigationId?N:null;if(N){const Pe={...N};delete Pe.navigationId,delete Pe.\u0275routerPageId,0!==Object.keys(Pe).length&&(G.state=Pe)}const Fe=this.parseUrl(v);this.scheduleNavigation(Fe,S,X,G)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(nr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,S={}){const{relativeTo:N,queryParams:G,fragment:X,queryParamsHandling:Fe,preserveFragment:Pe}=S,Dt=Pe?this.currentUrlTree.fragment:X;let In,un=null;switch(Fe){case"merge":un={...this.currentUrlTree.queryParams,...G};break;case"preserve":un=this.currentUrlTree.queryParams;break;default:un=G||null}null!==un&&(un=this.removeEmptyProps(un));try{In=as(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),In=this.currentUrlTree.root}return Le(In,v,un,Dt??null)}navigateByUrl(v,S={skipLocationChange:!1}){const N=xr(v)?v:this.parseUrl(v),G=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(G,Ns,null,S)}navigate(v,S={skipLocationChange:!1}){return function wf(E){for(let D=0;D<E.length;D++)if(null==E[D])throw new I.wOt(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,S),S)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let S;try{S=this.urlSerializer.parse(v)}catch(N){S=this.malformedUriErrorHandler(N,this.urlSerializer,v)}return S}isActive(v,S){let N;if(N=!0===S?{...Ol}:!1===S?{...lo}:S,xr(v))return or(this.currentUrlTree,v,N);const G=this.parseUrl(v);return or(this.currentUrlTree,G,N)}removeEmptyProps(v){return Object.keys(v).reduce((S,N)=>{const G=v[N];return null!=G&&(S[N]=G),S},{})}scheduleNavigation(v,S,N,G,X){if(this.disposed)return Promise.resolve(!1);let Fe,Pe,Dt;X?(Fe=X.resolve,Pe=X.reject,Dt=X.promise):Dt=new Promise((In,En)=>{Fe=In,Pe=En});const un=this.pendingTasks.add();return zs(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(un))}),this.navigationTransitions.handleNavigationRequest({source:S,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:G,resolve:Fe,reject:Pe,promise:Dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Dt.catch(In=>Promise.reject(In))}setBrowserUrl(v,S){const N=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(N)||S.extras.replaceUrl){const X={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId)};this.location.replaceState(N,"",X)}else{const G={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId+1)};this.location.go(N,"",G)}}restoreHistory(v,S=!1){if("computed"===this.canceledNavigationResolution){const G=this.currentPageId-this.browserPageId;0!==G?this.location.historyGo(G):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===G&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,S){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:S}:{navigationId:v}}static{this.\u0275fac=function(S){return new(S||E)}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();function kl(E){return!(E instanceof wn||E instanceof Or)}class Ss{}let Ac=(()=>{class E{constructor(v,S,N,G,X){this.router=v,this.injector=N,this.preloadingStrategy=G,this.loader=X}setUpPreloading(){this.subscription=this.router.events.pipe((0,Xt.p)(v=>v instanceof Wi),ke(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,S){const N=[];for(const G of S){G.providers&&!G._injector&&(G._injector=(0,I.Ol2)(G.providers,v,`Route: ${G.path}`));const X=G._injector??v,Fe=G._loadedInjector??X;(G.loadChildren&&!G._loadedRoutes&&void 0===G.canLoad||G.loadComponent&&!G._loadedComponent)&&N.push(this.preloadConfig(X,G)),(G.children||G._loadedRoutes)&&N.push(this.processRoutes(Fe,G.children??G._loadedRoutes))}return(0,fe.H)(N).pipe((0,ir.U)())}preloadConfig(v,S){return this.preloadingStrategy.preload(S,()=>{let N;N=S.loadChildren&&void 0===S.canLoad?this.loader.loadChildren(v,S):(0,le.of)(null);const G=N.pipe((0,de.Z)(X=>null===X?(0,le.of)(void 0):(S._loadedRoutes=X.routes,S._loadedInjector=X.injector,this.processRoutes(X.injector??v,X.routes))));if(S.loadComponent&&!S._loadedComponent){const X=this.loader.loadComponent(S);return(0,fe.H)([G,X]).pipe((0,ir.U)())}return G})}static{this.\u0275fac=function(S){return new(S||E)(I.KVO(wr),I.KVO(I.Ql9),I.KVO(I.uvJ),I.KVO(Ss),I.KVO(Vn))}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})();const Dc=new I.nKC("");let Qt=(()=>{class E{constructor(v,S,N,G,X={}){this.urlSerializer=v,this.transitions=S,this.viewportScroller=N,this.zone=G,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof ja?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Wi?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Pi&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof aa&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,S){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aa(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(S){I.QTQ()}}static{this.\u0275prov=I.jDH({token:E,factory:E.\u0275fac})}}return E})();function jn(E,D){return{\u0275kind:E,\u0275providers:D}}function _a(){const E=(0,I.WQX)(I.zZn);return D=>{const v=E.get(I.o8S);if(D!==v.components[0])return;const S=E.get(wr),N=E.get(eh);1===E.get(Fo)&&S.initialNavigation(),E.get(xn,null,I.$GK.Optional)?.setUpPreloading(),E.get(Dc,null,I.$GK.Optional)?.init(),S.resetRootComponentType(v.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const eh=new I.nKC("",{factory:()=>new Zt.B}),Fo=new I.nKC("",{providedIn:"root",factory:()=>1}),xn=new I.nKC("");function Uo(E){return jn(0,[{provide:xn,useExisting:Ac},{provide:Ss,useExisting:E}])}const Bo=new I.nKC("ROUTER_FORROOT_GUARD"),Rc=[Fn.aZ,{provide:Xe,useClass:Yn},wr,kr,{provide:Bn,useFactory:function Cc(E){return E.routerState.root},deps:[wr]},Vn,[]];function Ur(){return new I.NEm("Router",wr)}let $n=(()=>{class E{constructor(v){}static forRoot(v,S){return{ngModule:E,providers:[Rc,[],{provide:Mn,multi:!0,useValue:v},{provide:Bo,useFactory:jo,deps:[[wr,new I.Xx1,new I.kdw]]},{provide:Zi,useValue:S||{}},S?.useHash?{provide:Fn.hb,useClass:Fn.fw}:{provide:Fn.hb,useClass:Fn.Sm},{provide:Dc,useFactory:()=>{const E=(0,I.WQX)(Fn.Xr),D=(0,I.WQX)(I.SKi),v=(0,I.WQX)(Zi),S=(0,I.WQX)(Nn),N=(0,I.WQX)(Xe);return v.scrollOffset&&E.setOffset(v.scrollOffset),new Qt(N,S,E,D,v)}},S?.preloadingStrategy?Uo(S.preloadingStrategy).\u0275providers:[],{provide:I.NEm,multi:!0,useFactory:Ur},S?.initialNavigation?Ks(S):[],S?.bindToComponentInputs?jn(8,[ur,{provide:mn,useExisting:ur}]).\u0275providers:[],[{provide:ps,useFactory:_a},{provide:I.iLQ,multi:!0,useExisting:ps}]]}}static forChild(v){return{ngModule:E,providers:[{provide:Mn,multi:!0,useValue:v}]}}static{this.\u0275fac=function(S){return new(S||E)(I.KVO(Bo,8))}}static{this.\u0275mod=I.$C({type:E})}static{this.\u0275inj=I.G2t({})}}return E})();function jo(E){return"guarded"}function Ks(E){return["disabled"===E.initialNavigation?jn(3,[{provide:I.hnV,multi:!0,useFactory:()=>{const D=(0,I.WQX)(wr);return()=>{D.setUpLocationChangeListener()}}},{provide:Fo,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?jn(2,[{provide:Fo,useValue:0},{provide:I.hnV,multi:!0,deps:[I.zZn],useFactory:D=>{const v=D.get(Fn.hj,Promise.resolve());return()=>v.then(()=>new Promise(S=>{const N=D.get(wr),G=D.get(eh);zs(N,()=>{S(!0)}),D.get(Nn).afterPreactivation=()=>(S(!0),G.closed?(0,le.of)(void 0):G),N.initialNavigation()}))}}]).\u0275providers:[]]}const ps=new I.nKC("")},3345:(Rt,Ue,U)=>{U.d(Ue,{A:()=>_t});var I=U(1076),Y=U(1362),oe=U(7852),q=U(8041);class fe{constructor(yt,lt){this._delegate=yt,this.firebase=lt,(0,oe._addComponent)(yt,new Y.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(yt,lt=oe._DEFAULT_ENTRY_NAME){var Bt;this._delegate.checkDestroyed();const Ft=this._delegate.container.getProvider(yt);return!Ft.isInitialized()&&"EXPLICIT"===(null===(Bt=Ft.getComponent())||void 0===Bt?void 0:Bt.instantiationMode)&&Ft.initialize(),Ft.getImmediate({identifier:lt})}_removeServiceInstance(yt,lt=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(lt)}_addComponent(yt){(0,oe._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,oe._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new I.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function Se(){const it=function je(it){const yt={},lt={__esModule:!0,initializeApp:function Ae(Qe,ft={}){const xt=oe.initializeApp(Qe,ft);if((0,I.gR)(yt,xt.name))return yt[xt.name];const Be=new it(xt,lt);return yt[xt.name]=Be,Be},app:Ft,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Te(Qe){const ft=Qe.name,xt=ft.replace("-compat","");if(oe._registerComponent(Qe)&&"PUBLIC"===Qe.type){const Be=(Zt=Ft())=>{if("function"!=typeof Zt[xt])throw _e.create("invalid-app-argument",{appName:ft});return Zt[xt]()};void 0!==Qe.serviceProps&&(0,I.zw)(Be,Qe.serviceProps),lt[xt]=Be,it.prototype[xt]=function(...Zt){return this._getService.bind(this,ft).apply(this,Qe.multipleInstances?Zt:[])}}return"PUBLIC"===Qe.type?lt[xt]:null},removeApp:function Bt(Qe){delete yt[Qe]},useAsService:function et(Qe,ft){return"serverAuth"===ft?null:ft},modularAPIs:oe}};function Ft(Qe){if(!(0,I.gR)(yt,Qe=Qe||oe._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:Qe});return yt[Qe]}return lt.default=lt,Object.defineProperty(lt,"apps",{get:function ze(){return Object.keys(yt).map(Qe=>yt[Qe])}}),Ft.App=it,lt}(fe);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function yt(lt){(0,I.zw)(it,lt)},createSubscribe:I.tD,ErrorFactory:I.FA,deepExtend:I.zw}),it}(),Z=new q.Vy("@firebase/app-compat");try{const it=(0,I.mS)();if(void 0!==it.firebase){Z.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=it.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&Z.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const _t=J;!function qe(it){(0,oe.registerVersion)("@firebase/app-compat","0.2.42",it)}()},7852:(Rt,Ue,U)=>{U.r(Ue),U.d(Ue,{FirebaseError:()=>q.g,SDK_VERSION:()=>Yn,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>yr,_addOrOverwriteComponent:()=>So,_apps:()=>Sn,_clearComponents:()=>St,_components:()=>dn,_getProvider:()=>zn,_isFirebaseApp:()=>ii,_isFirebaseServerApp:()=>rt,_registerComponent:()=>Ce,_removeServiceInstance:()=>Wt,_serverApps:()=>or,deleteApp:()=>Hi,getApp:()=>Ti,getApps:()=>$i,initializeApp:()=>os,initializeServerApp:()=>si,onLog:()=>k,registerVersion:()=>z,setLogLevel:()=>H});var I=U(467),Y=U(1362),oe=U(8041),q=U(1076);const fe=(Le,Ie)=>Ie.some(We=>Le instanceof We);let le,_e;const J=new WeakMap,Z=new WeakMap,pe=new WeakMap,Ke=new WeakMap,qe=new WeakMap;let yt={get(Le,Ie,We){if(Le instanceof IDBTransaction){if("done"===Ie)return Z.get(Le);if("objectStoreNames"===Ie)return Le.objectStoreNames||pe.get(Le);if("store"===Ie)return We.objectStoreNames[1]?void 0:We.objectStore(We.objectStoreNames[0])}return Ae(Le[Ie])},set:(Le,Ie,We)=>(Le[Ie]=We,!0),has:(Le,Ie)=>Le instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in Le};function Ft(Le){return"function"==typeof Le?function Bt(Le){return Le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return _e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Le)?function(...Ie){return Le.apply(ze(this),Ie),Ae(J.get(this))}:function(...Ie){return Ae(Le.apply(ze(this),Ie))}:function(Ie,...We){const ht=Le.call(ze(this),Ie,...We);return pe.set(ht,Ie.sort?Ie.sort():[Ie]),Ae(ht)}}(Le):(Le instanceof IDBTransaction&&function it(Le){if(Z.has(Le))return;const Ie=new Promise((We,ht)=>{const $t=()=>{Le.removeEventListener("complete",nn),Le.removeEventListener("error",fn),Le.removeEventListener("abort",fn)},nn=()=>{We(),$t()},fn=()=>{ht(Le.error||new DOMException("AbortError","AbortError")),$t()};Le.addEventListener("complete",nn),Le.addEventListener("error",fn),Le.addEventListener("abort",fn)});Z.set(Le,Ie)}(Le),fe(Le,function je(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Le,yt):Le)}function Ae(Le){if(Le instanceof IDBRequest)return function _t(Le){const Ie=new Promise((We,ht)=>{const $t=()=>{Le.removeEventListener("success",nn),Le.removeEventListener("error",fn)},nn=()=>{We(Ae(Le.result)),$t()},fn=()=>{ht(Le.error),$t()};Le.addEventListener("success",nn),Le.addEventListener("error",fn)});return Ie.then(We=>{We instanceof IDBCursor&&J.set(We,Le)}).catch(()=>{}),qe.set(Ie,Le),Ie}(Le);if(Ke.has(Le))return Ke.get(Le);const Ie=Ft(Le);return Ie!==Le&&(Ke.set(Le,Ie),qe.set(Ie,Le)),Ie}const ze=Le=>qe.get(Le),Qe=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],xt=new Map;function Be(Le,Ie){if(!(Le instanceof IDBDatabase)||Ie in Le||"string"!=typeof Ie)return;if(xt.get(Ie))return xt.get(Ie);const We=Ie.replace(/FromIndex$/,""),ht=Ie!==We,$t=ft.includes(We);if(!(We in(ht?IDBIndex:IDBObjectStore).prototype)||!$t&&!Qe.includes(We))return;const nn=function(){var fn=(0,I.A)(function*(Cn,...er){const me=this.transaction(Cn,$t?"readwrite":"readonly");let vn=me.store;return ht&&(vn=vn.index(er.shift())),(yield Promise.all([vn[We](...er),$t&&me.done]))[0]});return function(er){return fn.apply(this,arguments)}}();return xt.set(Ie,nn),nn}!function lt(Le){yt=Le(yt)}(Le=>({...Le,get:(Ie,We,ht)=>Be(Ie,We)||Le.get(Ie,We,ht),has:(Ie,We)=>!!Be(Ie,We)||Le.has(Ie,We)}));class Zt{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function Fn(Le){const Ie=Le.getComponent();return"VERSION"===Ie?.type}(We)){const ht=We.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(We=>We).join(" ")}}const pn="@firebase/app",lr="0.10.12",Jn=new oe.Vy("@firebase/app"),Kt="[DEFAULT]",pr={[pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Sn=new Map,or=new Map,dn=new Map;function yr(Le,Ie){try{Le.container.addComponent(Ie)}catch(We){Jn.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Le.name}`,We)}}function So(Le,Ie){Le.container.addOrOverwriteComponent(Ie)}function Ce(Le){const Ie=Le.name;if(dn.has(Ie))return Jn.debug(`There were multiple attempts to register component ${Ie}.`),!1;dn.set(Ie,Le);for(const We of Sn.values())yr(We,Le);for(const We of or.values())yr(We,Le);return!0}function zn(Le,Ie){const We=Le.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),Le.container.getProvider(Ie)}function Wt(Le,Ie,We=Kt){zn(Le,Ie).clearInstance(We)}function ii(Le){return void 0!==Le.options}function rt(Le){return void 0!==Le.settings}function St(){dn.clear()}const at=new q.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xe{constructor(Ie,We,ht){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw at.create("app-deleted",{appName:this._name})}}class Xe extends xe{constructor(Ie,We,ht,$t){const nn=void 0!==We.automaticDataCollectionEnabled&&We.automaticDataCollectionEnabled,fn={name:ht,automaticDataCollectionEnabled:nn};super(void 0!==Ie.apiKey?Ie:Ie.options,fn,$t),this._serverConfig=Object.assign({automaticDataCollectionEnabled:nn},We),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,We.releaseOnDeref=void 0,z(pn,lr,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ie){this.isDeleted||(this._refCount++,void 0!==Ie&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ie,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Hi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw at.create("server-app-deleted")}}const Yn="10.14.0";function os(Le,Ie={}){let We=Le;"object"!=typeof Ie&&(Ie={name:Ie});const ht=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Ie),$t=ht.name;if("string"!=typeof $t||!$t)throw at.create("bad-app-name",{appName:String($t)});if(We||(We=(0,q.T9)()),!We)throw at.create("no-options");const nn=Sn.get($t);if(nn){if((0,q.bD)(We,nn.options)&&(0,q.bD)(ht,nn.config))return nn;throw at.create("duplicate-app",{appName:$t})}const fn=new Y.h1($t);for(const er of dn.values())fn.addComponent(er);const Cn=new xe(We,ht,fn);return Sn.set($t,Cn),Cn}function si(Le,Ie){if((0,q.Bd)()&&!(0,q.p7)())throw at.create("invalid-server-app-environment");let We;void 0===Ie.automaticDataCollectionEnabled&&(Ie.automaticDataCollectionEnabled=!1),We=ii(Le)?Le.options:Le;const ht=Object.assign(Object.assign({},Ie),We);if(void 0!==ht.releaseOnDeref&&delete ht.releaseOnDeref,void 0!==Ie.releaseOnDeref&&typeof FinalizationRegistry>"u")throw at.create("finalization-registry-not-supported",{});const nn=""+(me=JSON.stringify(ht),[...me].reduce((vn,Xr)=>Math.imul(31,vn)+Xr.charCodeAt(0)|0,0)),fn=or.get(nn);var me;if(fn)return fn.incRefCount(Ie.releaseOnDeref),fn;const Cn=new Y.h1(nn);for(const me of dn.values())Cn.addComponent(me);const er=new Xe(We,Ie,nn,Cn);return or.set(nn,er),er}function Ti(Le=Kt){const Ie=Sn.get(Le);if(!Ie&&Le===Kt&&(0,q.T9)())return os();if(!Ie)throw at.create("no-app",{appName:Le});return Ie}function $i(){return Array.from(Sn.values())}function Hi(Le){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,I.A)(function*(Le){let Ie=!1;const We=Le.name;Sn.has(We)?(Ie=!0,Sn.delete(We)):or.has(We)&&Le.decRefCount()<=0&&(or.delete(We),Ie=!0),Ie&&(yield Promise.all(Le.container.getProviders().map(ht=>ht.delete())),Le.isDeleted=!0)})).apply(this,arguments)}function z(Le,Ie,We){var ht;let $t=null!==(ht=pr[Le])&&void 0!==ht?ht:Le;We&&($t+=`-${We}`);const nn=$t.match(/\s|\//),fn=Ie.match(/\s|\//);if(nn||fn){const Cn=[`Unable to register library "${$t}" with version "${Ie}":`];return nn&&Cn.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),nn&&fn&&Cn.push("and"),fn&&Cn.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void Jn.warn(Cn.join(" "))}Ce(new Y.uA(`${$t}-version`,()=>({library:$t,version:Ie}),"VERSION"))}function k(Le,Ie){if(null!==Le&&"function"!=typeof Le)throw at.create("invalid-log-argument");(0,oe.Ey)(Le,Ie)}function H(Le){(0,oe.He)(Le)}const ne="firebase-heartbeat-database",ie=1,Re="firebase-heartbeat-store";let ct=null;function jt(){return ct||(ct=function Te(Le,Ie,{blocked:We,upgrade:ht,blocking:$t,terminated:nn}={}){const fn=indexedDB.open(Le,Ie),Cn=Ae(fn);return ht&&fn.addEventListener("upgradeneeded",er=>{ht(Ae(fn.result),er.oldVersion,er.newVersion,Ae(fn.transaction),er)}),We&&fn.addEventListener("blocked",er=>We(er.oldVersion,er.newVersion,er)),Cn.then(er=>{nn&&er.addEventListener("close",()=>nn()),$t&&er.addEventListener("versionchange",me=>$t(me.oldVersion,me.newVersion,me))}).catch(()=>{}),Cn}(ne,ie,{upgrade:(Le,Ie)=>{if(0===Ie)try{Le.createObjectStore(Re)}catch(We){console.warn(We)}}}).catch(Le=>{throw at.create("idb-open",{originalErrorMessage:Le.message})})),ct}function pt(){return(pt=(0,I.A)(function*(Le){try{const We=(yield jt()).transaction(Re),ht=yield We.objectStore(Re).get(oi(Le));return yield We.done,ht}catch(Ie){if(Ie instanceof q.g)Jn.warn(Ie.message);else{const We=at.create("idb-get",{originalErrorMessage:Ie?.message});Jn.warn(We.message)}}})).apply(this,arguments)}function Un(Le,Ie){return wt.apply(this,arguments)}function wt(){return(wt=(0,I.A)(function*(Le,Ie){try{const ht=(yield jt()).transaction(Re,"readwrite");yield ht.objectStore(Re).put(Ie,oi(Le)),yield ht.done}catch(We){if(We instanceof q.g)Jn.warn(We.message);else{const ht=at.create("idb-set",{originalErrorMessage:We?.message});Jn.warn(ht.message)}}})).apply(this,arguments)}function oi(Le){return`${Le.name}!${Le.options.appId}`}class Cr{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new xr(We),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Ie=this;return(0,I.A)(function*(){var We,ht;try{const nn=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=ui();return null==(null===(We=Ie._heartbeatsCache)||void 0===We?void 0:We.heartbeats)&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise,null==(null===(ht=Ie._heartbeatsCache)||void 0===ht?void 0:ht.heartbeats))||Ie._heartbeatsCache.lastSentHeartbeatDate===fn||Ie._heartbeatsCache.heartbeats.some(Cn=>Cn.date===fn)?void 0:(Ie._heartbeatsCache.heartbeats.push({date:fn,agent:nn}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Cn=>{const er=new Date(Cn.date).valueOf();return Date.now()-er<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache))}catch($t){Jn.warn($t)}})()}getHeartbeatsHeader(){var Ie=this;return(0,I.A)(function*(){var We;try{if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null==(null===(We=Ie._heartbeatsCache)||void 0===We?void 0:We.heartbeats)||0===Ie._heartbeatsCache.heartbeats.length)return"";const ht=ui(),{heartbeatsToSend:$t,unsentEntries:nn}=function Hr(Le,Ie=1024){const We=[];let ht=Le.slice();for(const $t of Le){const nn=We.find(fn=>fn.agent===$t.agent);if(nn){if(nn.dates.push($t.date),rn(We)>Ie){nn.dates.pop();break}}else if(We.push({agent:$t.agent,dates:[$t.date]}),rn(We)>Ie){We.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:We,unsentEntries:ht}}(Ie._heartbeatsCache.heartbeats),fn=(0,q.Uj)(JSON.stringify({version:2,heartbeats:$t}));return Ie._heartbeatsCache.lastSentHeartbeatDate=ht,nn.length>0?(Ie._heartbeatsCache.heartbeats=nn,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),fn}catch(ht){return Jn.warn(ht),""}})()}}function ui(){return(new Date).toISOString().substring(0,10)}class xr{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.A)(function*(){return!!(0,q.zW)()&&(0,q.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,I.A)(function*(){if(yield Ie._canUseIndexedDBPromise){const ht=yield function vt(Le){return pt.apply(this,arguments)}(Ie.app);return ht?.heartbeats?ht:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ie){var We=this;return(0,I.A)(function*(){var ht;if(yield We._canUseIndexedDBPromise){const nn=yield We.read();return Un(We.app,{lastSentHeartbeatDate:null!==(ht=Ie.lastSentHeartbeatDate)&&void 0!==ht?ht:nn.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var We=this;return(0,I.A)(function*(){var ht;if(yield We._canUseIndexedDBPromise){const nn=yield We.read();return Un(We.app,{lastSentHeartbeatDate:null!==(ht=Ie.lastSentHeartbeatDate)&&void 0!==ht?ht:nn.lastSentHeartbeatDate,heartbeats:[...nn.heartbeats,...Ie.heartbeats]})}})()}}function rn(Le){return(0,q.Uj)(JSON.stringify({version:2,heartbeats:Le})).length}!function as(Le){Ce(new Y.uA("platform-logger",Ie=>new Zt(Ie),"PRIVATE")),Ce(new Y.uA("heartbeat",Ie=>new Cr(Ie),"PRIVATE")),z(pn,lr,Le),z(pn,lr,"esm2017"),z("fire-js","")}("")},1362:(Rt,Ue,U)=>{U.d(Ue,{h1:()=>je,uA:()=>oe});var I=U(467),Y=U(1076);class oe{constructor(J,Z,pe){this.name=J,this.instanceFactory=Z,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const q="[DEFAULT]";class fe{constructor(J,Z){this.name=J,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const Z=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(Z)){const pe=new Y.cY;if(this.instancesDeferred.set(Z,pe),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:Z});Ke&&pe.resolve(Ke)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(J){var Z;const pe=this.normalizeInstanceIdentifier(J?.identifier),Ke=null!==(Z=J?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(qe){if(Ke)return null;throw qe}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function _e(Se){return"EAGER"===Se.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:q})}catch{}for(const[Z,pe]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(Z);try{const qe=this.getOrInitializeService({instanceIdentifier:Ke});pe.resolve(qe)}catch{}}}}clearInstance(J=q){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,I.A)(function*(){const Z=Array.from(J.instances.values());yield Promise.all([...Z.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...Z.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=q){return this.instances.has(J)}getOptions(J=q){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:Z={}}=J,pe=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:pe,options:Z});for(const[qe,_t]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(qe)&&_t.resolve(Ke);return Ke}onInit(J,Z){var pe;const Ke=this.normalizeInstanceIdentifier(Z),qe=null!==(pe=this.onInitCallbacks.get(Ke))&&void 0!==pe?pe:new Set;qe.add(J),this.onInitCallbacks.set(Ke,qe);const _t=this.instances.get(Ke);return _t&&J(_t,Ke),()=>{qe.delete(J)}}invokeOnInitCallbacks(J,Z){const pe=this.onInitCallbacks.get(Z);if(pe)for(const Ke of pe)try{Ke(J,Z)}catch{}}getOrInitializeService({instanceIdentifier:J,options:Z={}}){let pe=this.instances.get(J);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=J,Se===q?void 0:Se),options:Z}),this.instances.set(J,pe),this.instancesOptions.set(J,Z),this.invokeOnInitCallbacks(pe,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,pe)}catch{}var Se;return pe||null}normalizeInstanceIdentifier(J=q){return this.component?this.component.multipleInstances?J:q:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const Z=this.getProvider(J.name);if(Z.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);Z.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const Z=new fe(J,this);return this.providers.set(J,Z),Z}getProviders(){return Array.from(this.providers.values())}}},8041:(Rt,Ue,U)=>{U.d(Ue,{$b:()=>Y,Ey:()=>Se,He:()=>je,Vy:()=>_e});const I=[];var Y=function(J){return J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",J}(Y||{});const oe={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},q=Y.INFO,fe={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},le=(J,Z,...pe)=>{if(Z<J.logLevel)return;const Ke=(new Date).toISOString(),qe=fe[Z];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[qe](`[${Ke}]  ${J.name}:`,...pe)};class _e{constructor(Z){this.name=Z,this._logLevel=q,this._logHandler=le,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in Y))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?oe[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...Z),this._logHandler(this,Y.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...Z),this._logHandler(this,Y.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...Z),this._logHandler(this,Y.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...Z),this._logHandler(this,Y.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...Z),this._logHandler(this,Y.ERROR,...Z)}}function je(J){I.forEach(Z=>{Z.setLogLevel(J)})}function Se(J,Z){for(const pe of I){let Ke=null;Z&&Z.level&&(Ke=oe[Z.level]),pe.userLogHandler=null===J?null:(qe,_t,...it)=>{const yt=it.map(lt=>{if(null==lt)return null;if("string"==typeof lt)return lt;if("number"==typeof lt||"boolean"==typeof lt)return lt.toString();if(lt instanceof Error)return lt.message;try{return JSON.stringify(lt)}catch{return null}}).filter(lt=>lt).join(" ");_t>=(Ke??qe.logLevel)&&J({level:Y[_t].toLowerCase(),message:yt,args:it,type:qe.name})}}}},7935:(Rt,Ue,U)=>{U.d(Ue,{A:()=>I.A});var I=U(3345);I.A.registerVersion("firebase","10.14.0","app-compat")},7955:(Rt,Ue,U)=>{var I=U(467),Y=U(3345),oe=U(7852),q=U(1076),fe=U(8041),le=U(1635),_e=U(1362);const Se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const _t=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},it=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new q.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bt=new fe.Vy("@firebase/auth");function Ae(m,...l){Bt.logLevel<=fe.$b.ERROR&&Bt.error(`Auth (${oe.SDK_VERSION}): ${m}`,...l)}function ze(m,...l){throw xt(m,...l)}function Te(m,...l){return xt(m,...l)}function et(m,l,h){const y=Object.assign(Object.assign({},it()),{[l]:h});return new q.FA("auth","Firebase",y).create(l,{appName:m.name})}function Qe(m){return et(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ft(m,l,h){if(!(l instanceof h))throw h.name!==l.constructor.name&&ze(m,"argument-error"),et(m,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(m,...l){if("string"!=typeof m){const h=l[0],y=[...l.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(h,...y)}return yt.create(m,...l)}function Be(m,l,...h){if(!m)throw xt(l,...h)}function Zt(m){const l="INTERNAL ASSERTION FAILED: "+m;throw Ae(l),new Error(l)}function Fn(m,l){m||Zt(l)}function pn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function lr(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class de{constructor(l,h){this.shortDelay=l,this.longDelay=h,Fn(h>l,"Short delay should be less than long delay!"),this.isMobile=(0,q.jZ)()||(0,q.lV)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lr()||(0,q.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function we(m,l){Fn(m.emulator,"Emulator should always be set here");const{url:h}=m.emulator;return l?`${h}${l.startsWith("/")?l.slice(1):l}`:h}class ke{static initialize(l,h,y){this.fetchImpl=l,h&&(this.headersImpl=h),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new de(3e4,6e4);function Ye(m,l){return m.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:m.tenantId}):l}function ae(m,l,h,y){return mt.apply(this,arguments)}function mt(){return(mt=(0,I.A)(function*(m,l,h,y,M={}){return mr(m,M,(0,I.A)(function*(){let B={},re={};y&&("GET"===l?re=y:B={body:JSON.stringify(y)});const Ee=(0,q.Am)(Object.assign({key:m.config.apiKey},re)).slice(1),He=yield m._getAdditionalHeaders();He["Content-Type"]="application/json",m.languageCode&&(He["X-Firebase-Locale"]=m.languageCode);const Et=Object.assign({method:l,headers:He},B);return(0,q.c1)()||(Et.referrerPolicy="no-referrer"),ke.fetch()($r(m,m.config.apiHost,h,Ee),Et)}))})).apply(this,arguments)}function mr(m,l,h){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,I.A)(function*(m,l,h){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},Ne),l);try{const M=new ir(m),B=yield Promise.race([h(),M.promise]);M.clearNetworkTimeout();const re=yield B.json();if("needConfirmation"in re)throw Dn(m,"account-exists-with-different-credential",re);if(B.ok&&!("errorMessage"in re))return re;{const Ee=B.ok?re.errorMessage:re.error.message,[He,Et]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw Dn(m,"credential-already-in-use",re);if("EMAIL_EXISTS"===He)throw Dn(m,"email-already-in-use",re);if("USER_DISABLED"===He)throw Dn(m,"user-disabled",re);const Ot=y[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw et(m,Ot,Et);ze(m,Ot)}}catch(M){if(M instanceof q.g)throw M;ze(m,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Mt(m,l,h,y){return tn.apply(this,arguments)}function tn(){return(tn=(0,I.A)(function*(m,l,h,y,M={}){const B=yield ae(m,l,h,y,M);return"mfaPendingCredential"in B&&ze(m,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function $r(m,l,h,y){const M=`${l}${h}?${y}`;return m.config.emulator?we(m.config,M):`${m.config.apiScheme}://${M}`}function gn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ir{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((h,y)=>{this.timer=setTimeout(()=>y(Te(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dn(m,l,h){const y={appName:m.name};h.email&&(y.email=h.email),h.phoneNumber&&(y.phoneNumber=h.phoneNumber);const M=Te(m,l,y);return M.customData._tokenResponse=h,M}function Nt(m){return void 0!==m&&void 0!==m.getResponse}function Er(m){return void 0!==m&&void 0!==m.enterprise}class ss{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===l)return gn(h.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Ei(){return(Ei=(0,I.A)(function*(m){return(yield ae(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Vr(m,l){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,I.A)(function*(m,l){return ae(m,"GET","/v2/recaptchaConfig",Ye(m,l))})).apply(this,arguments)}function hn(){return(hn=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function pr(){return(pr=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Sn(m,l){return or.apply(this,arguments)}function or(){return(or=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function dn(m){if(m)try{const l=new Date(Number(m));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function Ce(){return(Ce=(0,I.A)(function*(m,l=!1){const h=(0,q.Ku)(m),y=yield h.getIdToken(l),M=Wt(y);Be(M&&M.exp&&M.auth_time&&M.iat,h.auth,"internal-error");const B="object"==typeof M.firebase?M.firebase:void 0,re=B?.sign_in_provider;return{claims:M,token:y,authTime:dn(zn(M.auth_time)),issuedAtTime:dn(zn(M.iat)),expirationTime:dn(zn(M.exp)),signInProvider:re||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(m){return 1e3*Number(m)}function Wt(m){const[l,h,y]=m.split(".");if(void 0===l||void 0===h||void 0===y)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,q.u)(h);return M?JSON.parse(M):(Ae("Failed to decode base64 JWT payload"),null)}catch(M){return Ae("Caught error parsing JWT payload as JSON",M?.toString()),null}}function ii(m){const l=Wt(m);return Be(l,"internal-error"),Be(typeof l.exp<"u","internal-error"),Be(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function rt(m,l){return St.apply(this,arguments)}function St(){return(St=(0,I.A)(function*(m,l,h=!1){if(h)return l;try{return yield l}catch(y){throw y instanceof q.g&&function ji({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class at{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var h;if(l){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(l=!1){var h=this;if(!this.isRunning)return;const y=this.getInterval(l);this.timerId=setTimeout((0,I.A)(function*(){yield h.iteration()}),y)}iteration(){var l=this;return(0,I.A)(function*(){try{yield l.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&l.schedule(!0))}l.schedule()})()}}class xe{constructor(l,h){this.createdAt=l,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xe(m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,I.A)(function*(m){var l;const h=m.auth,y=yield m.getIdToken(),M=yield rt(m,Sn(h,{idToken:y}));Be(M?.users.length,h,"internal-error");const B=M.users[0];m._notifyReloadListener(B);const re=null!==(l=B.providerUserInfo)&&void 0!==l&&l.length?$i(B.providerUserInfo):[],Ee=function Ti(m,l){return[...m.filter(y=>!l.some(M=>M.providerId===y.providerId)),...l]}(m.providerData,re),Ot=!!m.isAnonymous&&!(m.email&&B.passwordHash||Ee?.length),Vt={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ee,metadata:new xe(B.createdAt,B.lastLoginAt),isAnonymous:Ot};Object.assign(m,Vt)})).apply(this,arguments)}function si(){return(si=(0,I.A)(function*(m){const l=(0,q.Ku)(m);yield Xe(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function $i(m){return m.map(l=>{var{providerId:h}=l,y=(0,le.Tt)(l,["providerId"]);return{providerId:h,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Ge(){return(Ge=(0,I.A)(function*(m,l){const h=yield mr(m,{},(0,I.A)(function*(){const y=(0,q.Am)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:M,apiKey:B}=m.config,re=$r(m,M,"/v1/token",`key=${B}`),Ee=yield m._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",ke.fetch()(re,{method:"POST",headers:Ee,body:y})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function k(){return(k=(0,I.A)(function*(m,l){return ae(m,"POST","/v2/accounts:revokeToken",Ye(m,l))})).apply(this,arguments)}class H{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){Be(l.idToken,"internal-error"),Be(typeof l.idToken<"u","internal-error"),Be(typeof l.refreshToken<"u","internal-error");const h="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):ii(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,h)}updateFromIdToken(l){Be(0!==l.length,"internal-error");const h=ii(l);this.updateTokensAndExpiration(l,null,h)}getToken(l,h=!1){var y=this;return(0,I.A)(function*(){return h||!y.accessToken||y.isExpired?(Be(y.refreshToken,l,"user-token-expired"),y.refreshToken?(yield y.refresh(l,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,h){var y=this;return(0,I.A)(function*(){const{accessToken:M,refreshToken:B,expiresIn:re}=yield function Hi(m,l){return Ge.apply(this,arguments)}(l,h);y.updateTokensAndExpiration(M,B,Number(re))})()}updateTokensAndExpiration(l,h,y){this.refreshToken=h||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(l,h){const{refreshToken:y,accessToken:M,expirationTime:B}=h,re=new H;return y&&(Be("string"==typeof y,"internal-error",{appName:l}),re.refreshToken=y),M&&(Be("string"==typeof M,"internal-error",{appName:l}),re.accessToken=M),B&&(Be("number"==typeof B,"internal-error",{appName:l}),re.expirationTime=B),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new H,this.toJSON())}_performRefresh(){return Zt("not implemented")}}function ne(m,l){Be("string"==typeof m||typeof m>"u","internal-error",{appName:l})}class ie{constructor(l){var{uid:h,auth:y,stsTokenManager:M}=l,B=(0,le.Tt)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new at(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new xe(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(l){var h=this;return(0,I.A)(function*(){const y=yield rt(h,h.stsTokenManager.getToken(h.auth,l));return Be(y,h.auth,"internal-error"),h.accessToken!==y&&(h.accessToken=y,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),y})()}getIdTokenResult(l){return function So(m){return Ce.apply(this,arguments)}(this,l)}reload(){return function os(m){return si.apply(this,arguments)}(this)}_assign(l){this!==l&&(Be(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(h=>Object.assign({},h)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const h=new ie(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(l){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,h=!1){var y=this;return(0,I.A)(function*(){let M=!1;l.idToken&&l.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(l),M=!0),h&&(yield Xe(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var l=this;return(0,I.A)(function*(){if((0,oe._isFirebaseServerApp)(l.auth.app))return Promise.reject(Qe(l.auth));const h=yield l.getIdToken();return yield rt(l,function qt(m,l){return hn.apply(this,arguments)}(l.auth,{idToken:h})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,h){var y,M,B,re,Ee,He,Et,Ot;const Vt=null!==(y=h.displayName)&&void 0!==y?y:void 0,Mr=null!==(M=h.email)&&void 0!==M?M:void 0,ts=null!==(B=h.phoneNumber)&&void 0!==B?B:void 0,Zc=null!==(re=h.photoURL)&&void 0!==re?re:void 0,yo=null!==(Ee=h.tenantId)&&void 0!==Ee?Ee:void 0,dd=null!==(He=h._redirectEventId)&&void 0!==He?He:void 0,el=null!==(Et=h.createdAt)&&void 0!==Et?Et:void 0,Yf=null!==(Ot=h.lastLoginAt)&&void 0!==Ot?Ot:void 0,{uid:hd,emailVerified:tl,isAnonymous:fd,providerData:nl,stsTokenManager:rl}=h;Be(hd&&rl,l,"internal-error");const pd=H.fromJSON(this.name,rl);Be("string"==typeof hd,l,"internal-error"),ne(Vt,l.name),ne(Mr,l.name),Be("boolean"==typeof tl,l,"internal-error"),Be("boolean"==typeof fd,l,"internal-error"),ne(ts,l.name),ne(Zc,l.name),ne(yo,l.name),ne(dd,l.name),ne(el,l.name),ne(Yf,l.name);const yu=new ie({uid:hd,auth:l,email:Mr,emailVerified:tl,displayName:Vt,isAnonymous:fd,photoURL:Zc,phoneNumber:ts,tenantId:yo,stsTokenManager:pd,createdAt:el,lastLoginAt:Yf});return nl&&Array.isArray(nl)&&(yu.providerData=nl.map(vu=>Object.assign({},vu))),dd&&(yu._redirectEventId=dd),yu}static _fromIdTokenResponse(l,h,y=!1){return(0,I.A)(function*(){const M=new H;M.updateFromServerResponse(h);const B=new ie({uid:h.localId,auth:l,stsTokenManager:M,isAnonymous:y});return yield Xe(B),B})()}static _fromGetAccountInfoResponse(l,h,y){return(0,I.A)(function*(){const M=h.users[0];Be(void 0!==M.localId,"internal-error");const B=void 0!==M.providerUserInfo?$i(M.providerUserInfo):[],re=!(M.email&&M.passwordHash||B?.length),Ee=new H;Ee.updateFromIdToken(y);const He=new ie({uid:M.localId,auth:l,stsTokenManager:Ee,isAnonymous:re}),Et={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:B,metadata:new xe(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash||B?.length)};return Object.assign(He,Et),He})()}}const Re=new Map;function ct(m){Fn(m instanceof Function,"Expected a class definition");let l=Re.get(m);return l?(Fn(l instanceof m,"Instance stored in cache mismatched with class"),l):(l=new m,Re.set(m,l),l)}const vt=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.A)(function*(){return!0})()}_set(h,y){var M=this;return(0,I.A)(function*(){M.storage[h]=y})()}_get(h){var y=this;return(0,I.A)(function*(){const M=y.storage[h];return void 0===M?null:M})()}_remove(h){var y=this;return(0,I.A)(function*(){delete y.storage[h]})()}_addListener(h,y){}_removeListener(h,y){}}return m.type="NONE",m})();function pt(m,l,h){return`firebase:${m}:${l}:${h}`}class Un{constructor(l,h,y){this.persistence=l,this.auth=h,this.userKey=y;const{config:M,name:B}=this.auth;this.fullUserKey=pt(this.userKey,M.apiKey,B),this.fullPersistenceKey=pt("persistence",M.apiKey,B),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,I.A)(function*(){const h=yield l.persistence._get(l.fullUserKey);return h?ie._fromJSON(l.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var h=this;return(0,I.A)(function*(){if(h.persistence===l)return;const y=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=l,y?h.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,h,y="authUser"){return(0,I.A)(function*(){if(!h.length)return new Un(ct(vt),l,y);const M=(yield Promise.all(h.map(function(){var Et=(0,I.A)(function*(Ot){if(yield Ot._isAvailable())return Ot});return function(Ot){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let B=M[0]||ct(vt);const re=pt(y,l.config.apiKey,l.name);let Ee=null;for(const Et of h)try{const Ot=yield Et._get(re);if(Ot){const Vt=ie._fromJSON(l,Ot);Et!==B&&(Ee=Vt),B=Et;break}}catch{}const He=M.filter(Et=>Et._shouldAllowMigration);return B._shouldAllowMigration&&He.length?(B=He[0],Ee&&(yield B._set(re,Ee.toJSON())),yield Promise.all(h.map(function(){var Et=(0,I.A)(function*(Ot){if(Ot!==B)try{yield Ot._remove(re)}catch{}});return function(Ot){return Et.apply(this,arguments)}}())),new Un(B,l,y)):new Un(B,l,y)})()}}function wt(m){const l=m.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(Cr(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(oi(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Hr(l))return"Blackberry";if(xr(l))return"Webos";if(kn(l))return"Safari";if((l.includes("chrome/")||It(l))&&!l.includes("edge/"))return"Chrome";if(ui(l))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function oi(m=(0,q.ZQ)()){return/firefox\//i.test(m)}function kn(m=(0,q.ZQ)()){const l=m.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function It(m=(0,q.ZQ)()){return/crios\//i.test(m)}function Cr(m=(0,q.ZQ)()){return/iemobile/i.test(m)}function ui(m=(0,q.ZQ)()){return/android/i.test(m)}function Hr(m=(0,q.ZQ)()){return/blackberry/i.test(m)}function xr(m=(0,q.ZQ)()){return/webos/i.test(m)}function rn(m=(0,q.ZQ)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function We(m=(0,q.ZQ)()){return rn(m)||ui(m)||xr(m)||Hr(m)||/windows phone/i.test(m)||Cr(m)}function ht(m,l=[]){let h;switch(m){case"Browser":h=wt((0,q.ZQ)());break;case"Worker":h=`${wt((0,q.ZQ)())}-${m}`;break;default:h=m}const y=l.length?l.join(","):"FirebaseCore-web";return`${h}/JsCore/${oe.SDK_VERSION}/${y}`}class $t{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,h){const y=B=>new Promise((re,Ee)=>{try{re(l(B))}catch(He){Ee(He)}});y.onAbort=h,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(l){var h=this;return(0,I.A)(function*(){if(h.auth.currentUser===l)return;const y=[];try{for(const M of h.queue)yield M(l),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const B of y)try{B()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function fn(){return(fn=(0,I.A)(function*(m,l={}){return ae(m,"GET","/v2/passwordPolicy",Ye(m,l))})).apply(this,arguments)}class er{constructor(l){var h,y,M,B;const re=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=re.minPasswordLength)&&void 0!==h?h:6,re.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=re.maxPasswordLength),void 0!==re.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=re.containsLowercaseCharacter),void 0!==re.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=re.containsUppercaseCharacter),void 0!==re.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=re.containsNumericCharacter),void 0!==re.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=re.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=l.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(B=l.forceUpgradeOnSignin)&&void 0!==B&&B,this.schemaVersion=l.schemaVersion}validatePassword(l){var h,y,M,B,re,Ee;const He={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,He),this.validatePasswordCharacterOptions(l,He),He.isValid&&(He.isValid=null===(h=He.meetsMinPasswordLength)||void 0===h||h),He.isValid&&(He.isValid=null===(y=He.meetsMaxPasswordLength)||void 0===y||y),He.isValid&&(He.isValid=null===(M=He.containsLowercaseLetter)||void 0===M||M),He.isValid&&(He.isValid=null===(B=He.containsUppercaseLetter)||void 0===B||B),He.isValid&&(He.isValid=null===(re=He.containsNumericCharacter)||void 0===re||re),He.isValid&&(He.isValid=null===(Ee=He.containsNonAlphanumericCharacter)||void 0===Ee||Ee),He}validatePasswordLengthOptions(l,h){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(h.meetsMinPasswordLength=l.length>=y),M&&(h.meetsMaxPasswordLength=l.length<=M)}validatePasswordCharacterOptions(l,h){let y;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let M=0;M<l.length;M++)y=l.charAt(M),this.updatePasswordCharacterOptionsStatuses(h,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(l,h,y,M,B){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=B))}}class me{constructor(l,h,y,M){this.app=l,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xr(this),this.idTokenSubscription=new Xr(this),this.beforeStateQueue=new $t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(l,h){var y=this;return h&&(this._popupRedirectResolver=ct(h)),this._initializationPromise=this.queue((0,I.A)(function*(){var M,B;if(!y._deleted&&(y.persistenceManager=yield Un.create(y,l),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(h),y.lastNotifiedUid=(null===(B=y.currentUser)||void 0===B?void 0:B.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,I.A)(function*(){if(l._deleted)return;const h=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||h){if(l.currentUser&&h&&l.currentUser.uid===h.uid)return l._currentUser._assign(h),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(l){var h=this;return(0,I.A)(function*(){try{const y=yield Sn(h,{idToken:l}),M=yield ie._fromGetAccountInfoResponse(h,y,l);yield h.directlySetCurrentUser(M)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var h=this;return(0,I.A)(function*(){var y;if((0,oe._isFirebaseServerApp)(h.app)){const Ee=h.app.settings.authIdToken;return Ee?new Promise(He=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Ee).then(He,He))}):h.directlySetCurrentUser(null)}const M=yield h.assertedPersistence.getCurrentUser();let B=M,re=!1;if(l&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Ee=null===(y=h.redirectUser)||void 0===y?void 0:y._redirectEventId,He=B?._redirectEventId,Et=yield h.tryRedirectSignIn(l);(!Ee||Ee===He)&&Et?.user&&(B=Et.user,re=!0)}if(!B)return h.directlySetCurrentUser(null);if(!B._redirectEventId){if(re)try{yield h.beforeStateQueue.runMiddleware(B)}catch(Ee){B=M,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Ee))}return B?h.reloadAndSetCurrentUserOrClear(B):h.directlySetCurrentUser(null)}return Be(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===B._redirectEventId?h.directlySetCurrentUser(B):h.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(l){var h=this;return(0,I.A)(function*(){let y=null;try{y=yield h._popupRedirectResolver._completeRedirectFn(h,l,!0)}catch{yield h._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(l){var h=this;return(0,I.A)(function*(){try{yield Xe(l)}catch(y){if("auth/network-request-failed"!==y?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function Xt(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var l=this;return(0,I.A)(function*(){l._deleted=!0})()}updateCurrentUser(l){var h=this;return(0,I.A)(function*(){if((0,oe._isFirebaseServerApp)(h.app))return Promise.reject(Qe(h));const y=l?(0,q.Ku)(l):null;return y&&Be(y.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(y&&y._clone(h))})()}_updateCurrentUser(l,h=!1){var y=this;return(0,I.A)(function*(){if(!y._deleted)return l&&Be(y.tenantId===l.tenantId,y,"tenant-id-mismatch"),h||(yield y.beforeStateQueue.runMiddleware(l)),y.queue((0,I.A)(function*(){yield y.directlySetCurrentUser(l),y.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,I.A)(function*(){return(0,oe._isFirebaseServerApp)(l.app)?Promise.reject(Qe(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var h=this;return(0,oe._isFirebaseServerApp)(this.app)?Promise.reject(Qe(this)):this.queue((0,I.A)(function*(){yield h.assertedPersistence.setPersistence(ct(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var h=this;return(0,I.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const y=h._getPasswordPolicyInternal();return y.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,I.A)(function*(){const h=yield function nn(m){return fn.apply(this,arguments)}(l),y=new er(h);null===l.tenantId?l._projectPasswordPolicy=y:l._tenantPasswordPolicies[l.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new q.FA("auth","Firebase",l())}onAuthStateChanged(l,h,y){return this.registerStateListener(this.authStateSubscription,l,h,y)}beforeAuthStateChanged(l,h){return this.beforeStateQueue.pushCallback(l,h)}onIdTokenChanged(l,h,y){return this.registerStateListener(this.idTokenSubscription,l,h,y)}authStateReady(){return new Promise((l,h)=>{if(this.currentUser)l();else{const y=this.onAuthStateChanged(()=>{y(),l()},h)}})}revokeAccessToken(l){var h=this;return(0,I.A)(function*(){if(h.currentUser){const y=yield h.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:y};null!=h.tenantId&&(M.tenantId=h.tenantId),yield function z(m,l){return k.apply(this,arguments)}(h,M)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,h){var y=this;return(0,I.A)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(h);return null===l?M.removeCurrentUser():M.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var h=this;return(0,I.A)(function*(){if(!h.redirectPersistenceManager){const y=l&&ct(l)||h._popupRedirectResolver;Be(y,h,"argument-error"),h.redirectPersistenceManager=yield Un.create(h,[ct(y._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(l){var h=this;return(0,I.A)(function*(){var y,M;return h._isInitialized&&(yield h.queue((0,I.A)(function*(){}))),(null===(y=h._currentUser)||void 0===y?void 0:y._redirectEventId)===l?h._currentUser:(null===(M=h.redirectUser)||void 0===M?void 0:M._redirectEventId)===l?h.redirectUser:null})()}_persistUserIfCurrent(l){var h=this;return(0,I.A)(function*(){if(l===h.currentUser)return h.queue((0,I.A)(function*(){return h.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(h=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,h,y,M){if(this._deleted)return()=>{};const B="function"==typeof h?h:h.next.bind(h);let re=!1;const Ee=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(Ee,this,"internal-error"),Ee.then(()=>{re||B(this.currentUser)}),"function"==typeof h){const He=l.addObserver(h,y,M);return()=>{re=!0,He()}}{const He=l.addObserver(h);return()=>{re=!0,He()}}}directlySetCurrentUser(l){var h=this;return(0,I.A)(function*(){h.currentUser&&h.currentUser!==l&&h._currentUser._stopProactiveRefresh(),l&&h.isProactiveRefreshEnabled&&l._startProactiveRefresh(),h.currentUser=l,l?yield h.assertedPersistence.setCurrentUser(l):yield h.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,I.A)(function*(){var h;const y={"X-Client-Version":l.clientVersion};l.app.options.appId&&(y["X-Firebase-gmpid"]=l.app.options.appId);const M=yield null===(h=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const B=yield l._getAppCheckToken();return B&&(y["X-Firebase-AppCheck"]=B),y})()}_getAppCheckToken(){var l=this;return(0,I.A)(function*(){var h;const y=yield null===(h=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return y?.error&&function Ft(m,...l){Bt.logLevel<=fe.$b.WARN&&Bt.warn(`Auth (${oe.SDK_VERSION}): ${m}`,...l)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function vn(m){return(0,q.Ku)(m)}class Xr{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,q.tD)(h=>this.observer=h)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zi={loadJS:()=>(0,I.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gi(m){return zi.loadJS(m)}function Ns(m){return`__${m}${Math.floor(1e6*Math.random())}`}class Wi{constructor(l){this.type="recaptcha-enterprise",this.auth=vn(l)}verify(l="verify",h=!1){var y=this;return(0,I.A)(function*(){function B(){return B=(0,I.A)(function*(Ee){if(!h){if(null==Ee.tenantId&&null!=Ee._agentRecaptchaConfig)return Ee._agentRecaptchaConfig.siteKey;if(null!=Ee.tenantId&&void 0!==Ee._tenantRecaptchaConfigs[Ee.tenantId])return Ee._tenantRecaptchaConfigs[Ee.tenantId].siteKey}return new Promise(function(){var He=(0,I.A)(function*(Et,Ot){Vr(Ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Vt=>{if(void 0!==Vt.recaptchaKey){const Mr=new ss(Vt);return null==Ee.tenantId?Ee._agentRecaptchaConfig=Mr:Ee._tenantRecaptchaConfigs[Ee.tenantId]=Mr,Et(Mr.siteKey)}Ot(new Error("recaptcha Enterprise site key undefined"))}).catch(Vt=>{Ot(Vt)})});return function(Et,Ot){return He.apply(this,arguments)}}())}),B.apply(this,arguments)}function re(Ee,He,Et){const Ot=window.grecaptcha;Er(Ot)?Ot.enterprise.ready(()=>{Ot.enterprise.execute(Ee,{action:l}).then(Vt=>{He(Vt)}).catch(()=>{He("NO_RECAPTCHA")})}):Et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ee,He)=>{(function M(Ee){return B.apply(this,arguments)})(y.auth).then(Et=>{if(!h&&Er(window.grecaptcha))re(Et,Ee,He);else{if(typeof window>"u")return void He(new Error("RecaptchaVerifier is only supported in browser"));let Ot=function ia(){return zi.recaptchaEnterpriseScript}();0!==Ot.length&&(Ot+=Et),Gi(Ot).then(()=>{re(Et,Ee,He)}).catch(Vt=>{He(Vt)})}}).catch(Et=>{He(Et)})})})()}}function zr(m,l,h){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,I.A)(function*(m,l,h,y=!1){const M=new Wi(m);let B;try{B=yield M.verify(h)}catch{B=yield M.verify(h,!0)}const re=Object.assign({},l);return Object.assign(re,y?{captchaResp:B}:{captchaResponse:B}),Object.assign(re,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(re,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),re})).apply(this,arguments)}function wi(m,l,h,y){return sa.apply(this,arguments)}function sa(){return sa=(0,I.A)(function*(m,l,h,y){var M;if(null!==(M=m._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const B=yield zr(m,l,h,"getOobCode"===h);return y(m,B)}return y(m,l).catch(function(){var B=(0,I.A)(function*(re){if("auth/missing-recaptcha-token"===re.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Ee=yield zr(m,l,h,"getOobCode"===h);return y(m,Ee)}return Promise.reject(re)});return function(re){return B.apply(this,arguments)}}())}),sa.apply(this,arguments)}function bo(m){const l=m.indexOf(":");return l<0?"":m.substr(0,l+1)}function Pu(m){if(!m)return null;const l=Number(m);return isNaN(l)?null:l}class xs{constructor(l,h){this.providerId=l,this.signInMethod=h}toJSON(){return Zt("not implemented")}_getIdTokenResponse(l){return Zt("not implemented")}_linkToIdToken(l,h){return Zt("not implemented")}_getReauthenticationResolver(l){return Zt("not implemented")}}function aa(m,l){return wn.apply(this,arguments)}function wn(){return(wn=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:resetPassword",Ye(m,l))})).apply(this,arguments)}function Jr(){return(Jr=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function to(m,l){return kr.apply(this,arguments)}function kr(){return(kr=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function no(){return(no=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:update",Ye(m,l))})).apply(this,arguments)}function ro(m,l){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPassword",Ye(m,l))})).apply(this,arguments)}function qi(m,l){return dr.apply(this,arguments)}function dr(){return(dr=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:sendOobCode",Ye(m,l))})).apply(this,arguments)}function cn(){return(cn=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function Bn(m,l){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function io(m,l){return br.apply(this,arguments)}function br(){return(br=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function tr(){return(tr=(0,I.A)(function*(m,l){return qi(m,l)})).apply(this,arguments)}function Ni(){return(Ni=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithEmailLink",Ye(m,l))})).apply(this,arguments)}function cs(){return(cs=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithEmailLink",Ye(m,l))})).apply(this,arguments)}class ks extends xs{constructor(l,h,y,M=null){super("password",y),this._email=l,this._password=h,this._tenantId=M}static _fromEmailAndPassword(l,h){return new ks(l,h,"password")}static _fromEmailAndCode(l,h,y=null){return new ks(l,h,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(l){var h=this;return(0,I.A)(function*(){switch(h.signInMethod){case"password":return wi(l,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ro);case"emailLink":return function sr(m,l){return Ni.apply(this,arguments)}(l,{email:h._email,oobCode:h._password});default:ze(l,"internal-error")}})()}_linkToIdToken(l,h){var y=this;return(0,I.A)(function*(){switch(y.signInMethod){case"password":return wi(l,{idToken:h,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",to);case"emailLink":return function Gt(m,l){return cs.apply(this,arguments)}(l,{idToken:h,email:y._email,oobCode:y._password});default:ze(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function mn(m,l){return ur.apply(this,arguments)}function ur(){return(ur=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithIdp",Ye(m,l))})).apply(this,arguments)}class sn extends xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const h=new sn(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(h.idToken=l.idToken),l.accessToken&&(h.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(h.nonce=l.nonce),l.pendingToken&&(h.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(h.accessToken=l.oauthToken,h.secret=l.oauthTokenSecret):ze("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M}=h,B=(0,le.Tt)(h,["providerId","signInMethod"]);if(!y||!M)return null;const re=new sn(y,M);return re.idToken=B.idToken||void 0,re.accessToken=B.accessToken||void 0,re.secret=B.secret,re.nonce=B.nonce,re.pendingToken=B.pendingToken||null,re}_getIdTokenResponse(l){return mn(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,mn(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,mn(l,h)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),l.postBody=(0,q.Am)(h)}return l}}function Ai(){return(Ai=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:sendVerificationCode",Ye(m,l))})).apply(this,arguments)}function Di(){return(Di=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,l))})).apply(this,arguments)}function qn(){return(qn=(0,I.A)(function*(m,l){const h=yield Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,l));if(h.temporaryProof)throw Dn(m,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const Ro={USER_NOT_FOUND:"user-not-found"};function hr(){return(hr=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithPhoneNumber",Ye(m,Object.assign(Object.assign({},l),{operation:"REAUTH"})),Ro)})).apply(this,arguments)}class ei extends xs{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,h){return new ei({verificationId:l,verificationCode:h})}static _fromTokenResponse(l,h){return new ei({phoneNumber:l,temporaryProof:h})}_getIdTokenResponse(l){return function Zr(m,l){return Di.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,h){return function ls(m,l){return qn.apply(this,arguments)}(l,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function on(m,l){return hr.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:h,verificationId:y,verificationCode:M}=this.params;return l&&h?{temporaryProof:l,phoneNumber:h}:{sessionInfo:y,code:M}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}=l;return y||h||M||B?new ei({verificationId:h,verificationCode:y,phoneNumber:M,temporaryProof:B}):null}}class Qi{constructor(l){var h,y,M,B,re,Ee;const He=(0,q.I9)((0,q.hp)(l)),Et=null!==(h=He.apiKey)&&void 0!==h?h:null,Ot=null!==(y=He.oobCode)&&void 0!==y?y:null,Vt=function Ls(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=He.mode)&&void 0!==M?M:null);Be(Et&&Ot&&Vt,"argument-error"),this.apiKey=Et,this.operation=Vt,this.code=Ot,this.continueUrl=null!==(B=He.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(re=He.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ee=He.tenantId)&&void 0!==Ee?Ee:null}static parseLink(l){const h=function Ci(m){const l=(0,q.I9)((0,q.hp)(m)).link,h=l?(0,q.I9)((0,q.hp)(l)).deep_link_id:null,y=(0,q.I9)((0,q.hp)(m)).deep_link_id;return(y?(0,q.I9)((0,q.hp)(y)).link:null)||y||h||l||m}(l);try{return new Qi(h)}catch{return null}}}let yi=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(h,y){return ks._fromEmailAndPassword(h,y)}static credentialWithLink(h,y){const M=Qi.parseLink(y);return Be(M,"argument-error"),ks._fromEmailAndCode(h,M.code,M.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Gn{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Vs extends Gn{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class nr extends Vs{static credentialFromJSON(l){const h="string"==typeof l?JSON.parse(l):l;return Be("providerId"in h&&"signInMethod"in h,"argument-error"),sn._fromParams(h)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return Be(l.idToken||l.accessToken,"argument-error"),sn._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return nr.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return nr.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:h,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:B,nonce:re,providerId:Ee}=l;if(!y&&!M&&!h&&!B||!Ee)return null;try{return new nr(Ee)._credential({idToken:h,accessToken:y,nonce:re,pendingToken:B})}catch{return null}}}let bn=(()=>{class m extends Vs{constructor(){super("facebook.com")}static credential(h){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),Is=(()=>{class m extends Vs{constructor(){super("google.com"),this.addScope("profile")}static credential(h,y){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:y,oauthAccessToken:M}=h;if(!y&&!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Fr=(()=>{class m extends Vs{constructor(){super("github.com")}static credential(h){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return m.credential(h.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class Wr extends xs{constructor(l,h){super(l,l),this.pendingToken=h}_getIdTokenResponse(l){return mn(l,this.buildRequest())}_linkToIdToken(l,h){const y=this.buildRequest();return y.idToken=h,mn(l,y)}_getReauthenticationResolver(l){const h=this.buildRequest();return h.autoCreate=!1,mn(l,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const h="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M,pendingToken:B}=h;return y&&M&&B&&y===M?new Wr(y,B):null}static _create(l,h){return new Wr(l,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends Gn{constructor(l){Be(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return Fs.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return Fs.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const h=Wr.fromJSON(l);return Be(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:h,providerId:y}=l;if(!h||!y)return null;try{return Wr._create(y,h)}catch{return null}}}let Us=(()=>{class m extends Vs{constructor(){super("twitter.com")}static credential(h,y){return sn._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:y})}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=h;if(!y||!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function so(m,l){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signUp",Ye(m,l))})).apply(this,arguments)}class Tr{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,h,y,M=!1){return(0,I.A)(function*(){const B=yield ie._fromIdTokenResponse(l,y,M),re=oo(y);return new Tr({user:B,providerId:re,_tokenResponse:y,operationType:h})})()}static _forOperation(l,h,y){return(0,I.A)(function*(){yield l._updateTokensIfNecessary(y,!0);const M=oo(y);return new Tr({user:l,providerId:M,_tokenResponse:y,operationType:h})})()}}function oo(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function ua(){return(ua=(0,I.A)(function*(m){var l;if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const h=vn(m);if(yield h._initializationPromise,null!==(l=h.currentUser)&&void 0!==l&&l.isAnonymous)return new Tr({user:h.currentUser,providerId:null,operationType:"signIn"});const y=yield so(h,{returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(h,"signIn",y,!0);return yield h._updateCurrentUser(M.user),M})).apply(this,arguments)}class Wn extends q.g{constructor(l,h,y,M){var B;super(h.code,h.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,Wn.prototype),this.customData={appName:l.name,tenantId:null!==(B=l.tenantId)&&void 0!==B?B:void 0,_serverResponse:h.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(l,h,y,M){return new Wn(l,h,y,M)}}function Ts(m,l,h,y){return("reauthenticate"===l?h._getReauthenticationResolver(m):h._getIdTokenResponse(m)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?Wn._fromErrorAndOperation(m,B,l,y):B})}function vc(m){return new Set(m.map(({providerId:l})=>l).filter(l=>!!l))}function Ic(){return Ic=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);yield Ka(!0,h,l);const{providerUserInfo:y}=yield function Kt(m,l){return pr.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[l]}),M=vc(y||[]);return h.providerData=h.providerData.filter(B=>M.has(B.providerId)),M.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Ic.apply(this,arguments)}function Ec(m,l){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,I.A)(function*(m,l,h=!1){const y=yield rt(m,l._linkToIdToken(m.auth,yield m.getIdToken()),h);return Tr._forOperation(m,"link",y)})).apply(this,arguments)}function Ka(m,l,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,I.A)(function*(m,l,h){yield Xe(l);const M=!1===m?"provider-already-linked":"no-such-provider";Be(vc(l.providerData).has(h)===m,l.auth,M)})).apply(this,arguments)}function qa(m,l){return rr.apply(this,arguments)}function rr(){return(rr=(0,I.A)(function*(m,l,h=!1){const{auth:y}=m;if((0,oe._isFirebaseServerApp)(y.app))return Promise.reject(Qe(y));const M="reauthenticate";try{const B=yield rt(m,Ts(y,M,l,m),h);Be(B.idToken,y,"internal-error");const re=Wt(B.idToken);Be(re,y,"internal-error");const{sub:Ee}=re;return Be(m.uid===Ee,y,"user-mismatch"),Tr._forOperation(m,M,B)}catch(B){throw"auth/user-not-found"===B?.code&&ze(y,"user-mismatch"),B}})).apply(this,arguments)}function Yi(m,l){return ds.apply(this,arguments)}function ds(){return(ds=(0,I.A)(function*(m,l,h=!1){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y="signIn",M=yield Ts(m,y,l),B=yield Tr._fromIdTokenResponse(m,y,M);return h||(yield m._updateCurrentUser(B.user)),B})).apply(this,arguments)}function ca(m,l){return vi.apply(this,arguments)}function vi(){return(vi=(0,I.A)(function*(m,l){return Yi(vn(m),l)})).apply(this,arguments)}function Oi(m,l){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);return yield Ka(!1,h,l.providerId),Ec(h,l)})).apply(this,arguments)}function Rn(m,l){return an.apply(this,arguments)}function an(){return(an=(0,I.A)(function*(m,l){return qa((0,q.Ku)(m),l)})).apply(this,arguments)}function qr(){return(qr=(0,I.A)(function*(m,l){return Mt(m,"POST","/v1/accounts:signInWithCustomToken",Ye(m,l))})).apply(this,arguments)}function No(){return No=(0,I.A)(function*(m,l){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const h=vn(m),y=yield function Xi(m,l){return qr.apply(this,arguments)}(h,{token:l,returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(h,"signIn",y);return yield h._updateCurrentUser(M.user),M}),No.apply(this,arguments)}class ws{constructor(l,h){this.factorId=l,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(l,h){return"phoneInfo"in h?hs._fromServerResponse(l,h):"totpInfo"in h?ao._fromServerResponse(l,h):ze(l,"internal-error")}}class hs extends ws{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,h){return new hs(h)}}class ao extends ws{constructor(l){super("totp",l)}static _fromServerResponse(l,h){return new ao(h)}}function Ji(m,l,h){var y;Be((null===(y=h.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),Be(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),l.continueUrl=h.url,l.dynamicLinkDomain=h.dynamicLinkDomain,l.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(Be(h.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),l.iOSBundleId=h.iOS.bundleId),h.android&&(Be(h.android.packageName.length>0,m,"missing-android-pkg-name"),l.androidInstallApp=h.android.installApp,l.androidMinimumVersionCode=h.android.minimumVersion,l.androidPackageName=h.android.packageName)}function xo(m){return la.apply(this,arguments)}function la(){return(la=(0,I.A)(function*(m){const l=vn(m);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function da(){return(da=(0,I.A)(function*(m,l,h){const y=vn(m),M={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};h&&Ji(y,M,h),yield wi(y,M,"getOobCode",Bn)})).apply(this,arguments)}function uo(){return uo=(0,I.A)(function*(m,l,h){yield aa((0,q.Ku)(m),{oobCode:l,newPassword:h}).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&xo(m),M});return function(M){return y.apply(this,arguments)}}())}),uo.apply(this,arguments)}function As(){return As=(0,I.A)(function*(m,l){yield function Ga(m,l){return no.apply(this,arguments)}((0,q.Ku)(m),{oobCode:l})}),As.apply(this,arguments)}function Xa(m,l){return ha.apply(this,arguments)}function ha(){return(ha=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m),y=yield aa(h,{oobCode:l}),M=y.requestType;switch(Be(M,h,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Be(y.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Be(y.mfaInfo,h,"internal-error");default:Be(y.email,h,"internal-error")}let B=null;return y.mfaInfo&&(B=ws._fromServerResponse(vn(h),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:B},operation:M}})).apply(this,arguments)}function ko(){return(ko=(0,I.A)(function*(m,l){const{data:h}=yield Xa((0,q.Ku)(m),l);return h.email})).apply(this,arguments)}function Lo(){return(Lo=(0,I.A)(function*(m,l,h){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),re=yield wi(y,{returnSecureToken:!0,email:l,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",so).catch(He=>{throw"auth/password-does-not-meet-requirements"===He.code&&xo(m),He}),Ee=yield Tr._fromIdTokenResponse(y,"signIn",re);return yield y._updateCurrentUser(Ee.user),Ee})).apply(this,arguments)}function Si(){return(Si=(0,I.A)(function*(m,l,h){const y=vn(m),M={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function B(re,Ee){Be(Ee.handleCodeInApp,y,"argument-error"),Ee&&Ji(y,re,Ee)})(M,h),yield wi(y,M,"getOobCode",io)})).apply(this,arguments)}function Ja(){return(Ja=(0,I.A)(function*(m,l,h){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=(0,q.Ku)(m),M=yi.credentialWithLink(l,h||pn());return Be(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),ca(y,M)})).apply(this,arguments)}function Ds(){return(Ds=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:createAuthUri",Ye(m,l))})).apply(this,arguments)}function F(){return F=(0,I.A)(function*(m,l){const y={identifier:l,continueUri:lr()?pn():"http://localhost"},{signinMethods:M}=yield function fa(m,l){return Ds.apply(this,arguments)}((0,q.Ku)(m),y);return M||[]}),F.apply(this,arguments)}function V(){return V=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m),M={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};l&&Ji(h.auth,M,l);const{email:B}=yield function At(m,l){return cn.apply(this,arguments)}(h.auth,M);B!==m.email&&(yield m.reload())}),V.apply(this,arguments)}function Oe(){return Oe=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:l};h&&Ji(y.auth,B,h);const{email:re}=yield function Os(m,l){return tr.apply(this,arguments)}(y.auth,B);re!==m.email&&(yield m.reload())}),Oe.apply(this,arguments)}function bt(){return(bt=(0,I.A)(function*(m,l){return ae(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Mn(){return Mn=(0,I.A)(function*(m,{displayName:l,photoURL:h}){if(void 0===l&&void 0===h)return;const y=(0,q.Ku)(m),B={idToken:yield y.getIdToken(),displayName:l,photoUrl:h,returnSecureToken:!0},re=yield rt(y,function nt(m,l){return bt.apply(this,arguments)}(y.auth,B));y.displayName=re.displayName||null,y.photoURL=re.photoUrl||null;const Ee=y.providerData.find(({providerId:He})=>"password"===He);Ee&&(Ee.displayName=y.displayName,Ee.photoURL=y.photoURL),yield y._updateTokensIfNecessary(re)}),Mn.apply(this,arguments)}function Kn(m,l,h){return Xn.apply(this,arguments)}function Xn(){return Xn=(0,I.A)(function*(m,l,h){const{auth:y}=m,B={idToken:yield m.getIdToken(),returnSecureToken:!0};l&&(B.email=l),h&&(B.password=h);const re=yield rt(m,function Or(m,l){return Jr.apply(this,arguments)}(y,B));yield m._updateTokensIfNecessary(re,!0)}),Xn.apply(this,arguments)}class ti{constructor(l,h,y={}){this.isNewUser=l,this.providerId=h,this.profile=y}}class ni extends ti{constructor(l,h,y,M){super(l,h,y),this.username=M}}class Hs extends ti{constructor(l,h){super(l,"facebook.com",h)}}class vr extends ni{constructor(l,h){super(l,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Cs extends ti{constructor(l,h){super(l,"google.com",h)}}class Pr extends ni{constructor(l,h,y){super(l,"twitter.com",h,y)}}function Zi(m){const{user:l,_tokenResponse:h}=m;return l.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function Nn(m){var l,h;if(!m)return null;const{providerId:y}=m,M=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},B=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const re=null===(h=null===(l=Wt(m.idToken))||void 0===l?void 0:l.firebase)||void 0===h?void 0:h.sign_in_provider;if(re)return new ti(B,"anonymous"!==re&&"custom"!==re?re:null)}if(!y)return null;switch(y){case"facebook.com":return new Hs(B,M);case"github.com":return new vr(B,M);case"google.com":return new Cs(B,M);case"twitter.com":return new Pr(B,M,m.screenName||null);case"custom":case"anonymous":return new ti(B,null);default:return new ti(B,y,M)}}(h)}class Gs{constructor(l,h,y){this.type=l,this.credential=h,this.user=y}static _fromIdtoken(l,h){return new Gs("enroll",l,h)}static _fromMfaPendingCredential(l){return new Gs("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var h,y;if(l?.multiFactorSession){if(null!==(h=l.multiFactorSession)&&void 0!==h&&h.pendingCredential)return Gs._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(y=l.multiFactorSession)&&void 0!==y&&y.idToken)return Gs._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Ss{constructor(l,h,y){this.session=l,this.hints=h,this.signInResolver=y}static _fromError(l,h){const y=vn(l),M=h.customData._serverResponse,B=(M.mfaInfo||[]).map(Ee=>ws._fromServerResponse(y,Ee));Be(M.mfaPendingCredential,y,"internal-error");const re=Gs._fromMfaPendingCredential(M.mfaPendingCredential);return new Ss(re,B,function(){var Ee=(0,I.A)(function*(He){const Et=yield He._process(y,re);delete M.mfaInfo,delete M.mfaPendingCredential;const Ot=Object.assign(Object.assign({},M),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(h.operationType){case"signIn":const Vt=yield Tr._fromIdTokenResponse(y,h.operationType,Ot);return yield y._updateCurrentUser(Vt.user),Vt;case"reauthenticate":return Be(h.user,y,"internal-error"),Tr._forOperation(h.user,h.operationType,Ot);default:ze(y,"internal-error")}});return function(He){return Ee.apply(this,arguments)}}())}resolveSignIn(l){var h=this;return(0,I.A)(function*(){return h.signInResolver(l)})()}}class Cc{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(y=>ws._fromServerResponse(l.auth,y)))})}static _fromUser(l){return new Cc(l)}getSession(){var l=this;return(0,I.A)(function*(){return Gs._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,h){var y=this;return(0,I.A)(function*(){const M=l,B=yield y.getSession(),re=yield rt(y.user,M._process(y.user.auth,B,h));return yield y.user._updateTokensIfNecessary(re),y.user.reload()})()}unenroll(l){var h=this;return(0,I.A)(function*(){const y="string"==typeof l?l:l.uid,M=yield h.user.getIdToken();try{const B=yield rt(h.user,function Zd(m,l){return ae(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Ye(m,l))}(h.user.auth,{idToken:M,mfaEnrollmentId:y}));h.enrolledFactors=h.enrolledFactors.filter(({uid:re})=>re!==y),yield h.user._updateTokensIfNecessary(B),yield h.user.reload()}catch(B){throw B}})()}}const jn=new WeakMap,ma="__sak";class Sc{constructor(l,h){this.storageRetriever=l,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(ma,"1"),this.storage.removeItem(ma),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,h){return this.storage.setItem(l,JSON.stringify(h)),Promise.resolve()}_get(l){const h=this.storage.getItem(l);return Promise.resolve(h?JSON.parse(h):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fo=(()=>{class m extends Sc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,y)=>this.onStorageEvent(h,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=We(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),B=this.localCache[y];M!==B&&h(y,B,M)}}onStorageEvent(h,y=!1){if(!h.key)return void this.forAllChangedKeys((Ee,He,Et)=>{this.notifyListeners(Ee,Et)});const M=h.key;y?this.detachListener():this.stopPolling();const B=()=>{const Ee=this.storage.getItem(M);!y&&this.localCache[M]===Ee||this.notifyListeners(M,Ee)},re=this.storage.getItem(M);!function Ie(){return(0,q.lT)()&&10===document.documentMode}()||re===h.newValue||h.newValue===h.oldValue?B():setTimeout(B,10)}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,y){var M=()=>super._set,B=this;return(0,I.A)(function*(){yield M().call(B,h,y),B.localCache[h]=JSON.stringify(y)})()}_get(h){var y=()=>super._get,M=this;return(0,I.A)(function*(){const B=yield y().call(M,h);return M.localCache[h]=JSON.stringify(B),B})()}_remove(h){var y=()=>super._remove,M=this;return(0,I.A)(function*(){yield y().call(M,h),delete M.localCache[h]})()}}return m.type="LOCAL",m})(),di=(()=>{class m extends Sc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,y){}_removeListener(h,y){}}return m.type="SESSION",m})();let xn=(()=>{class m{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const y=this.receivers.find(B=>B.isListeningto(h));if(y)return y;const M=new m(h);return this.receivers.push(M),M}isListeningto(h){return this.eventTarget===h}handleEvent(h){var y=this;return(0,I.A)(function*(){const M=h,{eventId:B,eventType:re,data:Ee}=M.data,He=y.handlersMap[re];if(!He?.size)return;M.ports[0].postMessage({status:"ack",eventId:B,eventType:re});const Et=Array.from(He).map(function(){var Vt=(0,I.A)(function*(Mr){return Mr(M.origin,Ee)});return function(Mr){return Vt.apply(this,arguments)}}()),Ot=yield function ot(m){return Promise.all(m.map(function(){var l=(0,I.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(y){return{fulfilled:!1,reason:y}}});return function(h){return l.apply(this,arguments)}}()))}(Et);M.ports[0].postMessage({status:"done",eventId:B,eventType:re,response:Ot})})()}_subscribe(h,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(y)}_unsubscribe(h,y){this.handlersMap[h]&&y&&this.handlersMap[h].delete(y),(!y||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Uo(m="",l=10){let h="";for(let y=0;y<l;y++)h+=Math.floor(10*Math.random());return m+h}class ya{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,h,y=50){var M=this;return(0,I.A)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let re,Ee;return new Promise((He,Et)=>{const Ot=Uo("",20);B.port1.start();const Vt=setTimeout(()=>{Et(new Error("unsupported_event"))},y);Ee={messageChannel:B,onMessage(Mr){const ts=Mr;if(ts.data.eventId===Ot)switch(ts.data.status){case"ack":clearTimeout(Vt),re=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),He(ts.data.response);break;default:clearTimeout(Vt),clearTimeout(re),Et(new Error("invalid_response"))}}},M.handlers.add(Ee),B.port1.addEventListener("message",Ee.onMessage),M.target.postMessage({eventType:l,eventId:Ot,data:h},[B.port2])}).finally(()=>{Ee&&M.removeMessageHandler(Ee)})})()}}function Pn(){return window}function Ws(){return typeof Pn().WorkerGlobalScope<"u"&&"function"==typeof Pn().importScripts}function Bo(){return(Bo=(0,I.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const $n="firebaseLocalStorageDb",Qr="firebaseLocalStorage",ki="fbase_key";class jo{constructor(l){this.request=l}toPromise(){return new Promise((l,h)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function Ks(m,l){return m.transaction([Qr],l?"readwrite":"readonly").objectStore(Qr)}function ku(){const m=indexedDB.open($n,1);return new Promise((l,h)=>{m.addEventListener("error",()=>{h(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Qr,{keyPath:ki})}catch(M){h(M)}}),m.addEventListener("success",(0,I.A)(function*(){const y=m.result;y.objectStoreNames.contains(Qr)?l(y):(y.close(),yield function ps(){const m=indexedDB.deleteDatabase($n);return new jo(m).toPromise()}(),l(yield ku()))}))})}function Lu(m,l,h){return va.apply(this,arguments)}function va(){return(va=(0,I.A)(function*(m,l,h){const y=Ks(m,!0).put({[ki]:l,value:h});return new jo(y).toPromise()})).apply(this,arguments)}function ho(){return(ho=(0,I.A)(function*(m,l){const h=Ks(m,!1).get(l),y=yield new jo(h).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Ia(m,l){const h=Ks(m,!0).delete(l);return new jo(h).toPromise()}const v=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,I.A)(function*(){return h.db||(h.db=yield ku()),h.db})()}_withRetries(h){var y=this;return(0,I.A)(function*(){let M=0;for(;;)try{const B=yield y._openDb();return yield h(B)}catch(B){if(M++>3)throw B;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,I.A)(function*(){return Ws()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,I.A)(function*(){h.receiver=xn._getInstance(function Ur(){return Ws()?self:null}()),h.receiver._subscribe("keyChanged",function(){var y=(0,I.A)(function*(M,B){return{keyProcessed:(yield h._poll()).includes(B.key)}});return function(M,B){return y.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var y=(0,I.A)(function*(M,B){return["keyChanged"]});return function(M,B){return y.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,I.A)(function*(){var y,M;if(h.activeServiceWorker=yield function fs(){return Bo.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new ya(h.activeServiceWorker);const B=yield h.sender._send("ping",{},800);B&&null!==(y=B[0])&&void 0!==y&&y.fulfilled&&null!==(M=B[0])&&void 0!==M&&M.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var y=this;return(0,I.A)(function*(){if(y.sender&&y.activeServiceWorker&&function Rc(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:h},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.A)(function*(){try{if(!indexedDB)return!1;const h=yield ku();return yield Lu(h,ma,"1"),yield Ia(h,ma),!0}catch{}return!1})()}_withPendingWrite(h){var y=this;return(0,I.A)(function*(){y.pendingWrites++;try{yield h()}finally{y.pendingWrites--}})()}_set(h,y){var M=this;return(0,I.A)(function*(){return M._withPendingWrite((0,I.A)(function*(){return yield M._withRetries(B=>Lu(B,h,y)),M.localCache[h]=y,M.notifyServiceWorker(h)}))})()}_get(h){var y=this;return(0,I.A)(function*(){const M=yield y._withRetries(B=>function Vu(m,l){return ho.apply(this,arguments)}(B,h));return y.localCache[h]=M,M})()}_remove(h){var y=this;return(0,I.A)(function*(){return y._withPendingWrite((0,I.A)(function*(){return yield y._withRetries(M=>Ia(M,h)),delete y.localCache[h],y.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,I.A)(function*(){const y=yield h._withRetries(re=>{const Ee=Ks(re,!1).getAll();return new jo(Ee).toPromise()});if(!y)return[];if(0!==h.pendingWrites)return[];const M=[],B=new Set;if(0!==y.length)for(const{fbase_key:re,value:Ee}of y)B.add(re),JSON.stringify(h.localCache[re])!==JSON.stringify(Ee)&&(h.notifyListeners(re,Ee),M.push(re));for(const re of Object.keys(h.localCache))h.localCache[re]&&!B.has(re)&&(h.notifyListeners(re,null),M.push(re));return M})()}notifyListeners(h,y){this.localCache[h]=y;const M=this.listeners[h];if(M)for(const B of Array.from(M))B(y)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,I.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(y)}_removeListener(h,y){this.listeners[h]&&(this.listeners[h].delete(y),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Pe=1e12;class Dt{constructor(l){this.auth=l,this.counter=Pe,this._widgets=new Map}render(l,h){const y=this.counter;return this._widgets.set(y,new un(l,this.auth.name,h||{})),this.counter++,y}reset(l){var h;const y=l||Pe;null===(h=this._widgets.get(y))||void 0===h||h.delete(),this._widgets.delete(y)}getResponse(l){var h;return(null===(h=this._widgets.get(l||Pe))||void 0===h?void 0:h.getResponse())||""}execute(l){var h=this;return(0,I.A)(function*(){var y;return null===(y=h._widgets.get(l||Pe))||void 0===y||y.execute(),""})()}}class un{constructor(l,h,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof l?document.getElementById(l):l;Be(M,"argument-error",{appName:h}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function In(m){const l=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)l.push(h.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":h}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=Ns("rcb"),Jt=new de(3e4,6e4);class $o{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=Pn().grecaptcha)||void 0===l||!l.render)}load(l,h=""){return Be(function Ho(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(h),l,"argument-error"),this.shouldResolveImmediately(h)&&Nt(Pn().grecaptcha)?Promise.resolve(Pn().grecaptcha):new Promise((y,M)=>{const B=Pn().setTimeout(()=>{M(Te(l,"network-request-failed"))},Jt.get());Pn()[En]=()=>{Pn().clearTimeout(B),delete Pn()[En];const Ee=Pn().grecaptcha;if(!Ee||!Nt(Ee))return void M(Te(l,"internal-error"));const He=Ee.render;Ee.render=(Et,Ot)=>{const Vt=He(Et,Ot);return this.counter++,Vt},this.hostLanguage=h,y(Ee)},Gi(`${function us(){return zi.recaptchaV2Script}()}?${(0,q.Am)({onload:En,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(B),M(Te(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var h;return!(null===(h=Pn().grecaptcha)||void 0===h||!h.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fu{load(l){return(0,I.A)(function*(){return new Dt(l)})()}clearedOneInstance(){}}const gs="recaptcha",ms={theme:"light",type:"image"};class th{constructor(l,h,y=Object.assign({},ms)){this.parameters=y,this.type=gs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(l),this.isInvisible="invisible"===this.parameters.size,Be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof h?document.getElementById(h):h;Be(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fu:new $o,this.validateStartingState()}verify(){var l=this;return(0,I.A)(function*(){l.assertNotDestroyed();const h=yield l.render(),y=l.getAssertedRecaptcha();return y.getResponse(h)||new Promise(B=>{const re=Ee=>{Ee&&(l.tokenChangeListeners.delete(re),B(Ee))};l.tokenChangeListeners.add(re),l.isInvisible&&y.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){Be(!this.parameters.sitekey,this.auth,"argument-error"),Be(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Be(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return h=>{if(this.tokenChangeListeners.forEach(y=>y(h)),"function"==typeof l)l(h);else if("string"==typeof l){const y=Pn()[l];"function"==typeof y&&y(h)}}}assertNotDestroyed(){Be(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,I.A)(function*(){if(yield l.init(),!l.widgetId){let h=l.container;if(!l.isInvisible){const y=document.createElement("div");h.appendChild(y),h=y}l.widgetId=l.getAssertedRecaptcha().render(h,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,I.A)(function*(){Be(lr()&&!Ws(),l.auth,"internal-error"),yield function Mc(){let m=null;return new Promise(l=>{"complete"!==document.readyState?(m=()=>l(),window.addEventListener("load",m)):l()}).catch(l=>{throw m&&window.removeEventListener("load",m),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const h=yield function Nr(m){return Ei.apply(this,arguments)}(l.auth);Be(h,l.auth,"internal-error"),l.parameters.sitekey=h})()}getAssertedRecaptcha(){return Be(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bs{constructor(l,h){this.verificationId=l,this.onConfirmation=h}confirm(l){const h=ei._fromVerification(this.verificationId,l);return this.onConfirmation(h)}}function tu(){return(tu=(0,I.A)(function*(m,l,h){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),M=yield nu(y,l,(0,q.Ku)(h));return new bs(M,B=>ca(y,B))})).apply(this,arguments)}function Uu(){return(Uu=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);yield Ka(!1,y,"phone");const M=yield nu(y.auth,l,(0,q.Ku)(h));return new bs(M,B=>Oi(y,B))})).apply(this,arguments)}function Ea(){return(Ea=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if((0,oe._isFirebaseServerApp)(y.auth.app))return Promise.reject(Qe(y.auth));const M=yield nu(y.auth,l,(0,q.Ku)(h));return new bs(M,B=>Rn(y,B))})).apply(this,arguments)}function nu(m,l,h){return rh.apply(this,arguments)}function rh(){return rh=(0,I.A)(function*(m,l,h){var y;const M=yield h.verify();try{let B;if(Be("string"==typeof M,m,"argument-error"),Be(h.type===gs,m,"argument-error"),B="string"==typeof l?{phoneNumber:l}:l,"session"in B){const re=B.session;if("phoneNumber"in B)return Be("enroll"===re.type,m,"internal-error"),(yield function ga(m,l){return ae(m,"POST","/v2/accounts/mfaEnrollment:start",Ye(m,l))}(m,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Be("signin"===re.type,m,"internal-error");const Ee=(null===(y=B.multiFactorHint)||void 0===y?void 0:y.uid)||B.multiFactorUid;return Be(Ee,m,"missing-multi-factor-info"),(yield function S(m,l){return ae(m,"POST","/v2/accounts/mfaSignIn:start",Ye(m,l))}(m,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield function xi(m,l){return Ai.apply(this,arguments)}(m,{phoneNumber:B.phoneNumber,recaptchaToken:M});return re}}finally{h._reset()}}),rh.apply(this,arguments)}function fo(){return(fo=(0,I.A)(function*(m,l){const h=(0,q.Ku)(m);if((0,oe._isFirebaseServerApp)(h.auth.app))return Promise.reject(Qe(h.auth));yield Ec(h,l)})).apply(this,arguments)}let Bu=(()=>{class m{constructor(h){this.providerId=m.PROVIDER_ID,this.auth=vn(h)}verifyPhoneNumber(h,y){return nu(this.auth,h,(0,q.Ku)(y))}static credential(h,y){return ei._fromVerification(h,y)}static credentialFromResult(h){return m.credentialFromTaggedObject(h)}static credentialFromError(h){return m.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:y,temporaryProof:M}=h;return y&&M?ei._fromTokenResponse(y,M):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function iu(m,l){return l?ct(l):(Be(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class xc extends xs{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return mn(l,this._buildIdpRequest())}_linkToIdToken(l,h){return mn(l,this._buildIdpRequest(h))}_getReauthenticationResolver(l){return mn(l,this._buildIdpRequest())}_buildIdpRequest(l){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(h.idToken=l),h}}function fg(m){return Yi(m.auth,new xc(m),m.bypassAuthState)}function pg(m){const{auth:l,user:h}=m;return Be(h,l,"internal-error"),qa(h,new xc(m),m.bypassAuthState)}function gg(m){return Df.apply(this,arguments)}function Df(){return(Df=(0,I.A)(function*(m){const{auth:l,user:h}=m;return Be(h,l,"internal-error"),Ec(h,new xc(m),m.bypassAuthState)})).apply(this,arguments)}class Ta{constructor(l,h,y,M,B=!1){this.auth=l,this.resolver=y,this.user=M,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var l=this;return new Promise(function(){var h=(0,I.A)(function*(y,M){l.pendingPromise={resolve:y,reject:M};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(B){l.reject(B)}});return function(y,M){return h.apply(this,arguments)}}())}onAuthEvent(l){var h=this;return(0,I.A)(function*(){const{urlResponse:y,sessionId:M,postBody:B,tenantId:re,error:Ee,type:He}=l;if(Ee)return void h.reject(Ee);const Et={auth:h.auth,requestUri:y,sessionId:M,tenantId:re||void 0,postBody:B||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(He)(Et))}catch(Ot){h.reject(Ot)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return fg;case"linkViaPopup":case"linkViaRedirect":return gg;case"reauthViaPopup":case"reauthViaRedirect":return pg;default:ze(this.auth,"internal-error")}}resolve(l){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wa=new de(2e3,1e4);function ih(){return(ih=(0,I.A)(function*(m,l,h){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Te(m,"operation-not-supported-in-this-environment"));const y=vn(m);ft(m,l,Gn);const M=iu(y,h);return new kc(y,"signInViaPopup",l,M).executeNotNull()})).apply(this,arguments)}function _s(){return(_s=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if((0,oe._isFirebaseServerApp)(y.auth.app))return Promise.reject(Te(y.auth,"operation-not-supported-in-this-environment"));ft(y.auth,l,Gn);const M=iu(y.auth,h);return new kc(y.auth,"reauthViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}function Cf(){return(Cf=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);ft(y.auth,l,Gn);const M=iu(y.auth,h);return new kc(y.auth,"linkViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}let kc=(()=>{class m extends Ta{constructor(h,y,M,B,re){super(h,y,B,re),this.provider=M,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var h=this;return(0,I.A)(function*(){const y=yield h.execute();return Be(y,h.auth,"internal-error"),y})()}onExecution(){var h=this;return(0,I.A)(function*(){Fn(1===h.filter.length,"Popup operations only handle one event");const y=Uo();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],y),h.authWindow.associatedEvent=y,h.resolver._originValidation(h.auth).catch(M=>{h.reject(M)}),h.resolver._isIframeWebStorageSupported(h.auth,M=>{M||h.reject(Te(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const h=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,wa.get())};h()}}return m.currentPopupAction=null,m})();const Lc="pendingRedirect",qs=new Map;class bi extends Ta{constructor(l,h,y=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,y),this.eventId=null}execute(){var l=()=>super.execute,h=this;return(0,I.A)(function*(){let y=qs.get(h.auth._key());if(!y){try{const B=(yield function su(m,l){return po.apply(this,arguments)}(h.resolver,h.auth))?yield l().call(h):null;y=()=>Promise.resolve(B)}catch(M){y=()=>Promise.reject(M)}qs.set(h.auth._key(),y)}return h.bypassAuthState||qs.set(h.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(l){var h=()=>super.onAuthEvent,y=this;return(0,I.A)(function*(){if("signInViaRedirect"===l.type)return h().call(y,l);if("unknown"!==l.type){if(l.eventId){const M=yield y.auth._redirectUserForId(l.eventId);if(M)return y.user=M,h().call(y,l);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,I.A)(function*(){})()}cleanUp(){}}function po(){return(po=(0,I.A)(function*(m,l){const h=oh(l),y=sh(m);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(h));return yield y._remove(h),M})).apply(this,arguments)}function Hu(m,l){return zu.apply(this,arguments)}function zu(){return(zu=(0,I.A)(function*(m,l){return sh(m)._set(oh(l),"true")})).apply(this,arguments)}function Wu(m,l){qs.set(m._key(),l)}function sh(m){return ct(m._redirectPersistence)}function oh(m){return pt(Lc,m.config.apiKey,m.name)}function ah(m,l,h){return function uh(m,l,h){return ou.apply(this,arguments)}(m,l,h)}function ou(){return(ou=(0,I.A)(function*(m,l,h){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m);ft(m,l,Gn),yield y._initializationPromise;const M=iu(y,h);return yield Hu(M,y),M._openRedirect(y,l,"signInViaRedirect")})).apply(this,arguments)}function Vc(m,l,h){return function Fl(m,l,h){return Li.apply(this,arguments)}(m,l,h)}function Li(){return(Li=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);if(ft(y.auth,l,Gn),(0,oe._isFirebaseServerApp)(y.auth.app))return Promise.reject(Qe(y.auth));yield y.auth._initializationPromise;const M=iu(y.auth,h);yield Hu(M,y.auth);const B=yield go(y);return M._openRedirect(y.auth,l,"reauthViaRedirect",B)})).apply(this,arguments)}function mg(m,l,h){return function ch(m,l,h){return Ul.apply(this,arguments)}(m,l,h)}function Ul(){return(Ul=(0,I.A)(function*(m,l,h){const y=(0,q.Ku)(m);ft(y.auth,l,Gn),yield y.auth._initializationPromise;const M=iu(y.auth,h);yield Ka(!1,y,l.providerId),yield Hu(M,y.auth);const B=yield go(y);return M._openRedirect(y.auth,l,"linkViaRedirect",B)})).apply(this,arguments)}function lh(){return(lh=(0,I.A)(function*(m,l){return yield vn(m)._initializationPromise,Br(m,l,!1)})).apply(this,arguments)}function Br(m,l){return zo.apply(this,arguments)}function zo(){return(zo=(0,I.A)(function*(m,l,h=!1){if((0,oe._isFirebaseServerApp)(m.app))return Promise.reject(Qe(m));const y=vn(m),M=iu(y,l),re=yield new bi(y,M,h).execute();return re&&!h&&(delete re.user._redirectEventId,yield y._persistUserIfCurrent(re.user),yield y._setRedirectUser(null,l)),re})).apply(this,arguments)}function go(m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,I.A)(function*(m){const l=Uo(`${m.uid}:::`);return m._redirectEventId=l,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),l})).apply(this,arguments)}class Bl{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let h=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(l,y)&&(h=!0,this.sendToConsumer(l,y),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Aa(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Go(m);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=l,h=!0)),h}sendToConsumer(l,h){var y;if(l.error&&!Go(l)){const M=(null===(y=l.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";h.onError(Te(this.auth,M))}else h.onAuthEvent(l)}isEventForConsumer(l,h){const y=null===h.eventId||!!l.eventId&&l.eventId===h.eventId;return h.filter.includes(l.type)&&y}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jl(l))}saveEventToCache(l){this.cachedEventUids.add(jl(l)),this.lastProcessedEventTime=Date.now()}}function jl(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(l=>l).join("-")}function Go({type:m,error:l}){return"unknown"===m&&"auth/no-auth-event"===l?.code}function Da(m){return qu.apply(this,arguments)}function qu(){return(qu=(0,I.A)(function*(m,l={}){return ae(m,"GET","/v1/projects",l)})).apply(this,arguments)}const Uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,au=/^https?/;function hh(){return(hh=(0,I.A)(function*(m){if(m.config.emulator)return;const{authorizedDomains:l}=yield Da(m);for(const h of l)try{if(bf(h))return}catch{}ze(m,"unauthorized-domain")})).apply(this,arguments)}function bf(m){const l=pn(),{protocol:h,hostname:y}=new URL(l);if(m.startsWith("chrome-extension://")){const re=new URL(m);return""===re.hostname&&""===y?"chrome-extension:"===h&&m.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===h&&re.hostname===y}if(!au.test(h))return!1;if(Uc.test(m))return y===m;const M=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const fh=new de(3e4,6e4);function _g(){const m=Pn().___jsl;if(m?.H)for(const l of Object.keys(m.H))if(m.H[l].r=m.H[l].r||[],m.H[l].L=m.H[l].L||[],m.H[l].r=[...m.H[l].L],m.CP)for(let h=0;h<m.CP.length;h++)m.CP[h]=null}let Ca=null;const Qs=new de(5e3,15e3),Rf="__/auth/iframe",Pf="emulator/auth/iframe",Qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sa(m){const l=m.config;Be(l.authDomain,m,"auth-domain-config-required");const h=l.emulator?we(l,Pf):`https://${m.config.authDomain}/${Rf}`,y={apiKey:l.apiKey,appName:m.name,v:oe.SDK_VERSION},M=Mf.get(m.config.apiHost);M&&(y.eid=M);const B=m._getFrameworks();return B.length&&(y.fw=B.join(",")),`${h}?${(0,q.Am)(y).slice(1)}`}function Vi(){return Vi=(0,I.A)(function*(m){const l=yield function $l(m){return Ca=Ca||function yg(m){return new Promise((l,h)=>{var y,M,B;function re(){_g(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{_g(),h(Te(m,"network-request-failed"))},timeout:fh.get()})}if(null!==(M=null===(y=Pn().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)l(gapi.iframes.getContext());else{if(null===(B=Pn().gapi)||void 0===B||!B.load){const Ee=Ns("iframefcb");return Pn()[Ee]=()=>{gapi.load?re():h(Te(m,"network-request-failed"))},Gi(`${function Sr(){return zi.gapiScript}()}?onload=${Ee}`).catch(He=>h(He))}re()}}).catch(l=>{throw Ca=null,l})}(m),Ca}(m),h=Pn().gapi;return Be(h,m,"internal-error"),l.open({where:document.body,url:Sa(m),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qn,dontclear:!0},y=>new Promise(function(){var M=(0,I.A)(function*(B,re){yield y.restyle({setHideOnLeave:!1});const Ee=Te(m,"network-request-failed"),He=Pn().setTimeout(()=>{re(Ee)},Qs.get());function Et(){Pn().clearTimeout(He),B(y)}y.ping(Et).then(Et,()=>{re(Ee)})});return function(B,re){return M.apply(this,arguments)}}()))}),Vi.apply(this,arguments)}const ys={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qu{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const es="__/auth/handler",ph="emulator/auth/handler",lu=encodeURIComponent("fac");function xf(m,l,h,y,M,B){return jc.apply(this,arguments)}function jc(){return(jc=(0,I.A)(function*(m,l,h,y,M,B){Be(m.config.authDomain,m,"auth-domain-config-required"),Be(m.config.apiKey,m,"invalid-api-key");const re={apiKey:m.config.apiKey,appName:m.name,authType:h,redirectUrl:y,v:oe.SDK_VERSION,eventId:M};if(l instanceof Gn){l.setDefaultLanguage(m.languageCode),re.providerId=l.providerId||"",(0,q.Im)(l.getCustomParameters())||(re.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ot,Vt]of Object.entries(B||{}))re[Ot]=Vt}if(l instanceof Vs){const Ot=l.getScopes().filter(Vt=>""!==Vt);Ot.length>0&&(re.scopes=Ot.join(","))}m.tenantId&&(re.tid=m.tenantId);const Ee=re;for(const Ot of Object.keys(Ee))void 0===Ee[Ot]&&delete Ee[Ot];const He=yield m._getAppCheckToken(),Et=He?`#${lu}=${encodeURIComponent(He)}`:"";return`${function Ig({config:m}){return m.emulator?we(m,ph):`https://${m.authDomain}/${es}`}(m)}?${(0,q.Am)(Ee).slice(1)}${Et}`})).apply(this,arguments)}const Yu="webStorageSupport",kf=class Of{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=di,this._completeRedirectFn=Br,this._overrideRedirectResult=Wu}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){var re;Fn(null===(re=B.eventManagers[l._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ee=yield xf(l,h,y,pn(),M);return function Nf(m,l,h,y=500,M=600){const B=Math.max((window.screen.availHeight-M)/2,0).toString(),re=Math.max((window.screen.availWidth-y)/2,0).toString();let Ee="";const He=Object.assign(Object.assign({},ys),{width:y.toString(),height:M.toString(),top:B,left:re}),Et=(0,q.ZQ)().toLowerCase();h&&(Ee=It(Et)?"_blank":h),oi(Et)&&(l=l||"http://localhost",He.scrollbars="yes");const Ot=Object.entries(He).reduce((Mr,[ts,Zc])=>`${Mr}${ts}=${Zc},`,"");if(function Le(m=(0,q.ZQ)()){var l;return rn(m)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Et)&&"_self"!==Ee)return function cu(m,l){const h=document.createElement("a");h.href=m,h.target=l;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(y)}(l||"",Ee),new Qu(null);const Vt=window.open(l||"",Ee,Ot);Be(Vt,m,"popup-blocked");try{Vt.focus()}catch{}return new Qu(Vt)}(l,Ee,Uo())})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B._originValidation(l),function bc(m){Pn().location.href=m}(yield xf(l,h,y,pn(),M)),new Promise(()=>{})})()}_initialize(l){const h=l._key();if(this.eventManagers[h]){const{manager:M,promise:B}=this.eventManagers[h];return M?Promise.resolve(M):(Fn(B,"If manager is not set, promise should be"),B)}const y=this.initAndGetManager(l);return this.eventManagers[h]={promise:y},y.catch(()=>{delete this.eventManagers[h]}),y}initAndGetManager(l){var h=this;return(0,I.A)(function*(){const y=yield function Hl(m){return Vi.apply(this,arguments)}(l),M=new Bl(l);return y.register("authEvent",B=>(Be(B?.authEvent,l,"invalid-auth-event"),{status:M.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[l._key()]={manager:M},h.iframes[l._key()]=y,M})()}_isIframeWebStorageSupported(l,h){this.iframes[l._key()].send(Yu,{type:Yu},M=>{var B;const re=null===(B=M?.[0])||void 0===B?void 0:B[Yu];void 0!==re&&h(!!re),ze(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function dh(m){return hh.apply(this,arguments)}(l)),this.originValidationPromises[h]}get _shouldInitProactively(){return We()||kn()||rn()}};class gh{constructor(l){this.factorId=l}_process(l,h,y){switch(h.type){case"enroll":return this._finalizeEnroll(l,h.credential,y);case"signin":return this._finalizeSignIn(l,h.credential);default:return Zt("unexpected MultiFactorSessionType")}}}class mh extends gh{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new mh(l)}_finalizeEnroll(l,h,y){return function Ac(m,l){return ae(m,"POST","/v2/accounts/mfaEnrollment:finalize",Ye(m,l))}(l,{idToken:h,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,h){return function N(m,l){return ae(m,"POST","/v2/accounts/mfaSignIn:finalize",Ye(m,l))}(l,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zl=(()=>{class m{constructor(){}static assertion(h){return mh._fromCredential(h)}}return m.FACTOR_ID="phone",m})();var Hc="@firebase/auth";class Lf{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var h=this;return(0,I.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const h=this.auth.onIdTokenChanged(y=>{l(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,h),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const h=this.internalListeners.get(l);h&&(this.internalListeners.delete(l),h(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ba(){return window}(0,q.XA)("authIdTokenMaxAge"),function yc(m){zi=m}({loadJS:m=>new Promise((l,h)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=l,y.onerror=M=>{const B=Te("internal-error");B.customData=M,h(B)},y.type="text/javascript",y.charset="UTF-8",function Eg(){var m,l;return null!==(l=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==l?l:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Gl(m){(0,oe._registerComponent)(new _e.uA("auth",(l,{options:h})=>{const y=l.getProvider("app").getImmediate(),M=l.getProvider("heartbeat"),B=l.getProvider("app-check-internal"),{apiKey:re,authDomain:Ee}=y.options;Be(re&&!re.includes(":"),"invalid-api-key",{appName:y.name});const He={apiKey:re,authDomain:Ee,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ht(m)},Et=new me(y,M,B,He);return function Ki(m,l){const h=l?.persistence||[],y=(Array.isArray(h)?h:[h]).map(ct);l?.errorMap&&m._updateErrorMap(l.errorMap),m._initializeWithPersistence(y,l?.popupRedirectResolver)}(Et,h),Et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,h,y)=>{l.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new _e.uA("auth-internal",l=>{const h=vn(l.getProvider("auth").getImmediate());return new Lf(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Hc,"1.7.9",function yh(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,oe.registerVersion)(Hc,"1.7.9","esm2017")}("Browser");function zc(){return zc=(0,I.A)(function*(m,l,h){var y;const{BuildInfo:M}=ba();Fn(l.sessionId,"AuthEvent did not contain a session ID");const B=yield function Xl(m){return Jl.apply(this,arguments)}(l.sessionId),re={};return rn()?re.ibi=M.packageName:ui()?re.apn=M.packageName:ze(m,"operation-not-supported-in-this-environment"),M.displayName&&(re.appDisplayName=M.displayName),re.sessionId=B,xf(m,h,l.type,void 0,null!==(y=l.eventId)&&void 0!==y?y:void 0,re)}),zc.apply(this,arguments)}function Ql(){return(Ql=(0,I.A)(function*(m){const{BuildInfo:l}=ba(),h={};rn()?h.iosBundleId=l.packageName:ui()?h.androidPackageName=l.packageName:ze(m,"operation-not-supported-in-this-environment"),yield Da(m,h)})).apply(this,arguments)}function Ra(){return(Ra=(0,I.A)(function*(m,l,h){const{cordova:y}=ba();let M=()=>{};try{yield new Promise((B,re)=>{let Ee=null;function He(){var Vt;B();const Mr=null===(Vt=y.plugins.browsertab)||void 0===Vt?void 0:Vt.close;"function"==typeof Mr&&Mr(),"function"==typeof h?.close&&h.close()}function Et(){Ee||(Ee=window.setTimeout(()=>{re(Te(m,"redirect-cancelled-by-user"))},2e3))}function Ot(){"visible"===document?.visibilityState&&Et()}l.addPassiveListener(He),document.addEventListener("resume",Et,!1),ui()&&document.addEventListener("visibilitychange",Ot,!1),M=()=>{l.removePassiveListener(He),document.removeEventListener("resume",Et,!1),document.removeEventListener("visibilitychange",Ot,!1),Ee&&window.clearTimeout(Ee)}})}finally{M()}})).apply(this,arguments)}function Jl(){return(Jl=(0,I.A)(function*(m){const l=function Uf(m){if(Fn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const l=new ArrayBuffer(m.length),h=new Uint8Array(l);for(let y=0;y<m.length;y++)h[y]=m.charCodeAt(y);return h}(m),h=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(h)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ag extends Bl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInitialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInitialized(),this.passiveListeners.forEach(h=>h(l)),super.onEvent(l)}initialized(){var l=this;return(0,I.A)(function*(){yield l.initPromise})()}}function Ih(m){return jf.apply(this,arguments)}function jf(){return(jf=(0,I.A)(function*(m){const l=yield Eh()._get($f(m));return l&&(yield Eh()._remove($f(m))),l})).apply(this,arguments)}function c_(){const m=[];for(let h=0;h<20;h++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function Eh(){return ct(Fo)}function $f(m){return pt("authEvent",m.config.apiKey,m.name)}function ec(m){if(!m?.includes("?"))return{};const[l,...h]=m.split("?");return(0,q.I9)(h.join("?"))}const Th=class Kc{constructor(){this._redirectPersistence=di,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Br,this._overrideRedirectResult=Wu}_initialize(l){var h=this;return(0,I.A)(function*(){const y=l._key();let M=h.eventManagers.get(y);return M||(M=new Ag(l),h.eventManagers.set(y,M),h.attachCallbackListeners(l,M)),M})()}_openPopup(l){ze(l,"operation-not-supported-in-this-environment")}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){!function Yl(m){var l,h,y,M,B,re,Ee,He,Et,Ot;const Vt=ba();Be("function"==typeof(null===(l=Vt?.universalLinks)||void 0===l?void 0:l.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Be(typeof(null===(h=Vt?.BuildInfo)||void 0===h?void 0:h.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Be("function"==typeof(null===(B=null===(M=null===(y=Vt?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===B?void 0:B.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Be("function"==typeof(null===(He=null===(Ee=null===(re=Vt?.cordova)||void 0===re?void 0:re.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===He?void 0:He.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Be("function"==typeof(null===(Ot=null===(Et=Vt?.cordova)||void 0===Et?void 0:Et.InAppBrowser)||void 0===Ot?void 0:Ot.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const re=yield B._initialize(l);yield re.initialized(),re.resetRedirect(),function Gu(){qs.clear()}(),yield B._originValidation(l);const Ee=function Bf(m,l,h=null){return{type:l,eventId:h,urlResponse:null,sessionId:c_(),postBody:null,tenantId:m.tenantId,error:Te(m,"no-auth-event")}}(l,y,M);yield function Zl(m,l){return Eh()._set($f(m),l)}(l,Ee);const He=yield function ql(m,l,h){return zc.apply(this,arguments)}(l,Ee,h),Et=yield function vh(m){const{cordova:l}=ba();return new Promise(h=>{l.plugins.browsertab.isAvailable(y=>{let M=null;y?l.plugins.browsertab.openUrl(m):M=l.InAppBrowser.open(m,function as(m=(0,q.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),h(M)})})}(He);return function Zu(m,l,h){return Ra.apply(this,arguments)}(l,re,Et)})()}_isIframeWebStorageSupported(l,h){throw new Error("Method not implemented.")}_originValidation(l){const h=l._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function Tg(m){return Ql.apply(this,arguments)}(l)),this.originValidationPromises[h]}attachCallbackListeners(l,h){const{universalLinks:y,handleOpenURL:M,BuildInfo:B}=ba(),re=setTimeout((0,I.A)(function*(){yield Ih(l),h.onEvent(td())}),500),Ee=function(){var Ot=(0,I.A)(function*(Vt){clearTimeout(re);const Mr=yield Ih(l);let ts=null;Mr&&Vt?.url&&(ts=function ed(m,l){var h,y;const M=function Wc(m){const l=ec(m),h=l.link?decodeURIComponent(l.link):void 0,y=ec(h).link,M=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return ec(M).link||M||y||h||m}(l);if(M.includes("/__/auth/callback")){const B=ec(M),re=B.firebaseError?function Gc(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(B.firebaseError)):null,Ee=null===(y=null===(h=re?.code)||void 0===h?void 0:h.split("auth/"))||void 0===y?void 0:y[1],He=Ee?Te(Ee):null;return He?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:M,postBody:null}}return null}(Mr,Vt.url)),h.onEvent(ts||td())});return function(Mr){return Ot.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,Ee);const He=M,Et=`${B.packageName.toLowerCase()}://`;ba().handleOpenURL=function(){var Ot=(0,I.A)(function*(Vt){if(Vt.toLowerCase().startsWith(Et)&&Ee({url:Vt}),"function"==typeof He)try{He(Vt)}catch(Mr){console.error(Mr)}});return function(Vt){return Ot.apply(this,arguments)}}()}};function td(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Te("no-auth-event")}}function Ko(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function fu(m=(0,q.ZQ)()){return!("file:"!==Ko()&&"ionic:"!==Ko()&&"capacitor:"!==Ko()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function tc(){try{const m=self.localStorage,l=Uo();if(m)return m.setItem(l,"1"),m.removeItem(l),!function sd(m=(0,q.ZQ)()){return function Qc(){return(0,q.lT)()&&11===document?.documentMode}()||function id(m=(0,q.ZQ)()){return/Edge\/\d+/.test(m)}(m)}()||(0,q.zW)()}catch{return Yc()&&(0,q.zW)()}return!1}function Yc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function od(){return(function qc(){return"http:"===Ko()||"https:"===Ko()}()||(0,q.sr)()||fu())&&!function rd(){return(0,q.lV)()||(0,q.Ll)()}()&&tc()&&!Yc()}function Gf(){return fu()&&typeof document<"u"}function nc(){return(nc=(0,I.A)(function*(){return!!Gf()&&new Promise(m=>{const l=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),m(!0)})})})).apply(this,arguments)}const Ir={LOCAL:"local",NONE:"none",SESSION:"session"},pu=Be,fi="persistence";function ai(m){return mo.apply(this,arguments)}function mo(){return(mo=(0,I.A)(function*(m){yield m._initializationPromise;const l=Xc(),h=pt(fi,m.config.apiKey,m.name);l&&l.setItem(h,m._getPersistence())})).apply(this,arguments)}function Xc(){var m;try{return(null===(m=function Ah(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const Wf=Be;class qo{constructor(){this.browserResolver=ct(kf),this.cordovaResolver=ct(Th),this.underlyingResolver=null,this._redirectPersistence=di,this._completeRedirectFn=Br,this._overrideRedirectResult=Wu}_initialize(l){var h=this;return(0,I.A)(function*(){return yield h.selectUnderlyingResolver(),h.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(l,h,y,M)})()}_openRedirect(l,h,y,M){var B=this;return(0,I.A)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(l,h,y,M)})()}_isIframeWebStorageSupported(l,h){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,h)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return Gf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,I.A)(function*(){if(l.underlyingResolver)return;const h=yield function wh(){return nc.apply(this,arguments)}();l.underlyingResolver=h?l.cordovaResolver:l.browserResolver})()}}function Kf(m){return m.unwrap()}function Dg(m){return ic(m)}function ic(m){const{_tokenResponse:l}=m instanceof q.g?m.customData:m;if(!l)return null;if(!(m instanceof q.g)&&"temporaryProof"in l&&"phoneNumber"in l)return Bu.credentialFromResult(m);const h=l.providerId;if(!h||h===Se.PASSWORD)return null;let y;switch(h){case Se.GOOGLE:y=Is;break;case Se.FACEBOOK:y=bn;break;case Se.GITHUB:y=Fr;break;case Se.TWITTER:y=Us;break;default:const{oauthIdToken:M,oauthAccessToken:B,oauthTokenSecret:re,pendingToken:Ee,nonce:He}=l;return B||re||M||Ee?Ee?h.startsWith("saml.")?Wr._create(h,Ee):sn._fromParams({providerId:h,signInMethod:h,pendingToken:Ee,idToken:M,accessToken:B}):new nr(h).credential({idToken:M,accessToken:B,rawNonce:He}):null}return m instanceof q.g?y.credentialFromError(m):y.credentialFromResult(m)}function Ri(m,l){return l.catch(h=>{throw h instanceof q.g&&function Qf(m,l){var h;const y=null===(h=l.customData)||void 0===h?void 0:h._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new ad(m,function Ll(m,l){var h;const y=(0,q.Ku)(m),M=l;return Be(l.customData.operationType,y,"argument-error"),Be(null===(h=M.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,y,"argument-error"),Ss._fromError(y,M)}(m,l));else if(y){const M=ic(l),B=l;M&&(B.credential=M,B.tenantId=y.tenantId||void 0,B.email=y.email||void 0,B.phoneNumber=y.phoneNumber||void 0)}}(m,h),h}).then(h=>{const M=h.user;return{operationType:h.operationType,credential:Dg(h),additionalUserInfo:Zi(h),user:pi.getOrCreate(M)}})}function _o(m,l){return gu.apply(this,arguments)}function gu(){return(gu=(0,I.A)(function*(m,l){const h=yield l;return{verificationId:h.verificationId,confirm:y=>Ri(m,h.confirm(y))}})).apply(this,arguments)}class ad{constructor(l,h){this.resolver=h,this.auth=function qf(m){return m.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return Ri(Kf(this.auth),this.resolver.resolveSignIn(l))}}class pi{constructor(l){this._delegate=l,this.multiFactor=function Ou(m){const l=(0,q.Ku)(m);return jn.has(l)||jn.set(l,Cc._fromUser(l)),jn.get(l)}(l)}static getOrCreate(l){return pi.USER_MAP.has(l)||pi.USER_MAP.set(l,new pi(l)),pi.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,Oi(h._delegate,l))})()}linkWithPhoneNumber(l,h){var y=this;return(0,I.A)(function*(){return _o(y.auth,function Nc(m,l,h){return Uu.apply(this,arguments)}(y._delegate,l,h))})()}linkWithPopup(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,function Oc(m,l,h){return Cf.apply(this,arguments)}(h._delegate,l,qo))})()}linkWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield ai(vn(h.auth)),mg(h._delegate,l,qo)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var h=this;return(0,I.A)(function*(){return Ri(h.auth,Rn(h._delegate,l))})()}reauthenticateWithPhoneNumber(l,h){return _o(this.auth,function nh(m,l,h){return Ea.apply(this,arguments)}(this._delegate,l,h))}reauthenticateWithPopup(l){return Ri(this.auth,function $u(m,l,h){return _s.apply(this,arguments)}(this._delegate,l,qo))}reauthenticateWithRedirect(l){var h=this;return(0,I.A)(function*(){return yield ai(vn(h.auth)),Vc(h._delegate,l,qo)})()}sendEmailVerification(l){return function P(m,l){return V.apply(this,arguments)}(this._delegate,l)}unlink(l){var h=this;return(0,I.A)(function*(){return yield function Ml(m,l){return Ic.apply(this,arguments)}(h._delegate,l),h})()}updateEmail(l){return function Vn(m,l){const h=(0,q.Ku)(m);return(0,oe._isFirebaseServerApp)(h.auth.app)?Promise.reject(Qe(h.auth)):Kn(h,l,null)}(this._delegate,l)}updatePassword(l){return function _n(m,l){return Kn((0,q.Ku)(m),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function ru(m,l){return fo.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Ln(m,l){return Mn.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,h){return function ee(m,l,h){return Oe.apply(this,arguments)}(this._delegate,l,h)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pi.USER_MAP=new WeakMap;const mu=Be;let Ch=(()=>{class m{constructor(h,y){if(this.app=h,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=h.options;mu(M,"invalid-api-key",{appName:h.name}),mu(M,"invalid-api-key",{appName:h.name});const B=typeof window<"u"?qo:void 0;this._delegate=y.initialize({options:{persistence:ud(M,h.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(_t),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(h){this._delegate.languageCode=h}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(h){this._delegate.tenantId=h}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(h,y){!function za(m,l,h){const y=vn(m);Be(y._canInitEmulator,y,"emulator-config-failed"),Be(/^https?:\/\//.test(l),y,"invalid-emulator-scheme");const M=!!h?.disableWarnings,B=bo(l),{host:re,port:Ee}=function oa(m){const l=bo(m),h=/(\/\/)?([^?#/]+)/.exec(m.substr(l.length));if(!h)return{host:"",port:null};const y=h[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const B=M[1];return{host:B,port:Pu(y.substr(B.length+1))}}{const[B,re]=y.split(":");return{host:B,port:Pu(re)}}}(l);y.config.emulator={url:`${B}//${re}${null===Ee?"":`:${Ee}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:re,port:Ee,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Mu(){function m(){const l=document.createElement("p"),h=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,h,y)}applyActionCode(h){return function js(m,l){return As.apply(this,arguments)}(this._delegate,h)}checkActionCode(h){return Xa(this._delegate,h)}confirmPasswordReset(h,y){return function Ya(m,l,h){return uo.apply(this,arguments)}(this._delegate,h,y)}createUserWithEmailAndPassword(h,y){var M=this;return(0,I.A)(function*(){return Ri(M._delegate,function co(m,l,h){return Lo.apply(this,arguments)}(M._delegate,h,y))})()}fetchProvidersForEmail(h){return this.fetchSignInMethodsForEmail(h)}fetchSignInMethodsForEmail(h){return function A(m,l){return F.apply(this,arguments)}(this._delegate,h)}isSignInWithEmailLink(h){return function wc(m,l){const h=Qi.parseLink(l);return"EMAIL_SIGNIN"===h?.operation}(0,h)}getRedirectResult(){var h=this;return(0,I.A)(function*(){mu(od(),h._delegate,"operation-not-supported-in-this-environment");const y=yield function Fc(m,l){return lh.apply(this,arguments)}(h._delegate,qo);return y?Ri(h._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(h){!function Hf(m,l){vn(m)._logFramework(l)}(this._delegate,h)}onAuthStateChanged(h,y,M){const{next:B,error:re,complete:Ee}=Jc(h,y,M);return this._delegate.onAuthStateChanged(B,re,Ee)}onIdTokenChanged(h,y,M){const{next:B,error:re,complete:Ee}=Jc(h,y,M);return this._delegate.onIdTokenChanged(B,re,Ee)}sendSignInLinkToEmail(h,y){return function xu(m,l,h){return Si.apply(this,arguments)}(this._delegate,h,y)}sendPasswordResetEmail(h,y){return function Tc(m,l,h){return da.apply(this,arguments)}(this._delegate,h,y||void 0)}setPersistence(h){var y=this;return(0,I.A)(function*(){let M;switch(function Dh(m,l){pu(Object.values(Ir).includes(l),m,"invalid-persistence-type"),(0,q.lV)()?pu(l!==Ir.SESSION,m,"unsupported-persistence-type"):(0,q.Ll)()?pu(l===Ir.NONE,m,"unsupported-persistence-type"):Yc()?pu(l===Ir.NONE||l===Ir.LOCAL&&(0,q.zW)(),m,"unsupported-persistence-type"):pu(l===Ir.NONE||tc(),m,"unsupported-persistence-type")}(y._delegate,h),h){case Ir.SESSION:M=di;break;case Ir.LOCAL:M=(yield ct(v)._isAvailable())?v:Fo;break;case Ir.NONE:M=vt;break;default:return ze("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(h){return this.signInWithCredential(h)}signInAnonymously(){return Ri(this._delegate,function Pl(m){return ua.apply(this,arguments)}(this._delegate))}signInWithCredential(h){return Ri(this._delegate,ca(this._delegate,h))}signInWithCustomToken(h){return Ri(this._delegate,function Qa(m,l){return No.apply(this,arguments)}(this._delegate,h))}signInWithEmailAndPassword(h,y){return Ri(this._delegate,function Nl(m,l,h){return(0,oe._isFirebaseServerApp)(m.app)?Promise.reject(Qe(m)):ca((0,q.Ku)(m),yi.credential(l,h)).catch(function(){var y=(0,I.A)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&xo(m),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,h,y))}signInWithEmailLink(h,y){return Ri(this._delegate,function $s(m,l,h){return Ja.apply(this,arguments)}(this._delegate,h,y))}signInWithPhoneNumber(h,y){return _o(this._delegate,function Af(m,l,h){return tu.apply(this,arguments)}(this._delegate,h,y))}signInWithPopup(h){var y=this;return(0,I.A)(function*(){return mu(od(),y._delegate,"operation-not-supported-in-this-environment"),Ri(y._delegate,function ju(m,l,h){return ih.apply(this,arguments)}(y._delegate,h,qo))})()}signInWithRedirect(h){var y=this;return(0,I.A)(function*(){return mu(od(),y._delegate,"operation-not-supported-in-this-environment"),yield ai(y._delegate),ah(y._delegate,h,qo)})()}updateCurrentUser(h){return this._delegate.updateCurrentUser(h)}verifyPasswordResetCode(h){return function Oo(m,l){return ko.apply(this,arguments)}(this._delegate,h)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Ir,m})();function Jc(m,l,h){let y=m;"function"!=typeof m&&({next:y,error:l,complete:h}=m);const M=y;return{next:re=>M(re&&pi.getOrCreate(re)),error:l,complete:h}}function ud(m,l){const h=function rc(m,l){const h=Xc();if(!h)return[];const y=pt(fi,m,l);switch(h.getItem(y)){case Ir.NONE:return[vt];case Ir.LOCAL:return[v,di];case Ir.SESSION:return[di];default:return[]}}(m,l);if(typeof self<"u"&&!h.includes(v)&&h.push(v),typeof window<"u")for(const y of[Fo,di])h.includes(y)||h.push(y);return h.includes(vt)||h.push(vt),h}class Xs{constructor(){this.providerId="phone",this._delegate=new Bu(Kf(Y.A.auth()))}static credential(l,h){return Bu.credential(l,h)}verifyPhoneNumber(l,h){return this._delegate.verifyPhoneNumber(l,h)}unwrap(){return this._delegate}}Xs.PHONE_SIGN_IN_METHOD=Bu.PHONE_SIGN_IN_METHOD,Xs.PROVIDER_ID=Bu.PROVIDER_ID;const _u=Be;class cd{constructor(l,h,y=Y.A.app()){var M;_u(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new th(y.auth(),l,h),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sh(m){m.INTERNAL.registerComponent(new _e.uA("auth-compat",l=>{const h=l.getProvider("app-compat").getImmediate(),y=l.getProvider("auth");return new Ch(h,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yi,FacebookAuthProvider:bn,GithubAuthProvider:Fr,GoogleAuthProvider:Is,OAuthProvider:nr,SAMLAuthProvider:Fs,PhoneAuthProvider:Xs,PhoneMultiFactorGenerator:zl,RecaptchaVerifier:cd,TwitterAuthProvider:Us,Auth:Ch,AuthCredential:xs,Error:q.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.14")}(Y.A)},467:(Rt,Ue,U)=>{function I(oe,q,fe,le,_e,je,Se){try{var J=oe[je](Se),Z=J.value}catch(pe){return void fe(pe)}J.done?q(Z):Promise.resolve(Z).then(le,_e)}function Y(oe){return function(){var q=this,fe=arguments;return new Promise(function(le,_e){var je=oe.apply(q,fe);function Se(Z){I(je,le,_e,Se,J,"next",Z)}function J(Z){I(je,le,_e,Se,J,"throw",Z)}Se(void 0)})}}U.d(Ue,{A:()=>Y})},1635:(Rt,Ue,U)=>{function q(de,we){var ke={};for(var Ne in de)Object.prototype.hasOwnProperty.call(de,Ne)&&we.indexOf(Ne)<0&&(ke[Ne]=de[Ne]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var tt=0;for(Ne=Object.getOwnPropertySymbols(de);tt<Ne.length;tt++)we.indexOf(Ne[tt])<0&&Object.prototype.propertyIsEnumerable.call(de,Ne[tt])&&(ke[Ne[tt]]=de[Ne[tt]])}return ke}function pe(de,we,ke,Ne){return new(ke||(ke=Promise))(function(Ye,ae){function mt(Mt){try{Ut(Ne.next(Mt))}catch(tn){ae(tn)}}function mr(Mt){try{Ut(Ne.throw(Mt))}catch(tn){ae(tn)}}function Ut(Mt){Mt.done?Ye(Mt.value):function tt(Ye){return Ye instanceof ke?Ye:new ke(function(ae){ae(Ye)})}(Mt.value).then(mt,mr)}Ut((Ne=Ne.apply(de,we||[])).next())})}function Ae(de){return this instanceof Ae?(this.v=de,this):new Ae(de)}function ze(de,we,ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,Ne=ke.apply(de,we||[]),Ye=[];return tt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),mt("next"),mt("throw"),mt("return",function ae(gn){return function(ir){return Promise.resolve(ir).then(gn,tn)}}),tt[Symbol.asyncIterator]=function(){return this},tt;function mt(gn,ir){Ne[gn]&&(tt[gn]=function(Dn){return new Promise(function(Nt,Er){Ye.push([gn,Dn,Nt,Er])>1||mr(gn,Dn)})},ir&&(tt[gn]=ir(tt[gn])))}function mr(gn,ir){try{!function Ut(gn){gn.value instanceof Ae?Promise.resolve(gn.value.v).then(Mt,tn):$r(Ye[0][2],gn)}(Ne[gn](ir))}catch(Dn){$r(Ye[0][3],Dn)}}function Mt(gn){mr("next",gn)}function tn(gn){mr("throw",gn)}function $r(gn,ir){gn(ir),Ye.shift(),Ye.length&&mr(Ye[0][0],Ye[0][1])}}function et(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,we=de[Symbol.asyncIterator];return we?we.call(de):(de=function it(de){var we="function"==typeof Symbol&&Symbol.iterator,ke=we&&de[we],Ne=0;if(ke)return ke.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&Ne>=de.length&&(de=void 0),{value:de&&de[Ne++],done:!de}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),ke={},Ne("next"),Ne("throw"),Ne("return"),ke[Symbol.asyncIterator]=function(){return this},ke);function Ne(Ye){ke[Ye]=de[Ye]&&function(ae){return new Promise(function(mt,mr){!function tt(Ye,ae,mt,mr){Promise.resolve(mr).then(function(Ut){Ye({value:Ut,done:mt})},ae)}(mt,mr,(ae=de[Ye](ae)).done,ae.value)})}}}U.d(Ue,{AQ:()=>ze,N3:()=>Ae,Tt:()=>q,sH:()=>pe,xN:()=>et}),"function"==typeof SuppressedError&&SuppressedError}},Rt=>{Rt(Rt.s=7206)}]);